window.__require=function e(t,o,n){function i(a,c){if(!o[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var s="function"==typeof __require&&__require;if(!c&&s)return s(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AABBRegion:[function(e,t,o){"use strict";cc._RF.push(t,"a6025pq4zRBAaeDsbWjyQrx","AABBRegion"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.level=-1,t.index=-1,t}return __extends(t,e),t.prototype.aabb=function(){return this.node.getBoundingBox()},__decorate([n],t)}(cc.Component);o.default=i,cc._RF.pop()},{}],AbstractTableItem:[function(e,t,o){"use strict";cc._RF.push(t,"16abfgZS1NEObZPGNwjtE5a","AbstractTableItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],Actions:[function(e,t,o){"use strict";cc._RF.push(t,"9b462XreAtDoJefQPMuD8lR","Actions"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.downward=function(e,t){return cc.moveBy(t/e,cc.v2(0,-t))},e.upward=function(e,t){return cc.moveBy(t/e,cc.v2(0,t))},e.cycleAction=function(e,t,o,n,i,r,a,c){void 0===a&&(a=0),void 0===c&&(c=0);var l=Math.abs(n),s=[];s.push(e(l/i,t+n)),c>0&&s.push(cc.delayTime(c));for(var u=0;u<r;u++){var d=l-u*a,p=2*d/i,f=d;n>0?u%2==0&&(f=-f):u%2==1&&(f=-f),s.push(e(p,t+f)),c>0&&u%2==1&&s.push(cc.delayTime(c))}var h=l-(r-1)*a;return n>0?r%2==0&&(h=-h):r%2==1&&(h=-h),s.push(e(Math.abs(o-(t+h))/i,o)),cc.sequence(s)},e.delayTimeCall=function(e,t){return cc.sequence(cc.delayTime(e),cc.callFunc(t))},e.scheduleCall=function(e,t){return"function"==typeof t?cc.repeatForever(cc.sequence(cc.delayTime(e),cc.callFunc(t))):cc.repeatForever(cc.sequence(cc.delayTime(e),t))},e.update=function(e){return this.scheduleCall(0,function(){e(cc.director.getDeltaTime())})},e.highlightAction=function(e){return cc.sequence([cc.scaleTo(.1,1.4),cc.callFunc(function(){e&&e()}),cc.scaleTo(.07,.8),cc.scaleTo(.07,1.1),cc.scaleTo(.07,.9),cc.scaleTo(.07,1)])},e.flutterAction=function(){var e=cc.sequence([cc.moveBy(.6,cc.v2(0,0)),cc.moveBy(1,cc.v2(0,84))]),t=cc.sequence([cc.scaleTo(.1,1.2),cc.scaleTo(.1,.8),cc.scaleTo(.1,1)]),o=cc.sequence([cc.fadeTo(.8,255),cc.fadeTo(.8,0)]);return cc.spawn(e,t,o)},e.circleBy=function(e,t,o,n){var i=n||20,r=360/i,a=[];(o=o||20)<0&&(r=-r),o=Math.abs(o);for(var c=Math.PI/180,l=0;l<i;l++)a.push(cc.v2(Math.sin(r*l*c)*o+t.x,Math.cos(r*l*c)*o+t.y));return a.push(a),cc.cardinalSplineTo(e,a,0)},e.flipXAction=function(e,t){void 0===e&&(e=.5),void 0===t&&(t=10);var o=e/38,n=cc.sequence(cc.scaleTo(9*o,.1,1),cc.scaleTo(2*o,-.1,1),cc.scaleTo(8*o,-.9,1),cc.scaleTo(8*o,-.1,1),cc.scaleTo(2*o,.1,1),cc.scaleTo(9*o,1,1)),i=cc.sequence(cc.skewTo(9*o,0,-t),cc.skewTo(2*o,0,-t),cc.skewTo(8*o,0,0),cc.skewTo(8*o,0,t),cc.skewTo(2*o,0,t),cc.skewTo(9*o,0,0));return cc.spawn(n,i)},e.boom=function(e,t,o,n,i,r,a){void 0===r&&(r=2e3);for(var c=[],l=[],s=function(o){l.push(new Promise(function(r){var a=e();a.position=t,c.push(a);var l=360*o/i-45,s=cc.v2(1,1).rotateSelf(-l*Math.PI/180).mul(n);a.runAction(cc.sequence(cc.moveBy(n/500,s).easing(cc.easeExponentialOut()),cc.callFunc(function(){r()})))}))},u=0;u<i;u++)s(u);Promise.all(l).then(function(){for(var e=Math.floor(i/2),t=function(e){var t=c[e],n=o.sub(t.position),i=n.mag()/r,l=t.position.add(n.mul(.5)),s=n.normalize().rotate(-90*Math.PI/180),u=cc.bezierTo(i,[l.add(s.mul(200)),o,o]);t.runAction(cc.sequence(cc.delayTime(.08*e),cc.spawn(u.easing(cc.easeSineOut()),cc.scaleTo(i,.5),cc.fadeTo(i,80)),cc.callFunc(function(){t.active=!1,a&&a()})))},n=0;n<e;n++)t(n);var l=function(e){var t=c[c.length-1-e],n=o.sub(t.position),i=n.mag()/r,l=t.position.add(n.mul(.5)),s=n.normalize().rotate(-90*Math.PI/180),u=cc.bezierTo(i,[l.add(s.mul(-200)),o,o]);t.runAction(cc.sequence(cc.delayTime(.08*e),cc.spawn(u.easing(cc.easeSineOut()),cc.scaleTo(i,.5),cc.fadeTo(i,80)),cc.callFunc(function(){t.active=!1,a&&a()})))};for(n=0;n<c.length-e;n++)l(n)})},e}();o.default=n,cc._RF.pop()},{}],AdManner:[function(e,t,o){"use strict";cc._RF.push(t,"6ec6dy22hVAE7Ywv9FdEXWA","AdManner"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/facade/Facade"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.prototype.start=function(){},t.initvideo=function(){if("undefined"!=typeof wx){o.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-c2943c04bcd60f99"});var e=this;console.log("vider AdManner",o.videoAd),o.videoAd.onClose(function(t){console.log("videoAd onclose ",t),t.isEnded?e.videocallback(!0):e.videocallback(!1)}),o.videoAd.onError(function(e){console.log("videoAd onError ",e)})}},t.showVideo=function(e){if(this.videocallback=e,"undefined"==typeof wx)return console.log("\u770b\u89c6\u9891!!!"),void this.videocallback(!0);o.videoAd.load().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),o.videoAd.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(){n.default.executeCommand("ShowTipsCommand","\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1~"),console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5931\u8d25")})}).catch(function(){n.default.executeCommand("ShowTipsCommand","\u6682\u65e0\u5e7f\u544a"),console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5927\u8d25")})},t.tapeStart=function(){var e=this;if(null==this.recorder){if("undefined"==typeof tt)return;this.recorder=tt.getGameRecorderManager(),this.recorder.onStart(function(t){console.log("\u5f00\u59cb\u5f55\u5c4f=====>",t),e.videoPath=null}),this.recorder.onError(function(e){console.log("\u5f55\u5c4f\u9519\u8bef====>",e)}),this.recorder.onPause(function(e){console.log("\u5f55\u5c4f\u6682\u505c====>",e)}),this.recorder.onResume(function(e){console.log("\u5f55\u5c4f\u6062\u590d",e)}),this.recorder.onInterruptionBegin(function(e){console.log("\u5f55\u5c4f\u4e2d\u65ad\u5f00\u59cb",e)}),this.recorder.onInterruptionEnd(function(e){console.log("\u5f55\u5c4f\u4e2d\u65ad\u7ed3\u675f",e)}),this.recorder.onStop(function(t){var o=(new Date).getTime()-e.startTimeInterval;console.log("\u5206\u4eab\u6700\u540e\u7684\u65f6\u957f",o),o<3e3?(console.log("\u5f55\u5c4f\u65f6\u95f4\u592a\u77ed!"),tt.showToast({title:"\u5f55\u5c4f\u65f6\u95f4\u592a\u77ed",icon:"fail"})):(console.log("\u83b7\u5f97\u89c6\u9891\u5730\u5740"),e.videoPath=t.videoPath)})}var t=new Date;this.startTimeInterval=t.getTime(),console.log("\u521d\u59cb\u5f55\u5236\u65f6\u95f4\u70b9",this.startTimeInterval),this.recorder.start&&this.recorder.start({duration:300})},t.tapeStop=function(){"undefined"!=typeof tt&&this.recorder.stop()},t.tapeShare=function(e){null!=this.videoPath&&tt.shareAppMessage({query:"",desc:"\u70b9\u51fb\u5f00\u59cb\u6e38\u620f",channel:"video",extra:{videoPath:this.videoPath,videoTopics:["\u642d\u6865\u98ce\u4e91"],hashtag_list:["\u642d\u6865\u98ce\u4e91"]},success:function(){e(!0),console.log("\u5206\u4eab\u6210\u529f")},fail:function(){e(!1)},complete:function(){console.log("\u5206\u4eab\u5b8c\u6210")}})},t.showInterstitialAd=function(){if("undefined"!=typeof wx&&!((new Date).getTime()-this.InterstitialAdtime<=12e4)){this.InterstitialAdtime=(new Date).getTime(),console.log("wixin\u63d2\u5c4f");var e=wx.createInterstitialAd({adUnitId:"adunit-dd283946b39eb100"});e.load().then(function(){e.show().then(function(){console.log("\u63d2\u5c4f\u663e\u793a\u6210\u529fshow"),e.onClose(function(){})}).catch(function(){console.log("\u63d2\u5c4f\u663e\u793a\u5931\u8d25show")})})}},t.bannerAd=null,t.InterstitialAd=null,t.blockAd1=null,t.blockAd2=null,t.videoAd=null,t.rewardedvideo_flag=!1,t.videocallback=null,o=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../../../framework/facade/Facade":"Facade"}],AppConfig:[function(e,t,o){"use strict";cc._RF.push(t,"dd662BFPltNfY7IYdf7FQXJ","AppConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.AppConfig=void 0;var n=function(){function e(){}return e.version="1.0.1",e.gameName="WhackZombies",e.isDebug=!0,e.GameID="2",e.rankKey="rank2",e}();o.AppConfig=n,cc._RF.pop()},{}],Armory:[function(e,t,o){"use strict";cc._RF.push(t,"d4529RQIIBPsYekmld/nMb5","Armory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./World"),i=e("../../../framework/config/ExcelConfig"),r=e("../config/ExcelTableNames"),a=function(){function e(e){this._map=null,this._weaponUpCfg=null,this._bulletUpCfg=null,this._map=e,this._weaponUpCfg=i.ExcelConfig.getExcelTable(r.ExcelTableNames.WeaponUp),this._bulletUpCfg=i.ExcelConfig.getExcelTable(r.ExcelTableNames.BulletUp)}return e.prototype.hurtMulOf=function(e){var t=this._weaponUpCfg[n.World.Storage.ADLv-1].fight;if(1==e)return t;var o=this.levelOfEmitterPower(e);return e==n.World.Storage.unlockGun&&(o+=50)>this._weaponUpCfg.length&&(o=this._weaponUpCfg.length),this._weaponUpCfg[o-1].hurt_add*t},e.prototype.payloadAddOf=function(e){if(1==e)return 0;var t=this.levelOfEmitterFirePower(e);return e==n.World.Storage.unlockGun&&(t+=50)>this._weaponUpCfg.length&&(t=this._weaponUpCfg.length),this._bulletUpCfg[t-1]["gun_"+("000"+e).substr(-3)]},e.prototype.freMulOf=function(e){var t=0;if(1==e)t=n.World.Storage.ADLv-1;else{var o=this.levelOfEmitterFirePower(e);e==n.World.Storage.unlockGun&&(o+=50)>this._weaponUpCfg.length&&(o=this._weaponUpCfg.length),t=o-1}return this._weaponUpCfg[t].fre},e.prototype.rangeMulOf=function(e){if(4==e||5==e){var t=this.levelOfEmitterPower(e);return e==n.World.Storage.unlockGun&&(t+=50)>this._weaponUpCfg.length&&(t=this._weaponUpCfg.length),this._weaponUpCfg[t-1].range_add}return 1},e.prototype.magnifyMul=function(e){if(2==e||9==e||10==e){var t=this.levelOfEmitterPower(e);return e==n.World.Storage.unlockGun&&(t+=50)>this._weaponUpCfg.length&&(t=this._weaponUpCfg.length),this._weaponUpCfg[t-1].amp_add}return 1},e.prototype.levelOfEmitterPower=function(e){var t=this._map[e];return t?t.powerLv:1},e.prototype.levelOfEmitterFirePower=function(e){var t=this._map[e];return t?t.firePowerLv:1},e.prototype.addLevelOfEmitterPower=function(e,t){var o=this._map[e];o||((o={}).powerLv=1,o.firePowerLv=1,this._map[e]=o),o.powerLv=o.powerLv+t,n.World.Storage.armory=this.toJson()},e.prototype.addLevelOfEmitterFirePower=function(e,t){var o=this._map[e];o||((o={}).powerLv=1,o.firePowerLv=1,this._map[e]=o),o.firePowerLv=o.firePowerLv+t,n.World.Storage.armory=this.toJson()},e.prototype.toJson=function(){return JSON.stringify(this._map)},e}();o.default=a,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../config/ExcelTableNames":"ExcelTableNames","./World":"World"}],BossEnemy:[function(e,t,o){"use strict";cc._RF.push(t,"c1cc1d82RVB7rbf8Gux/Hri","BossEnemy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Enemy"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hpBar=null,t}return __extends(t,e),__decorate([a(cc.ProgressBar)],t.prototype,"hpBar",void 0),__decorate([r],t)}(n.default);o.default=c,cc._RF.pop()},{"./Enemy":"Enemy"}],BulletEmitterHuoJianTong:[function(e,t,o){"use strict";cc._RF.push(t,"e866aL+CRFBSp2UxvZucu5u","BulletEmitterHuoJianTong"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=function(e){function t(t){var o=e.call(this,t)||this;return o._firingRange=1e3,o._interval=.5,o._speed=600,o}return __extends(t,e),t.prototype.fire=function(e,t){this.bulletCount--;var o=this.gameBulletsController.getInactiveBullet(n.default.TYPES.HuoJianTong);o.node.active=!0,o.node.position=e,o.fly(t,this._firingRange,this._speed)},t}(n.default);o.default=i,cc._RF.pop()},{"./BulletEmitter":"BulletEmitter"}],BulletEmitterHuoYan:[function(e,t,o){"use strict";cc._RF.push(t,"b0708OLqc1I7JmsZsEiOmlz","BulletEmitterHuoYan"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=function(e){function t(t){var o=e.call(this,t)||this;return o._list=[],o._firingRange=600,o._interval=.15,o._speed=300,o}return __extends(t,e),t.prototype.fire=function(e,t){this.bulletCount--;var o=this.gameBulletsController.getInactiveBullet(n.default.TYPES.HuoYan);o.node.active=!0,o.node.position=e,o.fly(t,this._firingRange,this._speed),this._list.unshift(o),this._list=this._list.filter(function(e){return 1==e.node.active}),this._list.forEach(function(e,t){return e.node.zIndex=t})},t}(n.default);o.default=i,cc._RF.pop()},{"./BulletEmitter":"BulletEmitter"}],BulletEmitterJiGuang:[function(e,t,o){"use strict";cc._RF.push(t,"c2450ByS4xJTppJiZNkPck4","BulletEmitterJiGuang"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=function(e){function t(t){var o=e.call(this,t)||this;return o._bulletJiGuang=null,o._bulletJiGuangSke=null,o._role=null,o._firingRange=800,o._interval=.05,o._speed=1500,o}return __extends(t,e),t.prototype.onEnter=function(){var e=this,t=this.gameBulletsController.getInactiveBullet(n.default.TYPES.JiGuang);t.collider.enabled=!1;var o=t.getComponent(sp.Skeleton);o.setStartListener(function(e){"jiguang"===(e.animation?e.animation.name:"")&&(t.collider.enabled=!0)}),o.setCompleteListener(function(n){var i=n.animation?n.animation.name:"";"xuneng"===i?o.setAnimation(0,"jiguang",!1):"jiguang"===i&&(e.bulletCount--,t.collider.enabled=!1,t.node.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){t.collider.enabled||(t.node.active=!1)}))))}),this._bulletJiGuangSke=o,this._bulletJiGuang=t,this._role=window.GameRoleController.role,this.changeBulletPosition(),this._role.node.on(cc.Node.EventType.POSITION_CHANGED,this.changeBulletPosition,this),this._role.node.on(cc.Node.EventType.ROTATION_CHANGED,this.changeBulletPosition,this)},t.prototype.onExit=function(){this._bulletJiGuang.node.active=!1,this._role.node.off(cc.Node.EventType.POSITION_CHANGED,this.changeBulletPosition,this),this._role.node.off(cc.Node.EventType.ROTATION_CHANGED,this.changeBulletPosition,this)},t.prototype.changeBulletPosition=function(){this._bulletJiGuang.node.rotation=this._role.node.rotation,this._bulletJiGuang.node.position=this._role.node.position.add(cc.v2(0,1).rotate(cc.misc.degreesToRadians(-this._role.node.rotation)).normalize().mul(this._role.gunTopNode.y+20))},t.prototype.fire=function(){this._bulletJiGuang.node.active?"jiguang"!==this._bulletJiGuangSke.animation||this._bulletJiGuang.collider.enabled||this._bulletJiGuangSke.setAnimation(0,"jiguang",!1):(this._bulletJiGuang.node.active=!0,this._bulletJiGuangSke.setAnimation(0,"xuneng",!1))},t}(n.default);o.default=i,cc._RF.pop()},{"./BulletEmitter":"BulletEmitter"}],BulletEmitterJiaTeLin:[function(e,t,o){"use strict";cc._RF.push(t,"4db758f9P9A8LM9PRXQc7sC","BulletEmitterJiaTeLin"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=function(e){function t(t){var o=e.call(this,t)||this;return o.degree=0,o.num=0,o._firingRange=1e3,o._interval=.1,o._speed=1200,o}return __extends(t,e),t.prototype.fire=function(e,t){switch(this.bulletCount--,this.num%4){case 0:var o=2*Math.random();this.degree=this.degree>0?-o:o,(i=this.gameBulletsController.getInactiveBullet(n.default.TYPES.JiaTeLin)).node.active=!0,i.node.position=e,i.fly(t.rotate(cc.misc.degreesToRadians(this.degree)),this._firingRange,this._speed);break;case 1:o=3+5*Math.random(),(r=this.gameBulletsController.getInactiveBullet(n.default.TYPES.JiaTeLin)).node.active=!0,r.node.position=e.add(t.mul(-10*Math.random())),r.fly(t.rotate(cc.misc.degreesToRadians(this.degree+o)),this._firingRange,this._speed),(a=this.gameBulletsController.getInactiveBullet(n.default.TYPES.JiaTeLin)).node.active=!0,a.node.position=e.add(t.mul(10*Math.random())),a.fly(t.rotate(cc.misc.degreesToRadians(-this.degree-o)),this._firingRange,this._speed);break;case 2:var i;o=2*Math.random(),this.degree=this.degree>0?-o:o,(i=this.gameBulletsController.getInactiveBullet(n.default.TYPES.JiaTeLin)).node.active=!0,i.node.position=e,i.fly(t.rotate(cc.misc.degreesToRadians(this.degree)),this._firingRange,this._speed);break;case 3:var r,a;o=10+5*Math.random(),(r=this.gameBulletsController.getInactiveBullet(n.default.TYPES.JiaTeLin)).node.active=!0,r.node.position=e.add(t.mul(-15*Math.random())),r.fly(t.rotate(cc.misc.degreesToRadians(this.degree+o)),this._firingRange,this._speed),(a=this.gameBulletsController.getInactiveBullet(n.default.TYPES.JiaTeLin)).node.active=!0,a.node.position=e.add(t.mul(15*Math.random())),a.fly(t.rotate(cc.misc.degreesToRadians(-this.degree-o)),this._firingRange,this._speed)}this.num++},t}(n.default);o.default=i,cc._RF.pop()},{"./BulletEmitter":"BulletEmitter"}],BulletEmitterJuJiQiang:[function(e,t,o){"use strict";cc._RF.push(t,"7e91aqtLv1DgokxbtjCsUYR","BulletEmitterJuJiQiang"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=function(e){function t(t){var o=e.call(this,t)||this;return o._firingRange=2e3,o._interval=.5,o._speed=2e3,o}return __extends(t,e),t.prototype.fire=function(e,t){this.bulletCount--;var o=this.gameBulletsController.getInactiveBullet(n.default.TYPES.JuJiQiang);o.node.active=!0,o.node.position=e,o.fly(t,this._firingRange,this._speed)},t}(n.default);o.default=i,cc._RF.pop()},{"./BulletEmitter":"BulletEmitter"}],BulletEmitterLiZiPao:[function(e,t,o){"use strict";cc._RF.push(t,"c5068lByUNDfZVSWj7ABV1y","BulletEmitterLiZiPao"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=function(e){function t(t){var o=e.call(this,t)||this;return o._firingRange=500,o._interval=.5,o._speed=800,o}return __extends(t,e),t.prototype.fire=function(e,t){this.bulletCount--;var o=this.gameBulletsController.getInactiveBullet(n.default.TYPES.LiZiPao);o.node.active=!0,o.node.position=e,o.fly(t,this._firingRange,this._speed)},t}(n.default);o.default=i,cc._RF.pop()},{"./BulletEmitter":"BulletEmitter"}],BulletEmitterPenZi:[function(e,t,o){"use strict";cc._RF.push(t,"ff0edq6VF9JqK8aSEOQPcB3","BulletEmitterPenZi"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=e("../../info/World"),r=function(e){function t(t){var o=e.call(this,t)||this;return o._firingRange=800,o._interval=.05,o._speed=1500,o}return __extends(t,e),t.prototype.fire=function(e,t){this.bulletCount--;var o=this.gameBulletsController.getInactiveBullet(n.default.TYPES.PenZi),r=o.getComponent(sp.Skeleton);r.setCompleteListener(function(e){e.animation&&e.animation.name,o.node.active=!1}),o.node.active=!0,o.node.position=e,o.node.scale=1*i.World.My.armory.magnifyMul(o.bulletId),o.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),r.setAnimation(0,"animation",!1)},t}(n.default);o.default=r,cc._RF.pop()},{"../../info/World":"World","./BulletEmitter":"BulletEmitter"}],BulletEmitterSanDanQiang:[function(e,t,o){"use strict";cc._RF.push(t,"fb678niczNL5ILsd5k556at","BulletEmitterSanDanQiang"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=e("../../info/World"),r=e("../../../../framework/config/ExcelConfig"),a=e("../../config/ExcelTableNames"),c=function(e){function t(t){var o=e.call(this,t)||this;return o._firingRange=900,o._interval=.1,o._speed=1500,o}return __extends(t,e),t.prototype.fire=function(e,t){var o=this;this.bulletCount--;for(var c=i.World.My.armory.levelOfEmitterPower(this._bulletEmitterID),l=r.ExcelConfig.getExcelTable(a.ExcelTableNames.WeaponUp)[c-1].bullet_split,s=3+2*l,u=10+5*l,d=[],p=Math.floor(s/2),f=0;f<p;f++){var h=(f+1)*u/p;d.push(h),d.push(-h)}s%2==1&&d.push(0),d.forEach(function(i){var r=o.gameBulletsController.getInactiveBullet(n.default.TYPES.SanDanQiang);r.node.active=!0,r.node.position=e,r.fly(t.rotate(cc.misc.degreesToRadians(i)),o._firingRange,o._speed)})},t}(n.default);o.default=c,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../info/World":"World","./BulletEmitter":"BulletEmitter"}],BulletEmitterShanDianQiu:[function(e,t,o){"use strict";cc._RF.push(t,"1d278R1B3RH6KmJMSOmnfUe","BulletEmitterShanDianQiu"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=e("../../info/World"),r=function(e){function t(t){var o=e.call(this,t)||this;return o._firingRange=1e3,o._interval=.45,o._speed=300,o}return __extends(t,e),t.prototype.fire=function(e,t){this.bulletCount--;var o=this.gameBulletsController.getInactiveBullet(n.default.TYPES.ShanDianQiu);o.node.active=!0,o.node.position=e,o.node.scale=1*i.World.My.armory.magnifyMul(o.bulletId),o.fly(t,this._firingRange,this._speed)},t}(n.default);o.default=r,cc._RF.pop()},{"../../info/World":"World","./BulletEmitter":"BulletEmitter"}],BulletEmitterShouQiang:[function(e,t,o){"use strict";cc._RF.push(t,"f0d58H7ssBLXIO9MZmgW0N8","BulletEmitterShouQiang"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletEmitter"),i=function(e){function t(t){var o=e.call(this,t)||this;return o._firingRange=800,o._interval=.05,o._speed=1500,o}return __extends(t,e),t.prototype.fire=function(e,t){var o=this.gameBulletsController.getInactiveBullet(n.default.TYPES.ShouQiang);o.node.active=!0,o.node.position=e,o.fly(t,this._firingRange,this._speed)},t}(n.default);o.default=i,cc._RF.pop()},{"./BulletEmitter":"BulletEmitter"}],BulletEmitter:[function(e,t,o){"use strict";cc._RF.push(t,"20d59hobkVP7p8yXkmyYW5w","BulletEmitter"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../config/ExcelTableNames"),i=e("../../../../framework/config/ExcelConfig"),r=e("../../game/GameProxy"),a=e("../../info/World"),c=function(){function e(e){this._gameBulletsController=null,this._firingRange=0,this._interval=0,this._speed=0,this._payload=0,this._bulletCount=0,this._bulletEmitterID=0,this._gameBulletsController=e}return Object.defineProperty(e.prototype,"firingRange",{get:function(){return this._firingRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){return this._interval},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this._payload},set:function(e){this._payload=e,this.bulletCount=this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bulletCount",{get:function(){return this._bulletCount},set:function(e){this._bulletCount=e,r.GameProxy.emit(r.GameProxy.Event.UpdateBulletCount)},enumerable:!1,configurable:!0}),e.prototype.isUseUp=function(){return 0!=this._payload&&this._bulletCount<1},Object.defineProperty(e.prototype,"gameBulletsController",{get:function(){return this._gameBulletsController},enumerable:!1,configurable:!0}),e.prototype.init=function(e){this._bulletEmitterID=e;var t=i.ExcelConfig.getExcelTable(n.ExcelTableNames.Weapon)[this._bulletEmitterID-1];this._speed=t.speed,this._firingRange=t.range*a.World.My.armory.rangeMulOf(this._bulletEmitterID),this._interval=t.fre*a.World.My.armory.freMulOf(this._bulletEmitterID),this.payload=a.World.My.armory.payloadAddOf(this._bulletEmitterID),console.log("payload===>",this._payload)},e.prototype.onEnter=function(){},e.prototype.onExit=function(){},e.TYPES={ShouQiang:1,PenZi:2,JiaTeLin:3,SanDanQiang:4,HuoYan:5,JiGuang:6,JuJiQiang:7,LiZiPao:8,HuoJianTong:9,ShanDianQiu:10},e}();o.default=c,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../game/GameProxy":"GameProxy","../../info/World":"World"}],BulletHuoJianTong:[function(e,t,o){"use strict";cc._RF.push(t,"f1a9acz1GRFM6HjLvTeZdOh","BulletHuoJianTong"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../../../../framework/facade/Facade"),r=e("../../info/World"),a=e("../../../../framework/audio/Music"),c=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._gameExplosivesController=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._gameExplosivesController=i.default.findComponent("GameScene","GameExplosivesController")},t.prototype.init=function(e){this.bulletId=e},t.prototype.boom=function(){a.Music.playSFX("sound/msc_g002");var e=this._gameExplosivesController.getInactiveExplosive(9);e.node.position=this.node.position,e.node.active=!0,e.node.scale=1*r.World.My.armory.magnifyMul(e.bulletId),e.node.rotation=360*Math.random(),e.boom()},t.prototype.fly=function(e,t,o){var n=this;this.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x)),this.node.runAction(cc.sequence(cc.moveBy(t/o,e.mul(t)).easing(cc.easeQuadraticActionIn()),cc.callFunc(function(){n.node.active=!1,n.boom()})))},t.prototype.onCollisionEnter=function(){this.node.active=!1,this.boom()},__decorate([c],t)}(n.default);o.default=l,cc._RF.pop()},{"../../../../framework/audio/Music":"Music","../../../../framework/facade/Facade":"Facade","../../info/World":"World","./Bullet":"Bullet"}],BulletHuoYan:[function(e,t,o){"use strict";cc._RF.push(t,"edd203mtm9Lw4Q0h6mhYNeR","BulletHuoYan"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onCollisionEnter=function(t,o){var n=this;e.prototype.onCollisionEnter.call(this,t,o);var i=cc.repeatForever(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){e.prototype.onCollisionEnter.call(n,t,o)})));i.setTag(1388),t.node.stopActionByTag(1388),t.node.runAction(i)},t.prototype.onCollisionExit=function(e){e.node.stopActionByTag(1388)},t.prototype.strike=function(e){var t=window.GameBulletsController,o=t.getInactiveBulletStrike(this.bulletId);o.node.active=!0,o.node.position=cc.v2(),o.node.rotation=this.node.rotation,o.node.setContentSize(e.node.getContentSize()),o.node.removeFromParent(!1),o.node.setParent(e.node);var n=o.spriteNode;o.node.rotation=360*Math.random(),o.node.runAction(cc.sequence(cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){n.active=!n.active})),6),cc.callFunc(function(){o.node.stopAllActions(),o.node.active=!1,o.node.removeFromParent(!1),o.node.setParent(t.bulletLayer)})))},t.prototype.fly=function(e,t){var o=this;this.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x));var n=t/400;this.node.runAction(cc.sequence(cc.moveBy(n,e.mul(t)).easing(cc.easeSineOut()),cc.callFunc(function(){o.node.active=!1}))),this.node.scale=.3,this.node.opacity=255,this.node.runAction(cc.spawn(cc.scaleTo(n,t/100),cc.fadeTo(n,50)))},__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./Bullet":"Bullet"}],BulletJiGuang:[function(e,t,o){"use strict";cc._RF.push(t,"5191cP2MvJAj5S4Mn/Tj0r2","BulletJiGuang"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.fly=function(){},t.prototype.onCollisionEnter=function(t,o){var n=this;e.prototype.onCollisionEnter.call(this,t,o);var i=cc.repeatForever(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){e.prototype.onCollisionEnter.call(n,t,o)})));i.setTag(1333),t.node.stopActionByTag(1333),t.node.runAction(i)},t.prototype.onCollisionExit=function(e){e.node.stopActionByTag(1333)},__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./Bullet":"Bullet"}],BulletJuJiDan:[function(e,t,o){"use strict";cc._RF.push(t,"aabefjCqDVKqrglQB8l3ylo","BulletJuJiDan"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.fly=function(e,t,o){var n=this;this.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x)),this.node.runAction(cc.sequence(cc.moveBy(t/o,e.mul(t)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){n.node.active=!1})))},__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./Bullet":"Bullet"}],BulletLiZiPao:[function(e,t,o){"use strict";cc._RF.push(t,"d49a3xULQFGQaanbQQSAKQb","BulletLiZiPao"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../bulletEmitter/BulletEmitter"),r=e("../../info/World"),a=e("../../../../framework/config/ExcelConfig"),c=e("../../config/ExcelTableNames"),l=cc._decorator,s=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._distance=0,t._speed=0,t}return __extends(t,e),t.prototype.boom=function(){for(var e=r.World.My.armory.levelOfEmitterPower(this.bulletId),t=4+2*a.ExcelConfig.getExcelTable(c.ExcelTableNames.WeaponUp)[e-1].bullet_split,o=function(e){var o=360*e/t,r=window.GameBulletsController.getInactiveBullet(i.default.TYPES.LiZiPao+100);r.node.rotation=n.node.rotation+o;var a=cc.v2(0,1).normalize().rotate(cc.misc.degreesToRadians(-r.node.rotation));r.node.position=n.node.position.add(a.mul(130)),r.node.active=!0,r.node.runAction(cc.sequence(cc.moveBy(n._distance/n._speed,a.mul(n._distance)),cc.callFunc(function(){r.node.active=!1})))},n=this,l=0;l<t;l++)o(l)},t.prototype.fly=function(e,t,o){var n=this;this._distance=t,this._speed=o,this.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x)),this.node.runAction(cc.sequence(cc.moveBy(t/o,e.mul(t)),cc.callFunc(function(){n.node.active=!1})))},t.prototype.collisionEnemy=function(t,o){e.prototype.collisionEnemy.call(this,t,o),this.boom()},__decorate([s],t)}(n.default));o.default=u,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../info/World":"World","../bulletEmitter/BulletEmitter":"BulletEmitter","./Bullet":"Bullet"}],BulletOfDiLei:[function(e,t,o){"use strict";cc._RF.push(t,"ea76fcmuIdJV6eQoHlSHVSh","BulletOfDiLei"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../../../../framework/facade/Facade"),r=e("../../game/GameProxy"),a=e("../../../../framework/config/ExcelConfig"),c=e("../../config/ExcelTableNames"),l=e("../../info/World"),s=cc._decorator,u=s.ccclass,d=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._gameExplosivesController=null,t}return __extends(t,e),t.prototype.strike=function(){},t.prototype.init=function(e){this.bulletId=e;var t=a.ExcelConfig.getExcelTable(c.ExcelTableNames.Prop)[this.bulletId-1];this.bThrought=1===t.pierce,this.repel=t.repel,this.stiff=t.stiff;var o=a.ExcelConfig.getExcelTable(c.ExcelTableNames.Weapon)[0];this.hurt=Math.floor(o.hurt*l.World.My.armory.hurtMulOf(1))*t.hurt},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._gameExplosivesController=i.default.findComponent("GameScene","GameExplosivesController")},t.prototype.onCollisionEnter=function(){this.node.active=!1,this.boom()},t.prototype.boom=function(){var e=this._gameExplosivesController.getInactiveExplosive(9);e.node.position=this.node.position,e.node.active=!0,e.node.scale=.5,e.node.rotation=360*Math.random(),e.boom(),r.GameProxy.emit(r.GameProxy.Event.ShakeScreen,.08,2,2)},__decorate([u],t)}(n.default));o.default=d,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../../../framework/facade/Facade":"Facade","../../config/ExcelTableNames":"ExcelTableNames","../../game/GameProxy":"GameProxy","../../info/World":"World","./Bullet":"Bullet"}],BulletOfEnemy:[function(e,t,o){"use strict";cc._RF.push(t,"be01bjDEqJBnot/Ow1MalHA","BulletOfEnemy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../../config/ExcelTableNames"),r=e("../../../../framework/config/ExcelConfig"),a=e("../../game/GameProxy"),c=cc._decorator,l=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(e){this.bulletId=e;var t=r.ExcelConfig.getExcelTable(i.ExcelTableNames.Enemy)[e%100-1];this.bThrought=!1,this.hurt=Math.floor(t.hurt*a.GameProxy.enemyHurtMulOf(t.id)),this.repel=0,this.stiff=0},t.prototype.onEnable=function(){window.GameBulletsController.enemyBullets.push(this)},t.prototype.onDisable=function(){this.node.stopAllActions(),this._contacts.length=0;var e=window.GameBulletsController;e.enemyBullets.splice(e.enemyBullets.indexOf(this),1)},t.prototype.onCollisionEnter=function(){console.log("\u89d2\u8272\u88ab\u5b50\u5f39\u51fb\u4e2d"),window.GameRoleController.hp-=this.hurt,this.bThrought||(this.node.active=!1)},t.prototype.onCollisionStay=function(){},t.prototype.onCollisionExit=function(){},__decorate([l],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../game/GameProxy":"GameProxy","./Bullet":"Bullet"}],BulletOfFangHuDun:[function(e,t,o){"use strict";cc._RF.push(t,"d6cb29kVNJHs4dOm8wuufsN","BulletOfFangHuDun"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../../info/World"),r=e("../../../../framework/config/ExcelConfig"),a=e("../../config/ExcelTableNames"),c=cc._decorator,l=c.ccclass,s=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._ske=null,t}return __extends(t,e),t.prototype.strike=function(){this._ske.setAnimation(0,"transition",!1)},t.prototype.init=function(e){this.bulletId=e;var t=r.ExcelConfig.getExcelTable(a.ExcelTableNames.Prop)[this.bulletId-1];this.bThrought=1===t.pierce,this.repel=t.repel,this.stiff=t.stiff;var o=r.ExcelConfig.getExcelTable(a.ExcelTableNames.Weapon)[0];this.hurt=Math.floor(o.hurt*i.World.My.armory.hurtMulOf(1))*t.hurt},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.init(5),this._ske=this.getComponent(sp.Skeleton),this._ske.setCompleteListener(function(e){var o=e.animation?e.animation.name:"";if(("start"==o||"transition"==o)&&(t._ske.setAnimation(0,"loops",!1),!t.node.getActionByTag(114))){var n=cc.speed(cc.repeatForever(cc.rotateBy(1.25,720)),0);n.setTag(114),t.node.runAction(n),cc.tween(n).to(1,{_speed:1},{easing:"sineIn"}).start()}}),window.GameRoleController.role.node.on(cc.Node.EventType.POSITION_CHANGED,function(){t.node.position=window.GameRoleController.role.node.position})},t.prototype.blink=function(){this.unblink();var e=cc.repeatForever(cc.sequence(cc.fadeTo(.1,0),cc.fadeTo(.1,255)));e.setTag(485),this.node.runAction(e)},t.prototype.unblink=function(){this.node.stopActionByTag(485),this.node.opacity=255},t.prototype.onDisable=function(){this.unblink(),e.prototype.onDisable.call(this),window.GameRoleController.role.spaceCircleCollider.radius=25},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),window.GameRoleController.role.spaceCircleCollider.radius=80,this.node.position=window.GameRoleController.role.node.position,this.node.stopAllActions(),this._ske.setAnimation(0,"start",!1)},t.prototype.onCollisionStay=function(e,t){this.strike(e,t)},t.prototype.collisionEnemy=function(e,t){this.strike(e,t);var o=e.getComponent("Enemy");this.stiff>0&&o.doStiff(this.stiff),o.doSpeedcut(),this.doRepeal(o,this.repel);var n=this.hurt;n>0&&(o.hp-=n)},t.prototype.doRepeal=function(e,t){e.doRepel(e.node.position.sub(this.node.position).normalize(),t)},__decorate([l],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../info/World":"World","./Bullet":"Bullet"}],BulletOfJianGuangSi:[function(e,t,o){"use strict";cc._RF.push(t,"c0d80OY65BAjLn62n5cq+8P","BulletOfJianGuangSi"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../../info/World"),r=e("../../../../framework/config/ExcelConfig"),a=e("../../config/ExcelTableNames"),c=cc._decorator,l=c.ccclass,s=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._ske=null,t}return __extends(t,e),t.prototype.init=function(e){this.bulletId=e;var t=r.ExcelConfig.getExcelTable(a.ExcelTableNames.Prop)[this.bulletId-1];this.bThrought=1===t.pierce,this.repel=t.repel,this.stiff=t.stiff;var o=r.ExcelConfig.getExcelTable(a.ExcelTableNames.Weapon)[0];this.hurt=Math.floor(o.hurt*i.World.My.armory.hurtMulOf(1))*t.hurt},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this._ske=this.getComponent(sp.Skeleton),this._ske.setCompleteListener(function(e){e.animation&&e.animation.name,t.node.active=!1})},t.prototype.onCollisionEnter=function(){},t.prototype.execute=function(){var e=this;this._ske.setAnimation(0,"614",!1),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){window.GameEnemysController.allAliveEnemy().forEach(function(t){return t.hp-=e.hurt})})))},__decorate([l],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../info/World":"World","./Bullet":"Bullet"}],BulletOfLighting:[function(e,t,o){"use strict";cc._RF.push(t,"5a245PWUhJNNYI42/j5E9XP","BulletOfLighting"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../enemy/Enemy"),r=e("../../info/World"),a=e("../../../../framework/config/ExcelConfig"),c=e("../../config/ExcelTableNames"),l=cc._decorator,s=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._ske=null,t._lightEnemys=[],t}return __extends(t,e),t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this._lightEnemys.length=0},t.prototype.strike=function(e){var t=window.GameBulletsController;this._lightEnemys.push(e.getComponent(i.default));var o=t.getInactiveBulletStrike(10);o.node.active=!0,o.node.position=cc.v2(),o.node.rotation=this.node.rotation,o.node.setContentSize(e.node.getContentSize()),o.node.removeFromParent(!1),o.node.setParent(e.node);var n=o.spriteNode;o.node.rotation=360*Math.random(),o.node.runAction(cc.sequence(cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){n.active=!n.active})),6),cc.callFunc(function(){o.node.stopAllActions(),o.node.active=!1,o.node.removeFromParent(!1),o.node.setParent(t.bulletLayer)})))},t.prototype.init=function(e){this.bulletId=e;var t=a.ExcelConfig.getExcelTable(c.ExcelTableNames.Prop)[this.bulletId-1];this.bThrought=1===t.pierce,this.repel=t.repel,this.stiff=t.stiff;var o=a.ExcelConfig.getExcelTable(c.ExcelTableNames.Weapon)[0];this.hurt=Math.floor(o.hurt*r.World.My.armory.hurtMulOf(1))*t.hurt},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this._ske=this.getComponent(sp.Skeleton),this._ske.setCompleteListener(function(e){var o;if(e.animation&&e.animation.name,t._lightEnemys.length>0&&t._lightEnemys.length<6){var n=window.GameEnemysController.allAliveAndInScreenEnemy().filter(function(e){return!t._lightEnemys.includes(e)});if(n.length>0){var i=-1,r=null;n.forEach(function(e){var o=t.node.position.sub(e.node.position).mag();(i<0||o<i)&&(i=o,r=e)});var a=window.GameBulletsController.getInactivePropBullet(6);a.node.position=t._lightEnemys[t._lightEnemys.length-1].node.position,(o=a._lightEnemys).push.apply(o,t._lightEnemys),a.joint(r.node.position)}}t.node.active=!1})},t.prototype.joint=function(e){var t=e.sub(this.node.position),o=t.mag();this.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),this.node.scaleY=o/380,this.node.active=!0,this._ske.setAnimation(0,"animation",!1)},__decorate([s],t)}(n.default));o.default=u,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../info/World":"World","../enemy/Enemy":"Enemy","./Bullet":"Bullet"}],BulletOfShouLei:[function(e,t,o){"use strict";cc._RF.push(t,"083284vH5tL8raqVw3y/gbv","BulletOfShouLei"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../../../../framework/facade/Facade"),r=e("../../game/GameProxy"),a=e("../../info/World"),c=e("../../../../framework/config/ExcelConfig"),l=e("../../config/ExcelTableNames"),s=cc._decorator,u=s.ccclass,d=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._ske=null,t._bounds=cc.rect(),t._gameExplosivesController=null,t}return __extends(t,e),t.prototype.strike=function(){},t.prototype.init=function(e){this.bulletId=e;var t=c.ExcelConfig.getExcelTable(l.ExcelTableNames.Prop)[this.bulletId-1];this.bThrought=1===t.pierce,this.repel=t.repel,this.stiff=t.stiff;var o=c.ExcelConfig.getExcelTable(l.ExcelTableNames.Weapon)[0];this.hurt=Math.floor(o.hurt*a.World.My.armory.hurtMulOf(1))*t.hurt;var n=cc.find("Canvas").getChildByName("GameScene").getChildByName("shakeNode").getChildByName("bg");this._bounds.x=-n.width/2,this._bounds.y=-n.height/2,this._bounds.width=n.width,this._bounds.height=n.height},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._ske=this.getComponent(sp.Skeleton),this._gameExplosivesController=i.default.findComponent("GameScene","GameExplosivesController")},t.prototype.move=function(e){var t=this;if(this.node.x<=this._bounds.xMin||this.node.x>=this._bounds.xMax||this.node.y<=this._bounds.yMin||this.node.y>=this._bounds.yMax)this.node.active=!1;else{this._ske.setAnimation(0,"animation",!0);var o=e.mul(this._bounds.height+this._bounds.width),n=[];if(e.x>0){if(o.x>=this._bounds.xMax){var i=cc.v2();cc.Intersection.pLineIntersect(this.node.position,o,cc.v2(this._bounds.xMax,this._bounds.yMin),cc.v2(this._bounds.xMax,this._bounds.yMax),i)&&n.push(i)}}else e.x<0&&o.x<=this._bounds.xMin&&(i=cc.v2(),cc.Intersection.pLineIntersect(this.node.position,o,cc.v2(this._bounds.xMin,this._bounds.yMin),cc.v2(this._bounds.xMin,this._bounds.yMax),i)&&n.push(i));if(e.y>0?o.y>=this._bounds.yMax&&(i=cc.v2(),cc.Intersection.pLineIntersect(this.node.position,o,cc.v2(this._bounds.xMin,this._bounds.yMax),cc.v2(this._bounds.xMax,this._bounds.yMax),i)&&n.push(i)):e.y<0&&o.y<=this._bounds.yMin&&(i=cc.v2(),cc.Intersection.pLineIntersect(this.node.position,o,cc.v2(this._bounds.xMin,this._bounds.yMin),cc.v2(this._bounds.xMax,this._bounds.yMin),i)&&n.push(i)),n.length>0)if(1==n.length)o=n[0];else{for(var r=n[0],a=r.sub(this.node.position).mag(),c=1;c<n.length;c++){var l=n[c].sub(this.node.position).mag();l<a&&(r=n[c],a=l)}o=r}var s=o.sub(this.node.position).mag(),u=cc.sequence(cc.moveTo(s/50,o),cc.callFunc(function(){t.node.active=!1}));this.node.runAction(u)}},t.prototype.onCollisionEnter=function(){this.node.active=!1,this.boom()},t.prototype.boom=function(){var e=this._gameExplosivesController.getInactiveExplosive(9);e.node.position=this.node.position,e.node.active=!0,e.node.scale=.5,e.node.rotation=360*Math.random(),e.boom(),r.GameProxy.emit(r.GameProxy.Event.ShakeScreen,.08,2,2)},__decorate([u],t)}(n.default));o.default=d,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../../../framework/facade/Facade":"Facade","../../config/ExcelTableNames":"ExcelTableNames","../../game/GameProxy":"GameProxy","../../info/World":"World","./Bullet":"Bullet"}],BulletOfSpider:[function(e,t,o){"use strict";cc._RF.push(t,"3c259gWcuxDorUu2dpLcxFV","BulletOfSpider"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletOfEnemy"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ske=null,t}return __extends(t,e),t.prototype.init=function(t){var o=this;e.prototype.init.call(this,t),this.bThrought=!0,this.ske=this.getComponent(sp.Skeleton),this.ske.setCompleteListener(function(){o.node.active=!1})},t.prototype.boom=function(){this.ske.setAnimation(0,"slow",!1)},__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./BulletOfEnemy":"BulletOfEnemy"}],BulletOfXuanFengHuoPao:[function(e,t,o){"use strict";cc._RF.push(t,"e66bcwOmhtNi6ipYqY6Dey8","BulletOfXuanFengHuoPao"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=e("../../../../framework/config/ExcelConfig"),r=e("../../config/ExcelTableNames"),a=e("../../info/World"),c=cc._decorator,l=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.strike=function(){},t.prototype.init=function(e){this.bulletId=e;var t=i.ExcelConfig.getExcelTable(r.ExcelTableNames.Prop)[this.bulletId-1];this.bThrought=1===t.pierce,this.repel=t.repel,this.stiff=t.stiff;var o=i.ExcelConfig.getExcelTable(r.ExcelTableNames.Weapon)[0];this.hurt=Math.floor(o.hurt*a.World.My.armory.hurtMulOf(1))*t.hurt},__decorate([l],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../info/World":"World","./Bullet":"Bullet"}],BulletShanDianQiu:[function(e,t,o){"use strict";cc._RF.push(t,"d6485tJEkdMoIplWDIZNrRd","BulletShanDianQiu"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Bullet"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.strike=function(e){var t=window.GameBulletsController,o=t.getInactiveBulletStrike(this.bulletId);o.node.active=!0,o.node.position=cc.v2(),o.node.rotation=this.node.rotation,o.node.setContentSize(e.node.getContentSize()),o.node.removeFromParent(!1),o.node.setParent(e.node);var n=o.spriteNode;o.node.rotation=360*Math.random(),o.node.runAction(cc.sequence(cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){n.active=!n.active})),6),cc.callFunc(function(){o.node.stopAllActions(),o.node.active=!1,o.node.removeFromParent(!1),o.node.setParent(t.bulletLayer)})))},t.prototype.fly=function(t,o,n){e.prototype.fly.call(this,t,o,n),this.node.scale=.3,this.node.runAction(cc.scaleTo(o/n,o/300))},__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./Bullet":"Bullet"}],BulletStrikeLightning:[function(e,t,o){"use strict";cc._RF.push(t,"ab684CB0vVLEKw8NZ+RRLXB","BulletStrikeLightning"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletStrike"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteNode=null,t}return __extends(t,e),t.prototype.init=function(){},t.prototype.strike=function(){},__decorate([a(cc.Node)],t.prototype,"spriteNode",void 0),__decorate([r],t)}(n.default);o.default=c,cc._RF.pop()},{"./BulletStrike":"BulletStrike"}],BulletStrikeScale:[function(e,t,o){"use strict";cc._RF.push(t,"a91eflkUmlHFK31B+j3oPQW","BulletStrikeScale"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BulletStrike"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){},t.prototype.strike=function(){var e=this;this.node.rotation=360*Math.random(),this.node.scale=0,this.node.runAction(cc.sequence(cc.scaleTo(.2,1),cc.callFunc(function(){e.node.stopAllActions(),e.node.active=!1})))},__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./BulletStrike":"BulletStrike"}],BulletStrike:[function(e,t,o){"use strict";cc._RF.push(t,"b5d9awRm+ZLZrIZ/r0dvhir","BulletStrike"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],Bullet:[function(e,t,o){"use strict";cc._RF.push(t,"be6a0BnFzlAN4b+ds0fdb/L","Bullet"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../framework/config/ExcelConfig"),i=e("../../config/ExcelTableNames"),r=e("../../info/World"),a=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletId=0,t.bThrought=!1,t.hurt=0,t.repel=0,t.stiff=0,t.moveDir=cc.v2(),t._collider=null,t._contacts=[],t}return __extends(t,e),Object.defineProperty(t.prototype,"contacts",{get:function(){return this._contacts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collider",{get:function(){return this._collider},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this._collider=this.getComponent(cc.Collider),this.node.on(cc.Node.EventType.ROTATION_CHANGED,function(){var t=cc.v2(0,1).rotate(cc.misc.degreesToRadians(-e.node.rotation));e.moveDir.x=t.x,e.moveDir.y=t.y})},t.prototype.init=function(e){this.bulletId=e;var t=n.ExcelConfig.getExcelTable(i.ExcelTableNames.Weapon)[this.bulletId%100-1];this.bThrought=1===t.pierce,this.hurt=Math.floor(t.hurt*r.World.My.armory.hurtMulOf(this.bulletId%100)),this.repel=t.repel,this.stiff=t.stiff},t.prototype.fly=function(e,t,o){var n=this;this.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x)),this.node.runAction(cc.sequence(cc.moveBy(t/o,e.mul(t)),cc.callFunc(function(){n.node.active=!1})))},t.prototype.onEnable=function(){window.GameBulletsController.roleBullets.push(this)},t.prototype.onDisable=function(){this.node.stopAllActions(),this._contacts.length=0;var e=window.GameBulletsController;e.roleBullets.splice(e.roleBullets.indexOf(this),1)},t.prototype.getStrikePos=function(e,t){var o=e.world.aabb,n=t.world.aabb,i=cc.v2();return n.xMin>=o.xMin&&n.xMax<=o.xMax?i.x=n.center.x:n.xMax<=o.center.x&&n.xMin<o.xMin?i.x=n.xMax:n.xMin>=o.center.x&&n.xMax>o.xMax?i.x=n.xMin:i.x=o.center.x,n.yMin>=o.yMin&&n.yMax<=o.yMax?i.y=n.center.y:n.yMax<=o.center.y&&n.yMin<o.yMin?i.y=n.yMax:n.yMin>=o.center.y&&n.yMax>o.yMax?i.y=n.yMin:i.y=o.center.y,i},t.prototype.strike=function(e,t){var o=window.GameBulletsController.getInactiveBulletStrike(this.bulletId);o.node.active=!0,o.node.position=this.getStrikePos(e,t),o.node.rotation=this.node.rotation,o.strike()},t.prototype.doRepeal=function(e,t){e.doRepel(this.moveDir,t)},t.prototype.collisionEnemy=function(e,t){this.strike(e,t);var o=e.getComponent("Enemy");this.stiff>0&&o.doStiff(this.stiff),o.doSpeedcut();var n=this.repel-o.unrepel;n>0?this.doRepeal(o,n):o.enemyID<7&&o.playBeatenBack();var i=this.hurt;i>0&&(o.hp-=i)},t.prototype.onCollisionEnter=function(e,t){this.collisionEnemy(e,t),this.bThrought||(this.node.active=!1)},t.prototype.onCollisionStay=function(){},t.prototype.onCollisionExit=function(){},__decorate([a],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../../framework/config/ExcelConfig":"ExcelConfig","../../config/ExcelTableNames":"ExcelTableNames","../../info/World":"World"}],CCCircleAction:[function(e,t){"use strict";cc._RF.push(t,"afdccsULkNP67nQoHfoJT7g","CCCircleAction"),cc.Circle=cc.Class({name:"cc.Circle",extends:cc.ActionInterval,ctor:function(e,t,o,n,i,r){void 0===r&&(r=!1),this._duration=e,this._center=t,this._radius=o,this._startAngle=n,this._endAngle=i,this._dstartAngle=n%(2*Math.PI),this._dendAngle=i%(2*Math.PI),this._runTime=0,this._direction=r,this._direction?this._dendAngle>=this._dstartAngle&&(this._dstartAngle+=2*Math.PI):this._dendAngle<=this._dstartAngle&&(this._dendAngle+=2*Math.PI),cc.Circle.prototype.initWithDuration.call(this,e,t,o,n,i,r)},initWithDuration:function(e){return cc.ActionInterval.prototype.initWithDuration.call(this,e),!0},startWithTarget:function(e){cc.ActionInterval.prototype.startWithTarget.call(this,e)},update:function(e){if(e=this._computeEaseTime(e),this.target){var t=(this._dendAngle-this._dstartAngle)*e+this._dstartAngle,o=this._center.x+this._radius*Math.sin(t),n=this._center.y+this._radius*Math.cos(t);this.target.x=o,this.target.y=n}},reverse:function(){var e=new cc.Circle(this._duration,this._center,this._radius,this._endAngle,this._startAngle,!this._direction);return this._cloneDecoration(e),this._reverseEaseList(e),e},clone:function(){var e=new cc.Circle(this._duration,this._center,this._radius,this._startAngle,this._endAngle,this._direction);return this._cloneDecoration(e),this._reverseEaseList(e),e}}),cc.circle=function(e,t,o,n,i,r){return new cc.Circle(e,t,o,n,i,r)},cc._RF.pop()},{}],CDTimer:[function(e,t,o){"use strict";cc._RF.push(t,"c739atlrTdAc4RH4aaUDag6","CDTimer"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.menu,c=n.disallowMultiple,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.once=!1,t.cd=0,t.pause=!1,t.frameEventHandlers=[],t.zeroEventHandlers=[],t._curTime=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"curTime",{get:function(){return this._curTime},enumerable:!1,configurable:!0}),t.prototype.cdDelta=function(){return this.cd-this.curTime},t.prototype.reset=function(){this._curTime=0},t.prototype.update=function(e){if(!this.pause&&this.cd>0&&this._curTime<this.cd){this._curTime+=e;var t=this._curTime/this.cd;cc.Component.EventHandler.emitEvents(this.frameEventHandlers,t),this._curTime>=this.cd&&(cc.Component.EventHandler.emitEvents(this.zeroEventHandlers,t),this.once?this.destroy():this.reset())}},__decorate([r({displayName:"\u662f\u5426\u4e00\u6b21\u6027",textTips:"\u9009\u662f\u5219\u5728\u5012\u8ba1\u65f6\u7ed3\u675f\u4f1a\u9500\u6bc1\u81ea\u5df1"})],t.prototype,"once",void 0),__decorate([r({displayName:"\u5012\u8ba1\u65f6(\u79d2)"})],t.prototype,"cd",void 0),__decorate([r({displayName:"\u6682\u505c\u5f00\u5173"})],t.prototype,"pause",void 0),__decorate([r({type:cc.Component.EventHandler,displayName:"\u8fdb\u5ea6\u4e8b\u4ef6",textTips:"\u6bcf\u4e00\u5e27\u90fd\u4f1a\u6536\u5230\u8fdb\u5ea6\u4fe1\u606f"})],t.prototype,"frameEventHandlers",void 0),__decorate([r({type:cc.Component.EventHandler,displayName:"\u5f52\u96f6\u4e8b\u4ef6",textTips:"CD\u5f52\u96f6\u65f6\u4f1a\u6536\u5230\u6b64\u6d88\u606f"})],t.prototype,"zeroEventHandlers",void 0),__decorate([i,c,a("\u81ea\u5b9a\u4e49/CDTimer")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],CalSpace:[function(e,t,o){"use strict";cc._RF.push(t,"311cdp+TxpBKIBw3eGfH3XZ","CalSpace"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../framework/extend/SpacePartition"),i=e("../app/entities/enemy/Enemy"),r=e("../quad-tree/LooseQuadTree"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.entityNode=null,t.entityNode2=null,t.enemyLayer=null,t.graphics=null,t.touchNode=null,t._rect=cc.rect(0,0,600,800),t}return __extends(t,e),t.prototype.onTouchMove=function(e){this.touchNode.position=this.touchNode.position.add(e.getDelta()),this.getComponent(r.default).test(cc.rect(this.touchNode.x-this.touchNode.width/2,this.touchNode.y-this.touchNode.height/2,this.touchNode.width,this.touchNode.height))},t.prototype.start=function(){var e=this;this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this._rect.width=this.node.width,this._rect.height=this.node.height,this._rect.origin=cc.v2(-this._rect.width/2,-this._rect.height/2),this.graphics.rect(this._rect.x,this._rect.y,this._rect.width,this._rect.height);var t=(new Date).getTime(),o=1,a=[this._rect],c=this.entityNode.getComponent(i.default).spaceCircleCollider.radius,l=n.default.randomSpaces(a,2*c,2*c,o);console.log("\u751f\u6210\u6570\u91cf:"+l.length+" \u751f\u6210\u65f6\u95f4:"+((new Date).getTime()-t)),console.log(l,"===>"),l.forEach(function(t){var o=cc.instantiate(e.entityNode);o.position=t.center,e.enemyLayer.addChild(o),e.getComponent(r.default).insert(o.getComponent(i.default).enemyAABB)}),this.schedule(function(){if(o<10){var t=(new Date).getTime(),l=n.default.randomSpace(a,2*c,2*c);if(l){var s=cc.instantiate(e.entityNode2);s.position=l.center,e.enemyLayer.addChild(s),e.getComponent(r.default).insert(s.getComponent(i.default).enemyAABB),o++,console.log("\u751f\u6210\u6570\u91cf:"+o+" \u751f\u6210\u65f6\u95f4:"+((new Date).getTime()-t))}}},.11),this.graphics.stroke()},__decorate([l(cc.Node)],t.prototype,"entityNode",void 0),__decorate([l(cc.Node)],t.prototype,"entityNode2",void 0),__decorate([l(cc.Node)],t.prototype,"enemyLayer",void 0),__decorate([l(cc.Graphics)],t.prototype,"graphics",void 0),__decorate([l(cc.Node)],t.prototype,"touchNode",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../framework/extend/SpacePartition":"SpacePartition","../app/entities/enemy/Enemy":"Enemy","../quad-tree/LooseQuadTree":"LooseQuadTree"}],CanvasMediator:[function(e,t,o){"use strict";cc._RF.push(t,"349a5CzWoFFmqjGbjcw5R0A","CanvasMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../facade/Facade"),i=cc._decorator,r=i.ccclass,a=i.property,c=i.menu,l=i.executionOrder,s=i.requireComponent,u=!1,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scenePrefab=null,t}return __extends(t,e),t.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return n.default.canvasNode=this.node,this.scenePrefab&&cc.instantiate(this.scenePrefab).setParent(this.node),u?[3,2]:[4,n.default.executeCommand("StartupCommand")];case 1:e.sent()[0]?console.log("\u7a0b\u5e8f\u542f\u52a8\u6210\u529f..."):console.log("\u7a0b\u5e8f\u542f\u52a8\u5931\u8d25!!!"),u=!0,e.label=2;case 2:return[2]}})})},t.prototype.onDestroy=function(){n.default.canvasNode=null},__decorate([a(cc.Prefab)],t.prototype,"scenePrefab",void 0),__decorate([r,c("\u81ea\u5b9a\u4e49/CanvasMediator"),s(cc.Canvas),l(-10)],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../facade/Facade":"Facade"}],ClickSoundCommand:[function(e,t,o){"use strict";cc._RF.push(t,"73a871wf5hCII8ZLCwWjPZx","ClickSoundCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../config/MusicPaths"),i=e("../../../framework/audio/Music"),r=cc._decorator,a=r.ccclass,c=(r.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return e[0],e[1],i.Music.playSFX(n.MusicPaths.ClickUI),[2]})})},__decorate([a("ClickSoundCommand")],e)}());o.default=c,cc._RF.pop()},{"../../../framework/audio/Music":"Music","../config/MusicPaths":"MusicPaths"}],CloseViewCommand:[function(e,t,o){"use strict";cc._RF.push(t,"b427fLK8OtPeZpFZCOu+9Mi","CloseViewCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Facade"),i=cc._decorator,r=i.ccclass,a=(i.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(t){var o=e[0];"string"==typeof o&&(o=n.default.canvasNode.getChildByName(o)),o&&o.destroy(),t()})]})})},__decorate([r("CloseViewCommand")],e)}());o.default=a,cc._RF.pop()},{"./Facade":"Facade"}],CloseViewInterceptor:[function(e,t,o){"use strict";cc._RF.push(t,"70f4ci32X1CS5X5s4ooQJYZ","CloseViewInterceptor"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/facade/Facade"),i=cc._decorator,r=i.ccclass,a=(i.property,function(){function e(){}return e.prototype.preHandle=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o){return __awaiter(t,void 0,void 0,function(){var t,i;return __generator(this,function(r){switch(r.label){case 0:return"string"!=typeof(t=e[0])&&(t=t.name),"task"!=t?[3,2]:(i="string"==typeof e[0]?n.default.canvasNode.getChildByName(t):e[0],[4,this.moveFocusToDown(i)]);case 1:r.sent(),r.label=2;case 2:return o(!0),[2]}})})})]})})},e.prototype.postHandle=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){var o=t[0];"string"!=typeof o&&(o=o.name),e()})]})})},e.prototype.moveFocusToDown=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,e.runActionAwait(cc.moveBy(.5,0,-cc.view.getVisibleSize().height).easing(cc.easeBackIn()))];case 1:return t.sent(),[2]}})})},__decorate([r],e)}());o.default=a,cc._RF.pop()},{"../../../framework/facade/Facade":"Facade"}],CommandInterceptor:[function(e,t,o){"use strict";cc._RF.push(t,"5db59EtNk5B6rnUA4Q97KNs","CommandInterceptor"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],DialogMediator:[function(e,t,o){"use strict";cc._RF.push(t,"ab009p+inpJkbGNSmjoh5ux","DialogMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../component/View"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.content=null,t.closeButtonNode=null,t.closeButtonSrpite=null,t.layoutOfLeftRight=null,t.leftButtonNode=null,t.leftButtonSprite=null,t.layoutOfLeftButton=null,t.iconNodeOfLeftButton=null,t.iconSpriteOfLeftButton=null,t.textNodeOfLeftButton=null,t.textOfLeftButton=null,t.rightButtonNode=null,t.rightButtonSprite=null,t.layoutOfRightButton=null,t.iconNodeOfRightButton=null,t.iconSpriteOfRightButton=null,t.textNodeOfRightButton=null,t.textOfRightButton=null,t}return __extends(t,e),t.prototype.onClickLeft=function(e,t){n.default.executeClickSoundCommand(e,t),this.node.emit("clickButton","left"),this.node.destroy()},t.prototype.onClickRight=function(e,t){n.default.executeClickSoundCommand(e,t),this.node.emit("clickButton","right"),this.node.destroy()},t.prototype.onClickClose=function(e,t){n.default.executeClickSoundCommand(e,t),this.node.emit("clickButton","close"),this.node.destroy()},t.dialogPrefabName=null,__decorate([a({type:cc.RichText})],t.prototype,"title",void 0),__decorate([a({type:cc.RichText})],t.prototype,"content",void 0),__decorate([a({type:cc.Node})],t.prototype,"closeButtonNode",void 0),__decorate([a({type:cc.Sprite})],t.prototype,"closeButtonSrpite",void 0),__decorate([a({type:cc.Layout})],t.prototype,"layoutOfLeftRight",void 0),__decorate([a({type:cc.Node})],t.prototype,"leftButtonNode",void 0),__decorate([a({type:cc.Sprite})],t.prototype,"leftButtonSprite",void 0),__decorate([a({type:cc.Layout})],t.prototype,"layoutOfLeftButton",void 0),__decorate([a({type:cc.Node})],t.prototype,"iconNodeOfLeftButton",void 0),__decorate([a({type:cc.Sprite})],t.prototype,"iconSpriteOfLeftButton",void 0),__decorate([a({type:cc.Node})],t.prototype,"textNodeOfLeftButton",void 0),__decorate([a({type:cc.RichText})],t.prototype,"textOfLeftButton",void 0),__decorate([a({type:cc.Node})],t.prototype,"rightButtonNode",void 0),__decorate([a({type:cc.Sprite})],t.prototype,"rightButtonSprite",void 0),__decorate([a({type:cc.Layout})],t.prototype,"layoutOfRightButton",void 0),__decorate([a({type:cc.Node})],t.prototype,"iconNodeOfRightButton",void 0),__decorate([a({type:cc.Sprite})],t.prototype,"iconSpriteOfRightButton",void 0),__decorate([a({type:cc.Node})],t.prototype,"textNodeOfRightButton",void 0),__decorate([a({type:cc.RichText})],t.prototype,"textOfRightButton",void 0),__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../component/View":"View"}],DialogVO:[function(e,t,o){"use strict";cc._RF.push(t,"1dd20ilzSlM9LWWZ+mi3S4D","DialogVO"),Object.defineProperty(o,"__esModule",{value:!0}),o.DialogVO=void 0;var n=function(){function e(){this.title={string:"\u63d0\u793a"},this.content={string:"\u60a8\u8fd8\u6ca1\u6709\u8bbe\u7f6e\u5185\u5bb9"},this.closeButtonNode=null,this.closeButtonSrpite=null,this.layoutOfLeftRight=null,this.leftButtonNode={active:!1},this.leftButtonSprite=null,this.layoutOfLeftButton=null,this.iconNodeOfLeftButton={active:!1},this.iconSpriteOfLeftButton=null,this.textNodeOfLeftButton=null,this.textOfLeftButton={string:"Cancel"},this.rightButtonNode=null,this.rightButtonSprite=null,this.layoutOfRightButton=null,this.iconNodeOfRightButton={active:!1},this.iconSpriteOfRightButton=null,this.textNodeOfRightButton=null,this.textOfRightButton={string:"OK"}}return e.colorString=function(e){return"<color=#7c4800>"+e+"</c>"},e}();o.DialogVO=n,cc._RF.pop()},{}],DragonBoneMediator:[function(e,t,o){"use strict";cc._RF.push(t,"9a7acgYw3ZIX7xQplxXQaEU","DragonBoneMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=cc._decorator,r=i.ccclass,a=i.property,c=i.menu,l=i.requireComponent;(function(e){e[e.START=0]="START",e[e.LOOP_COMPLETE=1]="LOOP_COMPLETE",e[e.COMPLETE=2]="COMPLETE",e[e.FADE_IN=3]="FADE_IN",e[e.FADE_IN_COMPLETE=4]="FADE_IN_COMPLETE",e[e.FADE_OUT=5]="FADE_OUT",e[e.FADE_OUT_COMPLETE=6]="FADE_OUT_COMPLETE",e[e.FRAME_EVENT=7]="FRAME_EVENT",e[e.SOUND_EVENT=8]="SOUND_EVENT"})(n||(n={}));var s=new Map;s.set(n.START,dragonBones.EventObject.START),s.set(n.LOOP_COMPLETE,dragonBones.EventObject.LOOP_COMPLETE),s.set(n.COMPLETE,dragonBones.EventObject.COMPLETE),s.set(n.FADE_IN,dragonBones.EventObject.FADE_IN),s.set(n.FADE_IN_COMPLETE,dragonBones.EventObject.FADE_IN_COMPLETE),s.set(n.FADE_OUT,dragonBones.EventObject.FADE_OUT),s.set(n.FADE_OUT_COMPLETE,dragonBones.EventObject.FADE_OUT_COMPLETE),s.set(n.FRAME_EVENT,dragonBones.EventObject.FRAME_EVENT),s.set(n.SOUND_EVENT,dragonBones.EventObject.SOUND_EVENT);var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.armatureDisplay=null,t.animationState=null,t.armatureName="Armature",t.eventType=n.COMPLETE,t.eventHandlers=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay)},t.prototype._playAnim=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=1),this.armatureDisplay.timeScale=o,this.armatureDisplay.armatureName=this.armatureName,this.animationState=this.armatureDisplay.playAnimation(e,t),console.log("playAnim===>name="+this.animationState.name+" playTimes="+t+" timeScale="+o)},t.prototype.playAnim=function(e,t){this._playAnim(e,0,t)},t.prototype.playAnimOnce=function(e,t){this._playAnim(e,1,t)},t.prototype.isAnim=function(e){return null!=this.animationState&&this.animationState.name===e},t.prototype.replaceSlotDisplay=function(e,t){"number"==typeof t&&(this.armatureDisplay.armature().getSlot(e).displayIndex=t)},t.prototype.getBoneWorldPosition=function(e){var t=this.armatureDisplay.armature().getBone(e);return this.node.convertToWorldSpaceAR(cc.v2(t.global.x,-t.global.y))},t.prototype.initDragonBone=function(e,t,o){if(!e||!t)throw Error("dragonAsset="+e+" dragonAtlasAsset="+t);this.node.removeComponent(dragonBones.ArmatureDisplay);var n=this.node.addComponent(dragonBones.ArmatureDisplay);n.dragonAsset=e,n.dragonAtlasAsset=t,n.armatureName=o||this.armatureName,this.animationState=null,this.armatureDisplay=n},t.prototype.handleEvent=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return cc.Component.EventHandler.emitEvents(this.eventHandlers,e),[2]})})},t.prototype.onLoad=function(){this.armatureDisplay.addEventListener(s.get(this.eventType),this.handleEvent,this)},t.prototype.onDestroy=function(){this.armatureDisplay.removeEventListener(s.get(this.eventType),this.handleEvent,this)},__decorate([a],t.prototype,"armatureName",void 0),__decorate([a({type:cc.Enum(n)})],t.prototype,"eventType",void 0),__decorate([a({type:cc.Component.EventHandler,displayName:"\u89e6\u53d1\u4e8b\u4ef6"})],t.prototype,"eventHandlers",void 0),__decorate([r,c("\u81ea\u5b9a\u4e49/DragonBoneMediator"),l(dragonBones.ArmatureDisplay)],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],EarningsLayerController:[function(e,t,o){"use strict";cc._RF.push(t,"e78aaJwDKBPIZdjvZdl4ywW","EarningsLayerController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../info/World"),c=e("../../../framework/extend/Extend"),l=e("../../../framework/config/ExcelConfig"),s=e("../config/ExcelTableNames"),u=e("../../../framework/facade/Facade"),d=cc._decorator,p=d.ccclass,f=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldLvLabel=null,t.dayEarnLvLabel=null,t.goldCostLabel=null,t.dayEarnCostLabel=null,t.goldWorthLabel=null,t.dayEarnWorthLabel=null,t.goldLvButton=null,t.dayEarnButton=null,t}return i(t,e),t.prototype.onLoad=function(){this.updateGoldUp(),this.updateDayEarnUp(),cc.find("Canvas").on("UpdateStorage",this.onUpdateStorageEvent,this)},t.prototype.onDestroy=function(){cc.find("Canvas").off("UpdateStorage",this.onUpdateStorageEvent,this)},t.prototype.onUpdateStorageEvent=function(e){if("goldCount"==e){var t=l.ExcelConfig.getExcelTable(s.ExcelTableNames.GoldUp);if(a.World.Storage.goldLv<t.length){var o=t[a.World.Storage.goldLv-1].gvalue_expend;this.goldLvButton.interactable=a.World.Storage.goldCount>=o,this.goldCostLabel.node.color=this.goldLvButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338")}a.World.Storage.dayEarnLv<t.length&&(o=t[a.World.Storage.dayEarnLv-1].on_hook_expend,this.dayEarnButton.interactable=a.World.Storage.goldCount>=o,this.dayEarnCostLabel.node.color=this.dayEarnButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338"))}},t.prototype.updateGoldUp=function(){var e=l.ExcelConfig.getExcelTable(s.ExcelTableNames.GoldUp);if(this.goldLvLabel.string="<b><outline color=#1e1e1e width=4>Gold Value Lv."+a.World.Storage.goldLv+"</outline></b>",a.World.Storage.goldLv>=e.length)this.goldCostLabel.string="<b><outline color=#1e1e1e width=3>Full Lv</outline></b>",this.goldLvButton.interactable=!1;else{var t=e[a.World.Storage.goldLv-1].gvalue_expend;this.goldCostLabel.string="<b><outline color=#1e1e1e width=3>"+c.ext.shortFormat(t)+"</outline></b>",this.goldLvButton.interactable=a.World.Storage.goldCount>=t}this.goldCostLabel.node.color=this.goldLvButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338"),this.goldWorthLabel.string="<b><outline color=#1e1e1e width=3>"+Math.floor(100*e[a.World.Storage.goldLv-1].gvalue)+"%</outline></b>"},t.prototype.updateDayEarnUp=function(){var e=l.ExcelConfig.getExcelTable(s.ExcelTableNames.GoldUp);if(this.dayEarnLvLabel.string="<b><outline color=#1e1e1e width=4>Regular Earnings Lv."+a.World.Storage.dayEarnLv+"</outline></b>",a.World.Storage.dayEarnLv>=e.length)this.dayEarnCostLabel.string="<b><outline color=#1e1e1e width=3>Full Lv</outline></b>",this.dayEarnButton.interactable=!1;else{var t=e[a.World.Storage.dayEarnLv-1].on_hook_expend;this.dayEarnCostLabel.string="<b><outline color=#1e1e1e width=3>"+c.ext.shortFormat(t)+"</outline></b>",this.dayEarnButton.interactable=a.World.Storage.goldCount>=t}this.dayEarnCostLabel.node.color=this.dayEarnButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338"),this.dayEarnWorthLabel.string="<b><outline color=#1e1e1e width=3>"+c.ext.shortFormat(e[a.World.Storage.dayEarnLv-1].on_hook)+"</outline></b>"},t.prototype.onClickUpGoldLv=function(){var e=l.ExcelConfig.getExcelTable(s.ExcelTableNames.GoldUp)[a.World.Storage.goldLv-1].gvalue_expend;a.World.Storage.goldCount-=e,a.World.Storage.goldLv++,this.updateGoldUp(),u.default.canvasNode.emit("GoldWorthUp")},t.prototype.onClickUpDayEarnLv=function(){var e=l.ExcelConfig.getExcelTable(s.ExcelTableNames.GoldUp)[a.World.Storage.dayEarnLv-1].on_hook_expend;a.World.Storage.dayEarnLv++,a.World.Storage.goldCount-=e,this.updateDayEarnUp(),u.default.canvasNode.emit("GoldDayEarnUp")},r([f(cc.RichText)],t.prototype,"goldLvLabel",void 0),r([f(cc.RichText)],t.prototype,"dayEarnLvLabel",void 0),r([f(cc.RichText)],t.prototype,"goldCostLabel",void 0),r([f(cc.RichText)],t.prototype,"dayEarnCostLabel",void 0),r([f(cc.RichText)],t.prototype,"goldWorthLabel",void 0),r([f(cc.RichText)],t.prototype,"dayEarnWorthLabel",void 0),r([f(cc.Button)],t.prototype,"goldLvButton",void 0),r([f(cc.Button)],t.prototype,"dayEarnButton",void 0),r([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../../../framework/facade/Facade":"Facade","../config/ExcelTableNames":"ExcelTableNames","../info/World":"World"}],EllipseBy:[function(e,t,o){"use strict";cc._RF.push(t,"5e636l3EM1LZYhD7W7Tk3eC","EllipseBy"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._center=cc.v2(),t._a=0,t._b=0,t}var o;return __extends(t,e),o=t,t.create=function(e,t,n,i){var r=new o;return r.initWithDuration(e,t,n,i),r},t.prototype.initWithDuration=function(e,t,o,n){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._center=t,this._a=o,this._b=n,!0},t.prototype.update=function(e){var t=-this._a*Math.cos(2*Math.PI*e)+this._a,o=this._b*Math.sin(2*Math.PI*e);this.getTarget().setPosition(this._center.add(cc.v2(t-this._a,o)))},o=__decorate([i],t)}(cc.ActionInterval));o.default=r,cc._RF.pop()},{}],EmitBulletEnemy:[function(e,t,o){"use strict";cc._RF.push(t,"5d8e2MjyvlLOoCyuh6N0alo","EmitBulletEnemy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../framework/audio/Music"),i=e("./Enemy"),r=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doAttack=function(){n.Music.playSFX("sound/msc_en001");var e=window.GameBulletsController.getInactiveEnemyBullet(this._enemyID);e.node.active=!0,e.node.position=this.node.position,e.node.rotation=this.node.rotation;var t=cc.v2(0,1).rotate(cc.misc.degreesToRadians(-e.node.rotation)).normalizeSelf();e.node.runAction(cc.sequence(cc.moveBy(this.attackDistance/this.bulletSpeed,t.mul(this.attackDistance)),cc.callFunc(function(){e.node.active=!1})))},__decorate([r],t)}(i.default);o.default=a,cc._RF.pop()},{"../../../../framework/audio/Music":"Music","./Enemy":"Enemy"}],EnemyAABB:[function(e,t,o){"use strict";cc._RF.push(t,"2fd84qgTxlNla8RAGPr2aOb","EnemyAABB"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../quad-tree/AABBRegion"),i=e("./Enemy"),r=cc._decorator,a=r.ccclass,c=r.disallowMultiple,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radius=0,t._enemy=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"enemy",{get:function(){return this._enemy},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._radius=this.getComponent(cc.CircleCollider).radius,this._enemy=this.getComponent(i.default)},t.prototype.aabb=function(){var e=2*this._radius;return cc.rect(this.node.x-this._radius,this.node.y-this._radius,e,e)},__decorate([a,c],t)}(n.default);o.default=l,cc._RF.pop()},{"../../../quad-tree/AABBRegion":"AABBRegion","./Enemy":"Enemy"}],Enemy:[function(e,t,o){"use strict";cc._RF.push(t,"1ab695SfTxHj46gL5xG1BMg","Enemy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EnemyAABB"),i=e("../../config/ExcelTableNames"),r=e("../../../../framework/config/ExcelConfig"),a=e("../../game/GameProxy"),c=e("../../../../framework/audio/Music"),l=e("../../../../framework/extend/Extend"),s=cc._decorator,u=s.ccclass,d=s.property,p=[.4,.4,0,.2,.3,.3,.3,.5],f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ske=null,t.attackCD=1,t._gameSlow=!1,t._moveSpeed=0,t._speedAdd=1,t._bAcc=!1,t.accSpeed=0,t.foundRange=0,t.attackDistance=100,t.bulletSpeed=0,t.unrepel=0,t.maxHp=0,t.humorScale=1,t.gold=0,t.goldIconFell=1,t.speedcut=0,t.moveFlag=!1,t.lookAtRoleFlag=!1,t.attackCoolingFlag=!1,t.logicFlag=!1,t.moveDir=cc.v2(),t._stiff=!1,t._hp=0,t.hurt=0,t.hierarchy=0,t.agility=0,t._strikeCompleteTime=0,t._spaceCircleCollider=null,t._defenceBoxCollider=null,t._enemyAABB=null,t._bounds=cc.rect(),t._enemyID=0,t.attackDelayTime=-1,t}return __extends(t,e),Object.defineProperty(t.prototype,"gameSlow",{set:function(e){this._gameSlow=e;var t=1.5;this._gameSlow&&(t*=.2),this.ske.timeScale=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speedAdd",{get:function(){return this._speedAdd},set:function(e){this._speedAdd=e,this.ske.timeScale=1.5*e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bAcc",{set:function(e){this._bAcc=e,this._bAcc&&this.enemyID>3&&c.Music.playSFX("sound/msc_en003",.6)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moveSpeed",{get:function(){return this._moveSpeed*(this._bAcc?this.accSpeed:1)*this._speedAdd*(this._gameSlow?.2:1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stiff",{get:function(){return this._stiff},set:function(e){this._stiff=e,this.playStand()},enumerable:!1,configurable:!0}),t.prototype.doStiff=function(e){var t=this;this.stiff=!0;var o=cc.sequence(cc.delayTime(e),cc.callFunc(function(){return t.stiff=!1}));o.setTag(1230),this.node.stopActionByTag(1230),this.node.runAction(o)},t.prototype.doSpeedcut=function(){var e=this;if(this.speedcut>0){this.speedAdd=1-this.speedcut;var t=cc.sequence(cc.delayTime(.15),cc.callFunc(function(){return e.speedAdd=1}));t.setTag(2510),this.node.stopActionByTag(2510),this.node.runAction(t)}},t.prototype.doRepel=function(e,t){var o=this;this.playBeaten();var n=e.mul(t),i=this.node.position.add(n),r=[];if(e.x>0){if(i.x>=this._bounds.xMax){var a=cc.v2();cc.Intersection.pLineIntersect(this.node.position,i,cc.v2(this._bounds.xMax,this._bounds.yMin),cc.v2(this._bounds.xMax,this._bounds.yMax),a)&&r.push(a)}}else e.x<0&&i.x<=this._bounds.xMin&&(a=cc.v2(),cc.Intersection.pLineIntersect(this.node.position,i,cc.v2(this._bounds.xMin,this._bounds.yMin),cc.v2(this._bounds.xMin,this._bounds.yMax),a)&&r.push(a));if(e.y>0?i.y>=this._bounds.yMax&&(a=cc.v2(),cc.Intersection.pLineIntersect(this.node.position,i,cc.v2(this._bounds.xMin,this._bounds.yMax),cc.v2(this._bounds.xMax,this._bounds.yMax),a)&&r.push(a)):e.y<0&&i.y<=this._bounds.yMin&&(a=cc.v2(),cc.Intersection.pLineIntersect(this.node.position,i,cc.v2(this._bounds.xMin,this._bounds.yMin),cc.v2(this._bounds.xMax,this._bounds.yMin),a)&&r.push(a)),r.length>0)if(1==r.length)i=r[0].addSelf(e.neg(cc.v2()));else{for(var c=r[0],l=c.sub(this.node.position).mag(),s=1;s<r.length;s++){var u=r[s].sub(this.node.position).mag();u<l&&(c=r[s],l=u)}i=c.addSelf(e.neg(cc.v2()))}var d=i.sub(this.node.position).mag(),p=cc.sequence(cc.moveTo(d/800,i).easing(cc.easeCircleActionOut()),cc.callFunc(function(){o.playBeatenBack()}));p.setTag(582),this.node.stopActionByTag(582),this.node.runAction(p)},Object.defineProperty(t.prototype,"hp",{get:function(){return this._hp},set:function(e){var t=this;if(!(this._hp<=0)){var o=this._hp-e;window.GameLabelsController.fly("-"+l.ext.shortFormat(o),this.node.position.add(cc.v2(0,this.spaceCircleCollider.radius))),this.ske.node.color=this.ske.node.color.fromHEX("#D85959"),this.ske.node.runAction(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){return t.ske.node.color=cc.Color.WHITE}))),this._hp=e,e<=0&&(a.GameProxy.killCount++,a.GameProxy.emit(a.GameProxy.Event.KillEnemy,this),this.node.stopAllActions(),this._stiff=!0,this.playDead())}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strikeCompleteTime",{get:function(){return this._strikeCompleteTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spaceCircleCollider",{get:function(){return this._spaceCircleCollider},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defenceBoxCollider",{get:function(){return this._defenceBoxCollider},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enemyAABB",{get:function(){return this._enemyAABB},enumerable:!1,configurable:!0}),t.prototype.reset=function(){var e=this;this._hp=this.maxHp,this.stiff=!1,this.speedAdd=1,this.gameSlow=a.GameProxy.slowGame,this._bAcc=!1,a.GameProxy.maxEnemyNum-a.GameProxy.enemyList.length>=a.GameProxy.levelConfig.amount_p1+1&&(this.bAcc=!0),this.ske.timeScale=1.5,this.moveFlag=!1,this.lookAtRoleFlag=!1,this.attackCoolingFlag=!1,this.logicFlag=!1,this.node.on(cc.Node.EventType.ROTATION_CHANGED,function(){e.moveDir=cc.v2(0,1).normalize().rotate(cc.misc.degreesToRadians(-e.node.rotation))});var t=window.GameRoleController.role.node.position.sub(this.node.position);this.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),this.playStand()},t.prototype.onEnable=function(){this.reset()},t.prototype.onDisable=function(){this.node.stopAllActions()},t.prototype.start=function(){var e=this.node.getParent().getParent();this._bounds.x=-e.width/2+this.spaceCircleCollider.radius,this._bounds.y=-e.height/2+this.spaceCircleCollider.radius,this._bounds.width=e.width-2*this.spaceCircleCollider.radius,this._bounds.height=e.height-2*this.spaceCircleCollider.radius},t.prototype.onLoad=function(){var e=this;this._spaceCircleCollider=this.getComponent(cc.CircleCollider),this._defenceBoxCollider=this.getComponent(cc.BoxCollider),this._enemyAABB=this.getComponent(n.default),this.ske.setMix("strike","stand",.1),this.ske.setMix("walk","strike",.1),this.ske.setCompleteListener(function(t){var o=t.animation?t.animation.name:"";"strike"==o?(e.playStand(),e._strikeCompleteTime=(new Date).getTime(),e.attackCoolingFlag=!0,e.node.runAction(cc.sequence(cc.delayTime(e.attackCD),cc.callFunc(function(){e.attackCoolingFlag=!1})))):"beaten"==o?e.playStand():"dead"==o?(e.showBlood(),e.node.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){e.node.active=!1})))):"stand"==o&&e.playWalk()})},t.prototype.showBlood=function(){var e=window.GameEnemysController.getInactiveEnemyBloodNode();e.active=!0,e.position=this.node.position,e.rotation=360*Math.random(),e.scale=this.humorScale,e.opacity=255,e.runAction(cc.sequence(cc.delayTime(1),cc.fadeTo(.5,60),cc.callFunc(function(){e.active=!1})))},t.prototype.isInAttackRange=function(){var e=window.GameRoleController.role.node.position.sub(this.node.position),t=e.mag();if(t<this.attackDistance+window.GameRoleController.role.spaceCircleCollider.radius){var o=Math.atan(window.GameRoleController.role.spaceCircleCollider.radius/t);if(e.angle(cc.v2(0,1).rotate(cc.misc.degreesToRadians(-this.node.rotation)))<o)return!0}return!1},t.prototype.doAttack=function(){this.isInAttackRange()&&(c.Music.playSFX("sound/msc_en003"),window.GameRoleController.hp-=this.hurt)},Object.defineProperty(t.prototype,"enemyID",{get:function(){return this._enemyID},enumerable:!1,configurable:!0}),t.prototype.init=function(e){this._enemyID=e;var t=r.ExcelConfig.getExcelTable(i.ExcelTableNames.Enemy)[e-1];this.unrepel=t.unrepel,this._moveSpeed=t.move,this.accSpeed=t.acc_s,this.foundRange=t.found_rg,this.agility=t.agility,this.attackDistance=t.range,this.attackCD=t.fre,this.bulletSpeed=t.speed,this.maxHp=this._hp=Math.floor(t.health*a.GameProxy.enemyHpMulOf(this._enemyID)),this.hurt=Math.floor(t.hurt*a.GameProxy.enemyHurtMulOf(t.id)),this.hierarchy=t.hierarchy,this.humorScale=t.humor,this.gold=Math.floor(t.gold_pro*a.GameProxy.enemyGoldMulOf(this._enemyID)),this.goldIconFell=t.gold_fell,this.speedcut=t.speedcut,this.node.zIndex=this.hierarchy,this.attackDelayTime=p[e-1],e>p.length&&console.error("_enemyID > AttackDelayList.length")},t.prototype.setAnimation=function(e,t,o){this.ske.setAnimation(e,t,o),this.moveFlag="walk"==t,this.lookAtRoleFlag="strike"!=t},t.prototype.stopAttack=function(){this.node.stopActionByTag(1199)},t.prototype.playStand=function(){this.setAnimation(0,"stand",!0)},t.prototype.playAttack=function(){var e=this;if(this.attackDelayTime>=0){var t=cc.speed(cc.sequence(cc.delayTime(this.attackDelayTime),cc.callFunc(function(){a.GameProxy.pauseGame||e.doAttack()})),1);t.setTag(1199),this.node.runAction(t)}this.setAnimation(0,"strike",!1)},t.prototype.playWalk=function(){this.setAnimation(0,"walk",!0)},t.prototype.playDead=function(){this.stopAttack(),this.ske.timeScale=1.5,this.setAnimation(0,"dead",!1)},t.prototype.playBeaten=function(){this.stopAttack(),this.setAnimation(0,"beaten2",!1)},t.prototype.playBeatenBack=function(){this.setAnimation(0,"beaten",!1)},t.prototype.isAttacking=function(){return"strike"==this.ske.animation},t.prototype.isBeating=function(){return"beaten2"==this.ske.animation||"beaten"==this.ske.animation},t.prototype.isWalking=function(){return"walk"==this.ske.animation},t.prototype.isStanding=function(){return"stand"==this.ske.animation},t.prototype.isDead=function(){return this._hp<=0},t.prototype.turnTo=function(e){var t=(90-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x)))%360;t<0&&(t+=360);var o=this.node.rotation%360;o<0&&(o+=360);var n=Math.abs(t-o),i=this._moveSpeed*this.agility*(this._bAcc?.5:1)*this._speedAdd*(this._gameSlow?.2:1);if(n>0){var r=0;n>180?(r=Math.sign(o-t)*i,Math.abs(r)>360-n&&(r=Math.sign(r)*(360-n))):(r=Math.sign(t-o)*i,Math.abs(r)>n&&(r=Math.sign(r)*n)),o+=r}this.node.rotation=o},t.prototype.move=function(){var e=this.moveSpeed;if(e<=0)return!1;var t=this.node.position.add(this.moveDir.mul(e));if(t.x>this._bounds.xMax||t.x<this._bounds.xMin||t.y>this._bounds.yMax||t.y<this._bounds.yMin)return!1;if(!this._bAcc&&this.foundRange>0){var o=t.sub(window.GameRoleController.role.node.position).mag();this.bAcc=o-e<this.foundRange}return this.node.position=t,!0},t.prototype.update=function(){a.GameProxy.pauseGame||this.stiff||(this.logicFlag&&((this.isWalking()||this.isStanding())&&this.isInAttackRange()&&this.playAttack(),this.lookAtRoleFlag&&this.turnTo(window.GameRoleController.role.node.position.sub(this.node.position).normalize())),this.moveFlag&&this.move())},__decorate([d(sp.Skeleton)],t.prototype,"ske",void 0),__decorate([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../framework/audio/Music":"Music","../../../../framework/config/ExcelConfig":"ExcelConfig","../../../../framework/extend/Extend":"Extend","../../config/ExcelTableNames":"ExcelTableNames","../../game/GameProxy":"GameProxy","./EnemyAABB":"EnemyAABB"}],ExcelConfig:[function(e,t,o){"use strict";function n(e){var t=e,o=t.splice(0,1),n=[];for(var i in o[0])n[i]=o[0][i];var r=[];for(var i in t){var a=t[i];for(var c in r[i]={},a){var l,s=n[c];l=a[c],r[i][s]=l}}return r}cc._RF.push(t,"0859agupcZJ8aoG/BCnvbwF","ExcelConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.ExcelConfig=void 0;var i=new Map,r=function(){function e(){}return e.loadAllExcel=function(e,t){return __awaiter(this,void 0,void 0,function(){var o,r,a,c,l;return __generator(this,function(s){switch(s.label){case 0:return[4,cc.loader.loadResDirAwait(e,t)];case 1:for(o=s.sent(),r=o[0],a=o[1],c=0;c<r.length;c++)l=r[c],void 0!==r[c].json&&(l=r[c].json),i.set(a[c],n(l));return[2]}})})},e.loadExcel=function(e){return __awaiter(this,void 0,void 0,function(){var t,o,r;return __generator(this,function(a){switch(a.label){case 0:return[4,cc.loader.loadResAwait(e)];case 1:return t=a.sent(),o=t,void 0!==t.json&&(o=t.json),r=n(o),i.set(e,r),[2]}})})},e.getExcelTable=function(e){return i.get(e)},e.getExcelLine=function(e,t,o){var n=this.getExcelTable(e);for(var i in n)if(n[i][t]==o)return n[i];return null},e}();o.ExcelConfig=r,cc._RF.pop()},{}],ExcelTableNames:[function(e,t,o){"use strict";cc._RF.push(t,"0dad0SXeYlGkpEmyAnB7fj4","ExcelTableNames"),Object.defineProperty(o,"__esModule",{value:!0}),o.ExcelTableNames=void 0,function(e){e.Level="data/level_full",e.Enemy="data/enemy_full",e.Weapon="data/weapon_full",e.StartEnemy="data/startem_full",e.Prop="data/prop_full",e.WeaponUp="data/weapon_up_full",e.BulletUp="data/bullet_up_full",e.EnemyUp="data/enemy_up_full",e.GoldUp="data/gold_up_full"}(o.ExcelTableNames||(o.ExcelTableNames={})),cc._RF.pop()},{}],ExchangeController:[function(e,t,o){"use strict";cc._RF.push(t,"095cbB1T3BGjYPbnwd2ta5g","ExchangeController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../info/World"),i=e("../../../framework/extend/Extend"),r=e("../../../framework/config/ExcelConfig"),a=e("../config/ExcelTableNames"),c=cc._decorator,l=c.ccclass,s=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.exchangeButton=null,t.diamondLabel=null,t.exchangeLabel=null,t.exchangeSprite=null,t.exchangeSpriteFrames=[],t._diamondCount=0,t._type=1,t}return __extends(t,e),Object.defineProperty(t.prototype,"diamondCount",{get:function(){return this._diamondCount},set:function(e){this._diamondCount=e,1==this._type?this.exchangeLabel.string=i.ext.shortFormat(this.getGoldCount()):this.exchangeLabel.string=""+this.getPowerCount(),this.updateView()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{set:function(e){this._type=e,this.exchangeSprite.spriteFrame=this.exchangeSpriteFrames[this._type-1],this.diamondCount=n.World.Storage.diamondCount},enumerable:!1,configurable:!0}),t.prototype.getGoldCount=function(){return r.ExcelConfig.getExcelTable(a.ExcelTableNames.GoldUp)[n.World.Storage.goldLv-1].diamond_ex*this._diamondCount},t.prototype.getPowerCount=function(){return 5*this._diamondCount},t.prototype.updateView=function(){this.exchangeButton.interactable=this._diamondCount>0,this.diamondLabel.string=""+this._diamondCount},t.prototype.onDiamondPlus=function(){this._diamondCount<n.World.Storage.diamondCount&&this.diamondCount++},t.prototype.onDiamondMinus=function(){this._diamondCount>0&&this.diamondCount--},t.prototype.onExchange=function(){1==this._type?n.World.Storage.goldCount+=this.getGoldCount():n.World.Storage.power+=this.getPowerCount(),this.node.destroy()},__decorate([s(cc.Button)],t.prototype,"exchangeButton",void 0),__decorate([s(cc.Label)],t.prototype,"diamondLabel",void 0),__decorate([s(cc.Label)],t.prototype,"exchangeLabel",void 0),__decorate([s(cc.Sprite)],t.prototype,"exchangeSprite",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"exchangeSpriteFrames",void 0),__decorate([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../config/ExcelTableNames":"ExcelTableNames","../info/World":"World"}],ExplosiveHuoJianTong:[function(e,t,o){"use strict";cc._RF.push(t,"2707dq5zzBBO4ixkxdjzf4B","ExplosiveHuoJianTong"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Explosive"),i=e("../../game/GameProxy"),r=cc._decorator,a=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._huojiantongSke=null,t}return __extends(t,e),t.prototype.init=function(t){var o=this;e.prototype.init.call(this,t),this.bThrought=!0,this._huojiantongSke=this.node.getComponent(sp.Skeleton),this._huojiantongSke.setCompleteListener(function(){o.node.active=!1})},t.prototype.boom=function(){this._huojiantongSke.setAnimation(0,"biubiu_009b",!1),i.GameProxy.emit(i.GameProxy.Event.ShakeScreen,.08,2,2)},t.prototype.doRepeal=function(e,t){e.doRepel(e.node.position.sub(this.node.position).normalize(),t)},__decorate([a],t)}(n.default));o.default=c,cc._RF.pop()},{"../../game/GameProxy":"GameProxy","./Explosive":"Explosive"}],Explosive:[function(e,t,o){"use strict";cc._RF.push(t,"289e79F1UZP3ZKZdsJwQRLh","Explosive"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../bullet/Bullet"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"../bullet/Bullet":"Bullet"}],Extend:[function(e,t,o){"use strict";cc._RF.push(t,"c0c94cgM4FB+Lw7/1tJ4iEf","Extend"),Object.defineProperty(o,"__esModule",{value:!0}),o.ext=void 0;var n=e("../actions/Actions"),i=!1;window.innerWidth>window.innerHeight&&(i=!0);var r=!1;window.innerWidth,window.innerHeight,r=window.innerWidth/window.innerHeight==1125/2436,function(e){e.shuffle=function(e){for(var t,o,n=e.length,i=n;i--;)i!==(o=Math.floor(Math.random()*n))&&(t=e[i],e[i]=e[o],e[o]=t);return e},e.randomElement=function(e){return 0==e.length?null:e[Math.floor(Math.random()*e.length)]},e.createObj=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];var i=cc.js.getClassByName(e);if(void 0===i)cc.error(e+" not define @ccclass("+e+")");else if("function"==typeof i)return(t=i.prototype.constructor).apply.apply(t,__spreadArrays([i],o)),i.prototype;return null},e.everyNode=function e(t,o){o(t),t.children.forEach(function(t){return e(t,o)})},e.isLandscape=i,e.isIphoneX=r,e.wxCreateImageToSprite=function(e,t){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(o){var n=e.node,i={width:n.width,height:n.height},r=wx.createImage();r.onload=function(){if(e&&e.node&&e.node.isValid){var t=new cc.Texture2D;t.initWithElement(r),t.handleLoadedTexture(),e.spriteFrame=new cc.SpriteFrame(t),n.width=i.width,n.height=i.height,o()}},r.src=t})]})})},e.randomInteger=function(e,t){var o=t-e;return Math.floor(e+Math.random()*o*100%(o+1))},e.showRichText=function(e){e.node.children.forEach(function(e){return e.active=!0})},e.concurrentExecute=function(e){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(n){switch(n.label){case 0:t=0,o=e,n.label=1;case 1:return t<o.length?[4,o[t]]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e.isSameDay=function(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()},e.shortFormat=function(e){return e>=1e12?Math.floor(e/1e12*10)/10+"T":e>=1e9?Math.floor(e/1e9*10)/10+"B":e>=1e6?Math.floor(e/1e6*10)/10+"M":e>=1e3?Math.floor(e/1e3*10)/10+"K":Math.floor(e).toString()},e.moveSkeleton=function(e,t,o,i,r,a,c){var l=o-t,s=l/r;e.findBone(a).y=c,e.node.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(function(){var t=0,o=n.default.update(function(o){var n=o*s;Math.abs(t+n)>=Math.abs(l)?(e.findBone(a).y+=l-t,e.node.stopActionByTag(10020)):e.findBone(a).y+=n,t+=n});o.setTag(10020),e.node.runAction(o)})))}}(o.ext||(o.ext={})),cc._RF.pop()},{"../actions/Actions":"Actions"}],Facade:[function(e,t,o){"use strict";cc._RF.push(t,"c56ebL9UHxNDoXapY+zXo32","Facade"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../extend/Extend"),i=e("../actions/Actions"),r=e("../interceptor/Interceptor"),a=function(){function e(){}return e.findComponent=function(e,t,o){o=o||this.canvasNode;var n=cc.find(e,o);if(n)return n.getComponent(t)},e.executeCommand=function(t){for(var o=this,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return new Promise(function(a,c){return __awaiter(o,void 0,void 0,function(){var o,l,s,u,d,p,f,h,m,g,y,_;return __generator(this,function(v){switch(v.label){case 0:if("string"!=typeof t)return[3,5];for(u in o=t.split(","),f=[],l=function(e){var t,l,s,u,d,p,h,m;return __generator(this,function(g){switch(g.label){case 0:if(t=o[e].trim(),!((l=r.Interceptor.interceptorsOf(t)).length>0))return[3,4];s=!0,h=l.slice(0),u=function(){var e;return __generator(this,function(o){switch(o.label){case 0:return[4,(e=h.shift()).preHandle.apply(e,i).catch(function(o){var n;n="string"==typeof o?Error(o):o instanceof Error?o:Error("commandName="+t+" "+e.constructor.name+".preHandle()"),c(n)})];case 1:return s=o.sent()&&s,h=h.filter(function(e){return r.Interceptor.interceptorsOf(t).some(function(t){return t==e})}),[2]}})},g.label=1;case 1:return h.length>0?[5,u()]:[3,3];case 2:return g.sent(),[3,1];case 3:if(!s)return[2,{value:void 0}];g.label=4;case 4:return(d=n.ext.createObj(t))?[4,d.execute.apply(d,i).catch(function(e){var o;o="string"==typeof e?Error(e):e instanceof Error?e:Error("command.execute()===>commandName="+t),c(o)})]:(c(Error("createObj("+t+")===>"+t+" not found")),[2,{value:void 0}]);case 5:if(p=g.sent(),f.push(p),!((l=r.Interceptor.interceptorsOf(t)).length>0))return[3,8];h=l.slice(0),m=function(){var e;return __generator(this,function(o){switch(o.label){case 0:return[4,(e=h.shift()).postHandle.apply(e,__spreadArrays([p],i)).catch(function(o){var n;n="string"==typeof o?Error(o):o instanceof Error?o:Error("commandName="+t+" "+e.constructor.name+".postHandle"),c(n)})];case 1:return o.sent(),h=h.filter(function(e){return r.Interceptor.interceptorsOf(t).some(function(t){return t==e})}),[2]}})},g.label=6;case 6:return h.length>0?[5,m()]:[3,8];case 7:return g.sent(),[3,6];case 8:return a(f),[2]}})},s=[],o)s.push(u);d=0,v.label=1;case 1:return d<s.length?(y=s[d],[5,l(y)]):[3,4];case 2:if("object"==typeof(p=v.sent()))return[2,p.value];v.label=3;case 3:return d++,[3,1];case 4:return[3,11];case 5:if(!(t instanceof Array))return[3,10];for(m in f=[],h=[],t)h.push(m);g=0,v.label=6;case 6:return g<h.length?(y=h[g],[4,e.executeCommand.apply(e,__spreadArrays([t[y]],i)).catch(function(e){return c(e)})]):[3,9];case 7:_=v.sent(),f.push(_),v.label=8;case 8:return g++,[3,6];case 9:return a(f),[3,11];case 10:c(Error("executeCommand typeof(name)===>"+typeof t)),v.label=11;case 11:return[2]}})})})},e.releasePrefab=function(e,t){var o=[];t&&("string"==typeof t?o.push(t):o=t),o.indexOf(e)>=0?console.log("release fail,this prefab in retainPrefab or excludes===>"+e):cc.loader.getDependsRecursively(e).filter(function(e){for(var t in o){var n=o[t];if(cc.loader.getDependsRecursively(n).indexOf(e)>=0)return!1}return!0}).forEach(function(e){cc.loader.release(e),console.log(e,"release====>")})},e.initSeparationLayer=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(o){switch(o.label){case 0:return t=this,[4,cc.loader.loadResAwait(e,cc.Prefab)];case 1:return t._separationPrefab=o.sent(),[2]}})})},e.addSeparationLayer=function(e,t,o){if(void 0===e&&(e=null),void 0===t&&(t=115),void 0===o&&(o=0),null!=this._separationPrefab){var n=cc.instantiate(this._separationPrefab);return n.setParent(this.canvasNode),n.position=cc.v2(0,0),"number"==typeof t&&(n.opacity=t),n.zIndex=o,e&&(n.groupIndex=e),n}console.error("please call Facade.initSeparationLayer before call Facade.addSeparationLayer")},e.initTextTips=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(o){switch(o.label){case 0:return t=this,[4,cc.loader.loadResAwait(e,cc.Prefab)];case 1:return t._textTipsPrefab=o.sent(),[2]}})})},e.textTips=function(t,o,r){return __awaiter(this,void 0,void 0,function(){var a,c;return __generator(this,function(l){switch(l.label){case 0:return null==this._separationPrefab?(console.error("please call Facade.initTextTips before call Facade.textTips"),[2]):((a=cc.instantiate(this._textTipsPrefab)).setParent(e.canvasNode),a.zIndex=cc.macro.MAX_ZINDEX,a.position=o||cc.v2(0,0),c=a.getComponent(cc.RichText),r&&(c.fontSize=r),c.string=t,n.ext.showRichText(c),[4,a.runActionAwait(i.default.flutterAction())]);case 1:return l.sent(),a.destroy(),[2]}})})},e.canvasNode=null,e._separationPrefab=null,e._textTipsPrefab=null,e}();o.default=a,cc._RF.pop()},{"../actions/Actions":"Actions","../extend/Extend":"Extend","../interceptor/Interceptor":"Interceptor"}],FirstAidController:[function(e,t,o){"use strict";cc._RF.push(t,"4257bH2VnpGgpQA0t4A+GQi","FirstAidController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],Formula:[function(e,t,o){"use strict";cc._RF.push(t,"62f6aU/jHhCg7Y1stBnDERq","Formula"),Object.defineProperty(o,"__esModule",{value:!0}),o.Formula=void 0,function(e){var t=function(){function e(){}return e.goldCost=function(e,t,o){return e>t?o+(e-t):o},e.dayGet=function(e){return Math.floor(1.8*e)},e.upgradeCost=function(e){return 120*e},e}();e.Gold=t}(o.Formula||(o.Formula={})),cc._RF.pop()},{}],GameBulletsController:[function(e,t,o){"use strict";cc._RF.push(t,"f9d40q9ABdCG5owk3OPy0zK","GameBulletsController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../entities/bulletStrike/BulletStrike"),i=e("../entities/bullet/Bullet"),r=e("./GameProxy"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletLayer=null,t.bulletStrikeLayer=null,t.enemyBulletLayer=null,t._bulletMap=new Map,t._bulletStrikeMap=new Map,t._enemyBulletMap=new Map,t._propBulletMap=new Map,t.roleBullets=[],t.enemyBullets=[],t}return __extends(t,e),t.prototype.genBullet=function(e){var t="prefab/entities/bullet/bullet"+e,o=cc.loader.getRes(t,cc.Prefab),n=cc.instantiate(o);this.bulletLayer.addChild(n);var r=n.getComponent(i.default);r.init(e);var a=this._bulletMap.get(e);return void 0===a&&(a=[],this._bulletMap.set(e,a)),a.push(r),n.active=!1,r},t.prototype.getInactiveBullet=function(e){var t=void 0,o=this._bulletMap.get(e);return void 0!==o&&(t=o.find(function(e){return 0==e.node.active})),void 0===t&&(t=this.genBullet(e)),t},t.prototype.genBulletStrike=function(e){var t="prefab/entities/bullet/bullet"+e+"Strike",o=cc.loader.getRes(t,cc.Prefab),i=cc.instantiate(o);this.bulletStrikeLayer.addChild(i);var r=i.getComponent(n.default);r.init(e);var a=this._bulletStrikeMap.get(e);return void 0===a&&(a=[],this._bulletStrikeMap.set(e,a)),a.push(r),i.active=!1,r},t.prototype.getInactiveBulletStrike=function(e){var t=void 0,o=this._bulletStrikeMap.get(e);return void 0!==o&&(t=o.find(function(e){return 0==e.node.active})),void 0===t&&(t=this.genBulletStrike(e)),t},t.prototype.genEnemyBullet=function(e){var t="prefab/entities/bullet/enemyBullet"+e,o=cc.loader.getRes(t,cc.Prefab),n=cc.instantiate(o);this.enemyBulletLayer.addChild(n);var r=n.getComponent(i.default);r.init(e);var a=this._enemyBulletMap.get(e);return void 0===a&&(a=[],this._enemyBulletMap.set(e,a)),a.push(r),n.active=!1,r},t.prototype.getInactiveEnemyBullet=function(e){var t=void 0,o=this._enemyBulletMap.get(e);return void 0!==o&&(t=o.find(function(e){return 0==e.node.active})),void 0===t&&(t=this.genEnemyBullet(e)),t},t.prototype.genPropBullet=function(e){var t="prefab/entities/bullet/propBullet"+e,o=cc.loader.getRes(t,cc.Prefab),n=cc.instantiate(o);this.bulletLayer.addChild(n);var r=n.getComponent(i.default);r.init(e);var a=this._propBulletMap.get(e);return void 0===a&&(a=[],this._propBulletMap.set(e,a)),a.push(r),n.active=!1,r},t.prototype.getInactivePropBullet=function(e){var t=void 0,o=this._propBulletMap.get(e);return void 0!==o&&(t=o.find(function(e){return 0==e.node.active})),void 0===t&&(t=this.genPropBullet(e)),t},t.prototype.onLoad=function(){this.node.on(r.GameProxy.Event.PropTrigger,this.onPropTrigger,this),window.GameBulletsController=this},t.prototype.onDestroy=function(){this.node.off(r.GameProxy.Event.PropTrigger,this.onPropTrigger,this)},t.prototype.onPropTrigger=function(e){var t=this;switch(e.propID){case 1:for(var o=2/(d=20),n=360/d,i=cc.v2(e.node.x,e.node.y),r=function(e){a.node.runAction(cc.sequence(cc.delayTime(e*o),cc.callFunc(function(){var o=t.getInactivePropBullet(1);o.node.active=!0,o.node.rotation=e*n;var r=cc.v2(0,1).rotateSelf(cc.misc.degreesToRadians(-o.node.rotation)).normalizeSelf();o.node.position=i.add(r.mul(60)),o.node.runAction(cc.sequence(cc.moveBy(.5,r.mul(500)).easing(cc.easeSineOut()),cc.callFunc(function(){o.node.active=!1})));var a=t.getInactivePropBullet(1);a.node.active=!0,a.node.rotation=e*n+180;var c=cc.v2(0,1).rotateSelf(cc.misc.degreesToRadians(-a.node.rotation)).normalizeSelf();a.node.position=i.add(c.mul(60)),a.node.runAction(cc.sequence(cc.moveBy(.5,c.mul(500)).easing(cc.easeSineOut()),cc.callFunc(function(){a.node.active=!1})))})))},a=this,c=0;c<d;c++)r(c);break;case 2:var l=cc.v2(e.node.x,e.node.y),s=function(e){u.node.runAction(cc.sequence(cc.delayTime(.05*e),cc.callFunc(function(){var o=t.getInactivePropBullet(2);o.node.active=!0;var n=30+60*e;o.node.rotation=n-90;var i=cc.v2(0,1).rotateSelf(cc.misc.degreesToRadians(-n)).normalizeSelf();o.node.position=l,o.node.scale=0,o.node.runAction(cc.scaleTo(.1,1)),o.node.runAction(cc.sequence(cc.moveBy(.1,i.mul(100)),cc.delayTime(.05*(6-e-1)),cc.callFunc(function(){o.move(i)})))})))},u=this;for(c=0;c<6;c++)s(c);break;case 3:var d=6,p=(o=.05,.08),f=cc.v2(e.node.x,e.node.y),h=function(e){m.node.runAction(cc.sequence(cc.delayTime(e*o),cc.callFunc(function(){var o=t.getInactivePropBullet(3);o.node.active=!0;var n=30+60*e;o.node.rotation=n-90;var i=cc.v2(0,1).rotateSelf(cc.misc.degreesToRadians(-n)).normalizeSelf();o.node.position=f,o.node.scale=0,o.node.runAction(cc.scaleTo(p,1)),o.collider.enabled=!1,o.node.runAction(cc.sequence(cc.moveBy(p,i.mul(80)),cc.callFunc(function(){o.collider.enabled=!0,o.node.runAction(cc.sequence(cc.delayTime(20),cc.callFunc(function(){o.node.active=!1})))})))})))},m=this;for(c=0;c<d;c++)h(c);var g=function(e){y.node.runAction(cc.sequence(cc.delayTime((e+d)*o),cc.callFunc(function(){var o=t.getInactivePropBullet(3);o.node.active=!0;var n=60+60*e;o.node.rotation=n-90;var i=cc.v2(0,1).rotateSelf(cc.misc.degreesToRadians(-n)).normalizeSelf();o.node.position=f,o.node.scale=0,o.node.runAction(cc.scaleTo(p,1)),o.collider.enabled=!1,o.node.runAction(cc.sequence(cc.moveBy(p,i.mul(140)),cc.callFunc(function(){o.collider.enabled=!0,o.node.runAction(cc.sequence(cc.delayTime(20),cc.callFunc(function(){o.node.active=!1})))})))})))},y=this;for(c=0;c<d;c++)g(c);break;case 4:(v=this.getInactivePropBullet(4)).node.position=e.node.position,v.node.active=!0,v.execute();break;case 6:var _=window.GameEnemysController.allAliveAndInScreenEnemy();if(_.length>0){var v,b=-1,E=null;_.forEach(function(t){var o=e.node.position.sub(t.node.position).mag();(b<0||o<b)&&(b=o,E=t)}),(v=this.getInactivePropBullet(6)).node.position=e.node.position,v.joint(E.node.position)}}},__decorate([l(cc.Node)],t.prototype,"bulletLayer",void 0),__decorate([l(cc.Node)],t.prototype,"bulletStrikeLayer",void 0),__decorate([l(cc.Node)],t.prototype,"enemyBulletLayer",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../entities/bullet/Bullet":"Bullet","../entities/bulletStrike/BulletStrike":"BulletStrike","./GameProxy":"GameProxy"}],GameCollisionController:[function(e,t,o){"use strict";cc._RF.push(t,"ade4a+D8vBFtrWGh6gZ6Ugw","GameCollisionController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../quad-tree/LooseQuadTree"),i=e("./GameProxy"),r=cc._decorator,a=r.ccclass,c=r.property,l=cc.math,s=cc.v2();function u(e,t,o,n,i,r){var a=e.x,c=e.y,l=e.width,s=e.height,u=t.m0,d=t.m1,p=t.m4,f=t.m5,h=u*a+p*c+t.m12,m=d*a+f*c+t.m13,g=u*l,y=d*l,_=p*s,v=f*s;n.x=h,n.y=m,i.x=g+h,i.y=y+m,o.x=_+h,o.y=v+m,r.x=g+_+h,r.y=y+v+m}var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enemyBulletLayer=null,t.looseQuadTree=null,t._updateColliders=[],t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){window.GameCollisionController=this},t.updateCollider=function(e){var t=e.offset,o=e.world,n=o.aabb,i=o.matrix;e.node.getLocalMatrix(i);var r=o.preAabb;if(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height,e instanceof cc.BoxCollider){var a=e.size;n.x=t.x-a.width/2,n.y=t.y-a.height/2,n.width=a.width,n.height=a.height;var c=o.points,d=c[0],p=c[1],f=c[2],h=c[3];u(n,i,d,p,f,h);var m=Math.min(d.x,p.x,f.x,h.x),g=Math.min(d.y,p.y,f.y,h.y),y=Math.max(d.x,p.x,f.x,h.x),_=Math.max(d.y,p.y,f.y,h.y);n.x=m,n.y=g,n.width=y-m,n.height=_-g}else if(e instanceof cc.CircleCollider){l.Vec2.transformMat4(s,e.offset,i),o.position.x=s.x,o.position.y=s.y;var v=i.m12,b=i.m13;i.m12=i.m13=0,s.x=e.radius,s.y=0,l.Vec2.transformMat4(s,s,i);var E=Math.sqrt(s.x*s.x+s.y*s.y);o.radius=E,n.x=o.position.x-E,n.y=o.position.y-E,n.width=2*E,n.height=2*E,i.m12=v,i.m13=b}else if(e instanceof cc.PolygonCollider){var C=e.points,w=o.points;w.length=C.length,m=1e6,g=1e6,y=-1e6,_=-1e6;for(var x=0,T=C.length;x<T;x++){w[x]||(w[x]=cc.v2()),s.x=C[x].x+t.x,s.y=C[x].y+t.y,l.Vec2.transformMat4(s,s,i);var S=s.x,P=s.y;w[x].x=S,w[x].y=P,S>y&&(y=S),S<m&&(m=S),P>_&&(_=P),P<g&&(g=P)}n.x=m,n.y=g,n.width=y-m,n.height=_-g}},t.prototype.update=function(){if(!i.GameProxy.pauseGame){this.looseQuadTree.updateAll(),this._updateColliders.forEach(function(e){return e.bUpdateCollider=!1}),this._updateColliders.length=0;for(var e=window.GameBulletsController,t=0,n=e.roleBullets;t<n.length;t++){var r=n[t];if(r.collider.enabled){o.updateCollider(r.collider);var a=[];this.looseQuadTree.retrieve(r.collider.world.aabb,a);for(var c=0,l=a;c<l.length;c++){var s=l[c],u=s.enemy;if(s.bUpdateCollider||(o.updateCollider(u.spaceCircleCollider),o.updateCollider(u.defenceBoxCollider),s.bUpdateCollider=!0,this._updateColliders.push(s)),r.collider instanceof cc.CircleCollider?cc.Intersection.polygonCircle(u.defenceBoxCollider.world.points,r.collider.world):cc.Intersection.polygonPolygon(u.defenceBoxCollider.world.points,r.collider.world.points)){if(r.contacts.includes(u))r.onCollisionStay(u.defenceBoxCollider,r.collider);else if(r.contacts.push(u),r.onCollisionEnter(u.defenceBoxCollider,r.collider),!r.bThrought)break}else{var d=r.contacts.indexOf(u);d>=0&&(r.contacts.splice(d,1),r.onCollisionExit(u.defenceBoxCollider,r.collider))}}}}var p=window.GameRoleController;e.enemyBullets.forEach(function(e){if(e.node.position.sub(p.role.node.position).mag()<Math.max(e.node.width,e.node.height)+p.role.spaceCircleCollider.radius)if(o.updateCollider(e.collider),o.updateCollider(p.role.spaceCircleCollider),e.collider instanceof cc.CircleCollider?cc.Intersection.circleCircle(e.collider.world,p.role.spaceCircleCollider.world):cc.Intersection.polygonCircle(e.collider.world.points,p.role.spaceCircleCollider.world))e.contacts.includes(p.role)?e.onCollisionStay(p.role.spaceCircleCollider,e.collider):(e.contacts.push(p.role),e.onCollisionEnter(p.role.spaceCircleCollider,e.collider));else{var t=e.contacts.indexOf(p.role);t>=0&&(e.contacts.splice(t,1),e.onCollisionExit(p.role.spaceCircleCollider,e.collider))}}),window.GameEnemysController.gameProps.forEach(function(e){if(!e.on_off){var t=e.node.position.sub(p.role.node.position).mag();i.GameProxy.magnetic&&!e.magnetic&&t<100&&(e.magnetic=!0),t<Math.max(e.node.width,e.node.height)+p.role.spaceCircleCollider.radius&&(o.updateCollider(e.collider),o.updateCollider(p.role.spaceCircleCollider),(e.collider instanceof cc.CircleCollider?cc.Intersection.circleCircle(e.collider.world,p.role.spaceCircleCollider.world):cc.Intersection.polygonCircle(e.collider.world.points,p.role.spaceCircleCollider.world))&&e.trigger())}})}},__decorate([c(cc.Node)],t.prototype,"enemyBulletLayer",void 0),__decorate([c(n.default)],t.prototype,"looseQuadTree",void 0),o=__decorate([a],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../quad-tree/LooseQuadTree":"LooseQuadTree","./GameProxy":"GameProxy"}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"a2a30D950ZPwLVWttC/Wqyp","GameController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameProxy"),i=e("../../../framework/extend/Extend"),r=e("../info/World"),a=e("../../../framework/extend/Shake"),c=e("../../../framework/config/ExcelConfig"),l=e("../config/ExcelTableNames"),s=e("../../../framework/audio/Music"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moreEnemyTipsAnimation=null,t.bossTipsAnimation=null,t.supplyGuideNode=null,t.shakeNode=null,t.topNode=null,t.leftNode=null,t.rightNode=null,t.supplyNode=null,t.greyNode=null,t.blockNode=null,t.reliveNode=null,t.gameOverNode=null,t._generating=!1,t._shakeDuration=0,t._genEnemyCount=0,t._propList=[1,2,3,4,5,6,9,11,12,13],t._gunsList=[],t._displayPropList=[],t._displayGusList=[],t._preDisplayGun=!1,t}return __extends(t,e),t.prototype.onClickSupply=function(){this.supplyNode.active=!0;var e=cc.director.getScene().getChildByName("newbieNode");e&&(e.destroy(),r.World.My.newbies.finish("KillFiveEnemy"))},t.prototype.playEntry=function(){var e=this,t=[];this.topNode.active=!0,this.topNode.y=cc.view.getVisibleSize().height/2+300;var o=this.topNode.y-cc.view.getVisibleSize().height/2;i.ext.isIphoneX&&(o+=66),t.push(this.topNode.runActionAwait(cc.moveBy(o/700,cc.v2(0,-o)))),this.leftNode.active=!0,this.leftNode.x=-cc.view.getVisibleSize().width/2-200,t.push(this.leftNode.runActionAwait(cc.moveTo(Math.abs(-cc.view.getVisibleSize().width/2-this.leftNode.x)/700,cc.v2(-cc.view.getVisibleSize().width/2,this.leftNode.y)))),this.rightNode.active=!0,this.rightNode.x=cc.view.getVisibleSize().width/2+200,t.push(this.rightNode.runActionAwait(cc.moveTo(Math.abs(cc.view.getVisibleSize().width/2-this.rightNode.x)/700,cc.v2(cc.view.getVisibleSize().width/2,this.rightNode.y)))),Promise.all(t).then(function(){n.GameProxy.emit(n.GameProxy.Event.StartGame),e.blockNode.active=!1})},t.prototype.onLoad=function(){this.supplyNode.active=!1,this.greyNode.active=!0,this.greyNode.opacity=0,this.reliveNode.active=!1,this.gameOverNode.active=!1,this.topNode.active=!1,this.leftNode.active=!1,this.rightNode.active=!1,this.blockNode.active=!0,this.node.on(n.GameProxy.Event.StartGenEnemy,this.startGenerating,this),this.node.on(n.GameProxy.Event.StopGenEnemy,this.stopGenerating,this),this.node.on(n.GameProxy.Event.KillEnemy,this.onKillEnemy,this),this.node.on(n.GameProxy.Event.KillRole,this.onKillRole,this),this.node.on(n.GameProxy.Event.SlowGame,this.onSlowGame,this),this.node.on(n.GameProxy.Event.PauseGame,this.onPauseGame,this),this.node.on(n.GameProxy.Event.ShakeScreen,this.onShakeScreen,this),n.GameProxy.GameScene=this.node,this.playEntry()},t.prototype.start=function(){n.GameProxy.level=r.World.Storage.gameLevel,n.GameProxy.slowGame=!1,n.GameProxy.pauseGame=!1,this._preDisplayGun=100*Math.random()>50,n.GameProxy.emit(n.GameProxy.Event.InitGame),this._propList=c.ExcelConfig.getExcelTable(l.ExcelTableNames.Prop).filter(function(e){return 7!=e.id&&8!=e.id&&10!=e.id&&(0==e.unlock||r.World.My.propInfo.beUsing(e.id))}).map(function(e){return e.id}),this._gunsList=c.ExcelConfig.getExcelTable(l.ExcelTableNames.Weapon).filter(function(e){return 1!=e.id&&e.unlock<=r.World.Storage.gameLevel}).map(function(e){return e.id})},t.prototype.onDestroy=function(){this.node.off(n.GameProxy.Event.StartGenEnemy,this.startGenerating,this),this.node.off(n.GameProxy.Event.StopGenEnemy,this.stopGenerating,this),this.node.off(n.GameProxy.Event.KillEnemy,this.onKillEnemy,this),this.node.off(n.GameProxy.Event.KillRole,this.onKillRole,this),this.node.off(n.GameProxy.Event.SlowGame,this.onSlowGame,this),this.node.off(n.GameProxy.Event.PauseGame,this.onPauseGame,this),this.node.off(n.GameProxy.Event.ShakeScreen,this.onShakeScreen,this)},t.prototype.onShakeScreen=function(e,t,o){this._shakeDuration<=e&&(this._shakeDuration=e,this.shakeNode.stopAllActions(),this.shakeNode.position=cc.v2(),this.shakeNode.runAction(a.Shake.create(e,t,o)))},t.prototype.onSlowGame=function(e){window.GameEnemysController.allActiveEnemy().forEach(function(t){return t.gameSlow=e})},t.prototype.onPauseGame=function(){this.updateGrey()},t.prototype.updateGrey=function(e){void 0===e&&(e=190),console.log("updateGrey==>",n.GameProxy.pauseGame),this.greyNode.stopAllActions(),n.GameProxy.pauseGame||n.GameProxy.slowGame?this.greyNode.runAction(cc.fadeTo(.3,e)):this.greyNode.opacity=0},t.prototype.startGenerating=function(){var e,t=this;this._generating||(this._generating=!0,n.GameProxy.killCount<n.GameProxy.levelConfig.amount_p1?((e=cc.sequence(cc.repeat(cc.sequence(cc.callFunc(function(){return t._genEnemyCount+=1}),cc.delayTime(.5)),n.GameProxy.levelConfig.delimit_p1),cc.callFunc(function(){t._generating=!1,t.startCDTask()}))).setTag(1010),this.node.runAction(e)):((e=cc.sequence(cc.repeat(cc.sequence(cc.callFunc(function(){return t._genEnemyCount+=1}),cc.delayTime(.5)),Math.floor(n.GameProxy.levelConfig.delimit_p1)),cc.callFunc(function(){t._generating=!1,t.startCDTask()}))).setTag(1010),this.node.runAction(e)))},t.prototype.stopGenerating=function(){this._generating&&this.node.stopActionByTag(1010)},t.prototype.startCDTask=function(){var e=this;this.stopCDTask();var t=cc.sequence(cc.delayTime(10),cc.callFunc(function(){e._genEnemyCount+=2,e.startCDTask()}));t.setTag(1041),this.node.runAction(t)},t.prototype.stopCDTask=function(){this.node.stopActionByTag(1041)},t.prototype.onKillRole=function(){n.GameProxy.isOver=!0,n.GameProxy.pauseGame=!0,n.GameProxy.firstAidFlag,this.reliveNode.active=!0,s.Music.playSFX("sound/msc_rol002"),console.log("game over==>\u7b49\u5f85\u590d\u6d3b")},t.prototype.displayGun=function(e){var t=this,o=window.GameEnemysController.getInactiveGun(),n=this._gunsList.filter(function(e){return!t._displayGusList.includes(e)});0==n.length&&(n=this._gunsList,this._displayGusList=[]);var r=i.ext.randomElement(n);this._displayGusList.push(r),o.init(r+100),o.node.position=e,o.display()},t.prototype.displayProp=function(e){var t=this,o=this._propList.filter(function(e){return!t._displayPropList.includes(e)});0==o.length&&(o=this._propList,this._displayPropList=[]);var n=i.ext.randomElement(o);this._displayPropList.push(n);var r=window.GameEnemysController.getInactiveProp(n);r.node.position=e,r.display()},t.prototype.onKillEnemy=function(e){if(n.GameProxy.killCount%10==0){var t=e.node.position;this._preDisplayGun?this.displayProp(t):this.displayGun(t),this._preDisplayGun=!this._preDisplayGun}if(n.GameProxy.killCount==n.GameProxy.levelConfig.amount_p1-3&&this.displayGun(e.node.position),n.GameProxy.killCount+window.GameEnemysController.allAliveEnemy().length<n.GameProxy.levelConfig.amount_p1?(this._genEnemyCount+=2,this.startCDTask()):n.GameProxy.enemyList.length>0?(this._genEnemyCount+=3,this.startCDTask()):n.GameProxy.killCount>=n.GameProxy.maxEnemyNum&&(n.GameProxy.isOver=!0,n.GameProxy.pauseGame=!0,console.log("game win."),this.blockNode.active=!0),5==n.GameProxy.killCount&&!r.World.My.newbies.state("KillFiveEnemy")){var o=new cc.Node;o.name="newbieNode",o.position=this.supplyGuideNode.convertToWorldSpaceAR(cc.v2()),cc.director.getScene().addChild(o);var i=cc.loader.getRes("prefab/guideCircle"),a=cc.instantiate(i);a.position=cc.v2(),o.addChild(a);var c=cc.loader.getRes("prefab/guideSke"),l=cc.instantiate(c);l.position=cc.v2(),o.addChild(l),n.GameProxy.pauseGame=!0,this.greyNode.stopAllActions(),this.greyNode.opacity=0}},t.prototype.genEnemy=function(){if(!(n.GameProxy.enemyList.length<=0)){var e=window.GameEnemysController.allAliveEnemy().length;if(n.GameProxy.killCount+e<=n.GameProxy.levelConfig.amount_p1){if(e>=n.GameProxy.levelConfig.limit_p1)return}else if(e>=n.GameProxy.levelConfig.limit_p2)return;window.GameEnemysController.createEnemy(n.GameProxy.enemyList.shift()),this._genEnemyCount--,n.GameProxy.maxEnemyNum-n.GameProxy.enemyList.length===n.GameProxy.levelConfig.amount_p1+1&&(this.moreEnemyTipsAnimation.node.opacity=255,this.moreEnemyTipsAnimation.node.active=!0,this.moreEnemyTipsAnimation.play()),n.GameProxy.enemyList.length==n.GameProxy.secondBossNum-1&&(this.bossTipsAnimation.node.opacity=255,this.bossTipsAnimation.node.active=!0,this.bossTipsAnimation.play())}},t.prototype.update=function(){this._genEnemyCount>0&&this.genEnemy()},__decorate([p(cc.Animation)],t.prototype,"moreEnemyTipsAnimation",void 0),__decorate([p(cc.Animation)],t.prototype,"bossTipsAnimation",void 0),__decorate([p(cc.Node)],t.prototype,"supplyGuideNode",void 0),__decorate([p(cc.Node)],t.prototype,"shakeNode",void 0),__decorate([p(cc.Node)],t.prototype,"topNode",void 0),__decorate([p(cc.Node)],t.prototype,"leftNode",void 0),__decorate([p(cc.Node)],t.prototype,"rightNode",void 0),__decorate([p(cc.Node)],t.prototype,"supplyNode",void 0),__decorate([p(cc.Node)],t.prototype,"greyNode",void 0),__decorate([p(cc.Node)],t.prototype,"blockNode",void 0),__decorate([p(cc.Node)],t.prototype,"reliveNode",void 0),__decorate([p(cc.Node)],t.prototype,"gameOverNode",void 0),__decorate([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../framework/audio/Music":"Music","../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../../../framework/extend/Shake":"Shake","../config/ExcelTableNames":"ExcelTableNames","../info/World":"World","./GameProxy":"GameProxy"}],GameEnemysController:[function(e,t,o){"use strict";cc._RF.push(t,"6254chnxYNAb5mM5HqrGwAR","GameEnemysController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../entities/enemy/Enemy"),i=e("../../../framework/extend/SpacePartition"),r=e("./GameProxy"),a=e("../entities/prop/PropBase"),c=cc._decorator,l=c.ccclass,s=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propLayer=null,t.enemyLayer=null,t.enemyBloodLayer=null,t.bgNode=null,t._enemyCount=0,t.enemyLogicList=[],t._enmeyMap=new Map,t._enmeyBloodArray=[],t._propMap=new Map,t._gunsArr=[],t.gameProps=[],t._screenRect=cc.rect(0,0,cc.visibleRect.width,cc.visibleRect.height),t}return __extends(t,e),Object.defineProperty(t.prototype,"enemyCount",{get:function(){return this._enemyCount},set:function(e){this._enemyCount=e},enumerable:!1,configurable:!0}),t.prototype.genEnemy=function(e){var t="prefab/entities/enemy/enemy"+e,o=cc.loader.getRes(t,cc.Prefab),i=cc.instantiate(o);i.active=!1,this.enemyLayer.addChild(i);var r=i.getComponent(n.default);r.init(e);var a=this._enmeyMap.get(e);return void 0===a&&(a=[],this._enmeyMap.set(e,a)),a.push(r),r},t.prototype.getInactiveEnemy=function(e){var t=void 0,o=this._enmeyMap.get(e);return void 0!==o&&(t=o.find(function(e){return 0==e.node.active})),void 0===t&&(t=this.genEnemy(e)),t},t.prototype.genEnemyBloodNode=function(){var e=cc.loader.getRes("prefab/entities/blood/blood",cc.Prefab),t=cc.instantiate(e);return t.active=!1,this.enemyBloodLayer.addChild(t),this._enmeyBloodArray.push(t),t},t.prototype.getInactiveEnemyBloodNode=function(){var e=this._enmeyBloodArray.find(function(e){return 0==e.active});return void 0===e&&(e=this.genEnemyBloodNode()),e},t.prototype.genProp=function(e){var t="prefab/entities/prop/prop"+e,o=cc.loader.getRes(t,cc.Prefab),n=cc.instantiate(o);n.active=!1,this.propLayer.addChild(n);var i=n.getComponent(a.default);i.init(e);var r=this._propMap.get(e);return void 0===r&&(r=[],this._propMap.set(e,r)),r.push(i),i},t.prototype.getInactiveProp=function(e){var t=void 0,o=this._propMap.get(e);return void 0!==o&&(t=o.find(function(e){return 0==e.node.active})),void 0===t&&(t=this.genProp(e)),t},t.prototype.getInactiveGun=function(){var e=this._gunsArr.find(function(e){return 0==e.node.active});if(void 0===e){var t=cc.loader.getRes("prefab/entities/prop/guns",cc.Prefab),o=cc.instantiate(t);this.propLayer.addChild(o),o.active=!1,e=o.getComponent(a.default),this._gunsArr.push(e)}return e},t.prototype.onLoad=function(){this.node.on(r.GameProxy.Event.KillEnemy,this.onKillEnemy,this),window.GameEnemysController=this},t.prototype.onDestroy=function(){this.node.off(r.GameProxy.Event.KillEnemy,this.onKillEnemy,this)},t.prototype.allAliveAndInScreenEnemy=function(){var e=[];this._screenRect.x=-this.bgNode.x-cc.visibleRect.center.x,this._screenRect.y=-this.bgNode.y-cc.visibleRect.center.y;for(var t=0,o=this.enemyLayer.children;t<o.length;t++){var i=o[t].getComponent(n.default);!i.node.active||i.hp<=0||i.node.x+i.spaceCircleCollider.radius<=this._screenRect.xMin||i.node.x-i.spaceCircleCollider.radius>this._screenRect.xMax||i.node.y+i.spaceCircleCollider.radius<this._screenRect.yMin||i.node.y-i.spaceCircleCollider.radius>this._screenRect.yMax||e.push(i)}return e},t.prototype.allAliveEnemy=function(){return this.enemyLayer.children.filter(function(e){return e.active&&e.getComponent(n.default).hp>0}).map(function(e){return e.getComponent(n.default)})},t.prototype.allActiveEnemy=function(){return this.enemyLayer.children.filter(function(e){return e.active}).map(function(e){return e.getComponent(n.default)})},t.prototype.createEnemy=function(e){this.enemyCount++;var t=Math.max(-this.bgNode.x-cc.visibleRect.center.x,-this.bgNode.width/2),o=Math.max(-this.bgNode.y-cc.visibleRect.center.y,-this.bgNode.height/2),n=Math.min(cc.visibleRect.width,this.bgNode.width/2-t),r=Math.min(cc.visibleRect.height,this.bgNode.height/2-o),a=cc.rect(t,o,n,r),c=Math.max(t-200,-this.bgNode.width/2),l=Math.max(o-200,-this.bgNode.height/2),s=Math.min(cc.visibleRect.width+400,this.bgNode.width/2-c),u=Math.min(cc.visibleRect.height+400,this.bgNode.height/2-l),d=[cc.rect(c,l,s,u)];i.default.partitionRect(d,a,30,30);var p=this.getInactiveEnemy(e),f=p.getComponent(cc.CircleCollider).radius,h=i.default.randomSpace(d,2*f,2*f);h?(p.node.position=h.center,p.node.active=!0,this.enemyLogicList.push(p),window.GameCollisionController.looseQuadTree.insert(p.enemyAABB)):console.error("\u6ca1\u6709\u7a7a\u95f4\u4e86...",d)},t.prototype.onKillEnemy=function(e){this.enemyLogicList.splice(this.enemyLogicList.indexOf(e),1),window.GameCollisionController.looseQuadTree.remove(e.enemyAABB),this.enemyCount--},t.prototype.lateUpdate=function(){var e;if(!r.GameProxy.pauseGame){for(var t=0,o=0,n=this.enemyLogicList;o<n.length;o++){var i=n[o];if(!i.logicFlag)break;t++,i.logicFlag=!1}(e=this.enemyLogicList).push.apply(e,this.enemyLogicList.splice(0,t));for(var a=Math.min(10,this.enemyLogicList.length),c=0;c<a;c++)this.enemyLogicList[c].logicFlag=!0}},__decorate([s(cc.Node)],t.prototype,"propLayer",void 0),__decorate([s(cc.Node)],t.prototype,"enemyLayer",void 0),__decorate([s(cc.Node)],t.prototype,"enemyBloodLayer",void 0),__decorate([s(cc.Node)],t.prototype,"bgNode",void 0),__decorate([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../framework/extend/SpacePartition":"SpacePartition","../entities/enemy/Enemy":"Enemy","../entities/prop/PropBase":"PropBase","./GameProxy":"GameProxy"}],GameExplosivesController:[function(e,t,o){"use strict";cc._RF.push(t,"89858T6hXVPE6i2+IlNrBWF","GameExplosivesController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../entities/explosive/Explosive"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.explosiveLayer=null,t._explosiveMap=new Map,t}return __extends(t,e),t.prototype.genExplosive=function(e){var t="prefab/entities/explosive/explosive"+e,o=cc.loader.getRes(t,cc.Prefab),i=cc.instantiate(o);this.explosiveLayer.addChild(i);var r=i.getComponent(n.default);r.init(e);var a=this._explosiveMap.get(e);return void 0===a&&(a=[],this._explosiveMap.set(e,a)),a.push(r),i.active=!1,r},t.prototype.getInactiveExplosive=function(e){var t=void 0,o=this._explosiveMap.get(e);return void 0!==o&&(t=o.find(function(e){return 0==e.node.active})),void 0===t&&(t=this.genExplosive(e)),t},__decorate([a(cc.Node)],t.prototype,"explosiveLayer",void 0),__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../entities/explosive/Explosive":"Explosive"}],GameLabelsController:[function(e,t,o){"use strict";cc._RF.push(t,"f7e2bT6UTxOj6t7XhqyjcZH","GameLabelsController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelLayer=null,t.templateLabel=null,t}return __extends(t,e),t.prototype.onLoad=function(){window.GameLabelsController=this},t.prototype.genLabel=function(){var e=cc.instantiate(this.templateLabel.node);return e.active=!1,this.labelLayer.addChild(e),e.getComponent(cc.Label)},t.prototype.getInactiveLabel=function(){var e=this.labelLayer.children.find(function(e){return 0==e.active&&e.getComponent(cc.Label)});return e?e.getComponent(cc.Label):this.genLabel()},t.prototype.fly=function(e,t){var o=this.getInactiveLabel();o.node.active=!0,o.string=e,o.node.position=t,o.node.color=cc.Color.RED,o.node.scale=0,o.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.fadeTo(.1,255),cc.moveBy(.1,cc.v2(0,10))),cc.delayTime(.1),cc.spawn(cc.moveBy(.3,cc.v2(0,30)),cc.fadeTo(.3,100)),cc.callFunc(function(){o.node.active=!1})))},__decorate([r(cc.Node)],t.prototype,"labelLayer",void 0),__decorate([r(cc.Label)],t.prototype,"templateLabel",void 0),__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],GameOverLucky:[function(e,t,o){"use strict";cc._RF.push(t,"43341ZZ4pdLh4MK2doeqynQ","GameOverLucky"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contentNode=null,t.templateLabel=null,t.mask=null,t}return __extends(t,e),t.prototype.run=function(e,t){for(var o=0,n=this.mask.node.height/2+this.templateLabel.node.height/2,i=0;i<1;i++)for(var r=10;r>=3;r--)(a=cc.instantiate(this.templateLabel.node)).getComponent(cc.Label).string="x"+r,a.x=0,a.y=o,o+=n,this.contentNode.addChild(a);for(r=10;r>=e;r--){var a;(a=cc.instantiate(this.templateLabel.node)).getComponent(cc.Label).string="x"+r,a.x=0,a.y=o,o+=n,this.contentNode.addChild(a)}this.templateLabel.node.active=!1;var c=(o-=n)/1250;console.log(c,o,this.mask.node.height),this.contentNode.runAction(cc.sequence(cc.moveTo(c,cc.v2(0,-o)).easing(cc.easeSineInOut()),cc.delayTime(1),cc.callFunc(function(){console.log("finish."),t()})))},__decorate([r(cc.Node)],t.prototype,"contentNode",void 0),__decorate([r(cc.Label)],t.prototype,"templateLabel",void 0),__decorate([r(cc.Mask)],t.prototype,"mask",void 0),__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],GameOver:[function(e,t,o){"use strict";cc._RF.push(t,"0ff30pjHBFH77CAQSQ7Z0pY","GameOver");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../framework/facade/Facade"),c=e("../../../framework/extend/Extend"),l=e("./GameProxy"),s=e("../info/World"),u=e("./GameOverLucky"),d=e("../network/Network"),p=e("../config/NetworkConfig"),f=e("../../../framework/config/ExcelConfig"),h=e("../config/ExcelTableNames"),m=e("../home/AdManner"),g=cc._decorator,y=g.ccclass,_=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.topNode=null,t.goldLabel=null,t.videoGoldLabel=null,t.videoMulLabel=null,t.luckyProgressBar=null,t.gameOverLucky=null,t.oneButtonNode=null,t.tripleButtonNode=null,t.luckyButtonNode=null,t.luckyVideoSprite=null,t.inviteSpriteFrame=null,t.videoSpriteFrame=null,t._takeGoldOne=0,t._videoMul=3,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.oneButtonNode.on(cc.Node.EventType.POSITION_CHANGED,function(){e.luckyButtonNode.parent.position=e.oneButtonNode.position.add(cc.v2(0,120))})},t.prototype.onEnable=function(){var e=this;if(this._takeGoldOne=0,this._videoMul=3,this.gameOverLucky.node.active=!1,this.gameOverLucky.node.zIndex=10,console.log("GameOver===>GameProxy.pauseGame = true"),l.GameProxy.pauseGame=!0,this.node.children.forEach(function(e,t){e.scale=0,e.runAction(cc.sequence(cc.delayTime(1+.08*t),cc.scaleTo(.2,1).easing(cc.easeElasticOut(.45))))}),s.World.Storage.unlockGun=-s.World.Storage.unlockGun,this.topNode.removeFromParent(!1),this.node.addChild(this.topNode),this.topNode.getChildByName("progress").runAction(cc.sequence(cc.delayTime(.3),cc.moveBy(.35,cc.v2(0,-125)))),this.topNode.getChildByName("level").runAction(cc.sequence(cc.delayTime(.7),cc.spawn(cc.scaleTo(.35,2).easing(cc.easeElasticOut(.6)),cc.moveBy(.35,cc.v2(0,-95)).easing(cc.easeElasticOut(.6))))),l.GameProxy.killCount>=l.GameProxy.maxEnemyNum){l.GameProxy.goldCount+=l.GameProxy.passGold(),s.World.Storage.gameLevel++,p.NetworkConfig.connectServer&&d.default.uploadLv(s.World.Storage.gameLevel);for(var t=0,o=f.ExcelConfig.getExcelTable(h.ExcelTableNames.Weapon);t<o.length;t++){var n=o[t];if(n.unlock==s.World.Storage.gameLevel){s.World.Storage.unlockGun=n.id;break}}}else this.titleLabel.string="DEFEAT";this._takeGoldOne=l.GameProxy.goldCount,this.goldLabel.string=c.ext.shortFormat(this._takeGoldOne),this.topNode.getChildByName("progress").getChildByName("goldLabel").getComponent(cc.Label).string=this.goldLabel.string,this.updateVideo(),this.scheduleOnce(function(){e.luckyButtonNode.parent.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.95),cc.scaleTo(.5,1))))},2)},t.prototype.updateVideo=function(){this.videoMulLabel.string="x"+this._videoMul,this.videoGoldLabel.string=c.ext.shortFormat(this._takeGoldOne*this._videoMul),this.luckyProgressBar.progress=1,this.tripleButtonNode.active=!1,this.luckyButtonNode.active=!this.tripleButtonNode.active},t.prototype.onGameOverTake=function(e,t){var o=this;1==parseInt(t)?(this._takeGoldOne>0&&(s.World.Storage.goldCount+=this._takeGoldOne,a.default.executeCommand("ShowTipsCommand","Coins +"+c.ext.shortFormat(this._takeGoldOne))),this.node.active=!1,a.default.executeCommand("LoadSceneCommand","HomeScene")):m.default.showVideo(function(e){if(e){if(o.luckyProgressBar.progress>=1){console.log("\u5e78\u8fd0\u5927\u5956."),o.gameOverLucky.node.active=!0;var t=c.ext.randomElement([10,9,8,7,6,5,4]);return void o.gameOverLucky.run(t,function(){o._videoMul=t,o.node.active=!1;var e=o._takeGoldOne*o._videoMul;e>0&&(s.World.Storage.goldCount+=e,a.default.executeCommand("ShowTipsCommand","Coins +"+c.ext.shortFormat(e))),a.default.executeCommand("LoadSceneCommand","HomeScene")})}var n=o._takeGoldOne*o._videoMul;n>0&&(s.World.Storage.goldCount+=n,a.default.executeCommand("ShowTipsCommand","Coins +"+c.ext.shortFormat(n)))}})},r([_(cc.Label)],t.prototype,"titleLabel",void 0),r([_(cc.Node)],t.prototype,"topNode",void 0),r([_(cc.Label)],t.prototype,"goldLabel",void 0),r([_(cc.Label)],t.prototype,"videoGoldLabel",void 0),r([_(cc.Label)],t.prototype,"videoMulLabel",void 0),r([_(cc.ProgressBar)],t.prototype,"luckyProgressBar",void 0),r([_(u.default)],t.prototype,"gameOverLucky",void 0),r([_(cc.Node)],t.prototype,"oneButtonNode",void 0),r([_(cc.Node)],t.prototype,"tripleButtonNode",void 0),r([_(cc.Node)],t.prototype,"luckyButtonNode",void 0),r([_(cc.Sprite)],t.prototype,"luckyVideoSprite",void 0),r([_(cc.SpriteFrame)],t.prototype,"inviteSpriteFrame",void 0),r([_(cc.SpriteFrame)],t.prototype,"videoSpriteFrame",void 0),r([y],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../../../framework/facade/Facade":"Facade","../config/ExcelTableNames":"ExcelTableNames","../config/NetworkConfig":"NetworkConfig","../home/AdManner":"AdManner","../info/World":"World","../network/Network":"Network","./GameOverLucky":"GameOverLucky","./GameProxy":"GameProxy"}],GameProxy:[function(e,t,o){"use strict";cc._RF.push(t,"9801fpOathEUp/24jFoCzlC","GameProxy"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameProxy=void 0;var n=e("../config/ExcelTableNames"),i=e("../../../framework/config/ExcelConfig"),r=e("../../../framework/extend/Extend"),a=e("../info/World"),c=1,l=1,s=1,u=1,d=function(){function e(){}return e.emit=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];this.GameScene&&(t=this.GameScene).emit.apply(t,__spreadArrays([e],o))},Object.defineProperty(e,"level",{get:function(){return this._level},set:function(e){var t,o;this._level=e,console.log("_level===>",this._level);var d=i.ExcelConfig.getExcelTable(n.ExcelTableNames.GoldUp),p=i.ExcelConfig.getExcelTable(n.ExcelTableNames.EnemyUp);c=p[this._level].enemy_hurt,l=p[this._level].enemy_health,s=p[this._level].enemy_gold*d[a.World.Storage.goldLv-1].gvalue,u=p[this._level].clear_gold;var f=i.ExcelConfig.getExcelTable(n.ExcelTableNames.Level);this._level<=f.length-4?this._levelConfig=f[this._level-1]:this._levelConfig=f[f.length-4+Math.ceil(100*Math.random())%4],this._levelConfig||console.error("levelConfig error==>"+this._level);for(var h=[],m=[],g=0,y=0,_=1;void 0!==this._levelConfig["p1_enemy_"+_];){if(this._levelConfig["p1_enemy_"+_]>0){for(var v=0;v<Math.floor(this._levelConfig["p1_enemy_"+_]*this._levelConfig.amount_p1);v++)h.push(_);this._levelConfig["p1_enemy_"+_]>g&&(g=this._levelConfig["p1_enemy_"+_])}if(this._levelConfig["p2_enemy_"+_]>0){for(v=0;v<Math.floor(this._levelConfig["p2_enemy_"+_]*this._levelConfig.amount_p2);v++)m.push(_);this._levelConfig["p2_enemy_"+_]>y&&(y=this._levelConfig["p2_enemy_"+_])}_++}for(this._levelConfig.amount_p1=h.length,this._levelConfig.amount_p2=m.length,r.ext.shuffle(h),r.ext.shuffle(m),this._enemyList.length=0,(t=this._enemyList).push.apply(t,h),v=0;v<this._levelConfig.p1_boss_7;v++)this._enemyList.push(7);for(v=0;v<this._levelConfig.p1_boss_8;v++)this._enemyList.push(8);for((o=this._enemyList).push.apply(o,m),v=0;v<this._levelConfig.p2_boss_7;v++)this._enemyList.push(7);for(v=0;v<this._levelConfig.p2_boss_8;v++)this._enemyList.push(8);this.isOver=!1,this.killCount=0,this.goldCount=0,this.secondBossNum=this._levelConfig.p2_boss_7+this._levelConfig.p2_boss_8,this._maxEnemyNum=this._enemyList.length,this._slowGame=!1,this._pauseGame=!1,this.magnetic=!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"levelConfig",{get:function(){return this._levelConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enemyList",{get:function(){return this._enemyList},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pauseGame",{get:function(){return this._pauseGame},set:function(e){console.log("GameProxy===>pauseGame",e),this._pauseGame!=e&&(this._pauseGame=e,this.emit(this.Event.PauseGame,this._pauseGame))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"slowGame",{get:function(){return this._slowGame},set:function(e){this._slowGame!=e&&(this._slowGame=e,this.emit(this.Event.SlowGame,this._slowGame))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"maxEnemyNum",{get:function(){return this._maxEnemyNum},enumerable:!1,configurable:!0}),e.enemyHurtMulOf=function(){return c},e.enemyHpMulOf=function(){return l},e.enemyGoldMulOf=function(){return s},e.passGold=function(){return u},e.GameScene=null,e.Event={StartGenEnemy:"StartGenEnemy",StopGenEnemy:"StopGenEnemy",KillEnemy:"KillEnemy",KillRole:"KillRole",PauseGame:"PauseGame",SlowGame:"SlowGame",InitGame:"InitGame",StartGame:"StartGame",ReliveGame:"ReliveGame",OverGame:"OverGame",UpdateBulletCount:"UpdateBulletCount",ShakeScreen:"ShakeScreen",PropCDZero:"PropCDZero",PropTrigger:"PropTrigger"},e.firstAidFlag=!0,e.secondBossNum=0,e._level=0,e._levelConfig=null,e._enemyList=[],e.prepareGun=0,e.isOver=!1,e.killCount=0,e.goldCount=0,e.goldMul=1,e._pauseGame=!1,e.magnetic=!1,e._slowGame=!1,e._maxEnemyNum=0,e}();o.GameProxy=d,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../config/ExcelTableNames":"ExcelTableNames","../info/World":"World"}],GameRelive:[function(e,t,o){"use strict";cc._RF.push(t,"c841aUcQDlKNb/TIRPN/nS1","GameRelive");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameProxy"),c=e("../config/ExcelTableNames"),l=e("../../../framework/config/ExcelConfig"),s=e("../info/World"),u=e("../../../framework/component/CDTimer"),d=e("../home/AdManner"),p=cc._decorator,f=p.ccclass,h=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameOverNode=null,t.gunSpriteFrames=[],t.gunSprite=null,t.bulletLabel=null,t.cdLabel=null,t.cdTimer=null,t}return i(t,e),t.prototype.onEnable=function(){console.log("GameRelive===>GameProxy.pauseGame = true"),a.GameProxy.pauseGame=!0,this.cdTimer.reset(),this.cdTimer.pause=!1,this.cdLabel.string=Math.ceil(this.cdTimer.cdDelta()).toString(),this.node.stopAllActions();for(var e=0,t=l.ExcelConfig.getExcelTable(c.ExcelTableNames.Weapon).filter(function(e){return 1!=e.id}).sort(function(e,t){return t.unlock-e.unlock});e<t.length;e++){var o=t[e];if(a.GameProxy.level>=o.unlock){this.gunSprite.spriteFrame=this.gunSpriteFrames[o.id-1],this.bulletLabel.string="Bullets "+3*s.World.My.armory.payloadAddOf(o.id)+"x3";break}}},t.prototype.onClickRelive=function(){var e=this;d.default.showVideo(function(t){t&&(e.node.active=!1,a.GameProxy.pauseGame=!1,a.GameProxy.emit(a.GameProxy.Event.ReliveGame))})},t.prototype.onNoRelive=function(){this.node.active=!1,this.gameOverNode.active=!0},t.prototype.onProgressEvent=function(){this.cdLabel.string=Math.ceil(this.cdTimer.cdDelta()).toString()},r([h(cc.Node)],t.prototype,"gameOverNode",void 0),r([h(cc.SpriteFrame)],t.prototype,"gunSpriteFrames",void 0),r([h(cc.Sprite)],t.prototype,"gunSprite",void 0),r([h(cc.Label)],t.prototype,"bulletLabel",void 0),r([h(cc.Label)],t.prototype,"cdLabel",void 0),r([h(u.default)],t.prototype,"cdTimer",void 0),r([f],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../framework/component/CDTimer":"CDTimer","../../../framework/config/ExcelConfig":"ExcelConfig","../config/ExcelTableNames":"ExcelTableNames","../home/AdManner":"AdManner","../info/World":"World","./GameProxy":"GameProxy"}],GameRoleController:[function(e,t,o){"use strict";cc._RF.push(t,"6a436jVTaVMhK6DmWGm6kzl","GameRoleController"),Object.defineProperty(o,"__esModule",{value:!0}),o.DirectionType=o.JoystickType=void 0;var n,i,r=e("../entities/bulletEmitter/BulletEmitterShanDianQiu"),a=e("../entities/bulletEmitter/BulletEmitterHuoJianTong"),c=e("../entities/bulletEmitter/BulletEmitterShouQiang"),l=e("../entities/bulletEmitter/BulletEmitterSanDanQiang"),s=e("../entities/role/Role"),u=e("../../../framework/actions/Actions"),d=e("../entities/bulletEmitter/BulletEmitterJiGuang"),p=e("../entities/bulletEmitter/BulletEmitterLiZiPao"),f=e("../entities/bulletEmitter/BulletEmitterJiaTeLin"),h=e("../entities/bulletEmitter/BulletEmitterJuJiQiang"),m=e("../entities/bulletEmitter/BulletEmitterHuoYan"),g=e("../entities/bulletEmitter/BulletEmitter"),y=e("../entities/bulletEmitter/BulletEmitterPenZi"),_=e("./GameProxy"),v=e("../entities/enemy/Enemy"),b=e("../entities/bullet/BulletOfFangHuDun"),E=e("../entities/prop/PropStateController"),C=e("../../../framework/audio/Music"),w=e("../info/World"),x=e("../../../framework/config/ExcelConfig"),T=e("../config/ExcelTableNames"),S=e("./GameController"),P=e("../../../framework/extend/Extend"),N=cc._decorator,k=N.ccclass,A=N.property;(function(e){e[e.FIXED=0]="FIXED",e[e.FOLLOW=1]="FOLLOW"})(n=o.JoystickType||(o.JoystickType={})),function(e){e[e.FOUR=4]="FOUR",e[e.EIGHT=8]="EIGHT",e[e.ALL=0]="ALL"}(i=o.DirectionType||(o.DirectionType={}));var L=[.33,.8,.8,.45,1,2,1,.6,1,2,1,1,1],B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guideNode=null,t.bulletStrikeLayer=null,t.propStatePrefab=null,t.propStateNode=null,t.takePropLayer=null,t.beAttackSke=null,t.weaponSke=null,t.payloadLabel=null,t.payloadBars=[],t.hpProgressBar=null,t.hpBarNode=null,t.bgLayer=null,t.dot=null,t.ring=null,t.joystickType=n.FIXED,t.directionType=i.ALL,t._radius=0,t._takeProps=[],t.role=null,t.impenetrableDefence=null,t.maxHp=1e3,t._hp=0,t._bulletEmitter=0,t._bulletEmitterDelegate=null,t._touchId=null,t._bMove=!1,t._dir=cc.v2(),t._fireCD=0,t._bgBounds=cc.rect(),t._roleBounds=cc.rect(),t._bgNode=null,t._screenRect=cc.rect(0,0,cc.visibleRect.width,cc.visibleRect.height),t}return __extends(t,e),t.prototype.genTakePropNode=function(){var e=cc.loader.getRes("prefab/entities/prop/takeProp",cc.Prefab),t=cc.instantiate(e);return t.active=!1,this.takePropLayer.addChild(t),this._takeProps.push(t),t},t.prototype.getInactiveTakePropNode=function(){var e=this._takeProps.find(function(e){return 0==e.active});return void 0===e&&(e=this.genTakePropNode()),e},Object.defineProperty(t.prototype,"hp",{get:function(){return this._hp},set:function(e){var t=this;if(this.impenetrableDefence.node.active)this.impenetrableDefence.strike(null,null);else if(!(this._hp<=0)){var o=this._hp-e;window.GameLabelsController.fly("-"+P.ext.shortFormat(o),this.role.node.position.add(cc.v2(0,this.role.spaceCircleCollider.radius))),this._hp=e,e<=0&&_.GameProxy.emit(_.GameProxy.Event.KillRole),this.updateHpProgress(),this.beAttackSke.node.active=!0,this.beAttackSke.setAnimation(0,"crazy",!1),C.Music.playSFX("sound/msc_rol001"),this.hpBarNode.color=cc.Color.RED,this.role.spriteNode.color=cc.Color.RED;var n=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){t.hpBarNode.color=cc.Color.GREEN,t.role.spriteNode.color=cc.Color.WHITE}));n.setTag(901),this.role.node.stopActionByTag(901),this.role.node.runAction(n)}},enumerable:!1,configurable:!0}),t.prototype.huiXue=function(e){this._hp+=e,this._hp>this.maxHp&&(this._hp=this.maxHp),this.updateHpProgress()},t.prototype.updateHpProgress=function(){this.hpProgressBar.progress=this._hp/this.maxHp},Object.defineProperty(t.prototype,"bulletEmitter",{get:function(){return this._bulletEmitter},set:function(e){if(0!=this._bulletEmitter&&C.Music.playSFX("sound/msc_rol003"),this._bulletEmitter!=e){this._bulletEmitter=e;var t=window.GameBulletsController,o=null;switch(this._bulletEmitter){case g.default.TYPES.ShouQiang:o=new c.default(t);break;case g.default.TYPES.PenZi:o=new y.default(t);break;case g.default.TYPES.JiaTeLin:o=new f.default(t);break;case g.default.TYPES.SanDanQiang:o=new l.default(t);break;case g.default.TYPES.JuJiQiang:o=new h.default(t);break;case g.default.TYPES.LiZiPao:o=new p.default(t);break;case g.default.TYPES.HuoJianTong:o=new a.default(t);break;case g.default.TYPES.ShanDianQiu:o=new r.default(t);break;case g.default.TYPES.JiGuang:o=new d.default(t);break;case g.default.TYPES.HuoYan:o=new m.default(t)}this.bulletEmitterDelegate=o,o.init(this._bulletEmitter),this.weaponSke.setSkin(("000"+this._bulletEmitter).substr(-3)),this.weaponSke.setAnimation(0,"gun_002",!1)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bulletEmitterDelegate",{get:function(){return this._bulletEmitterDelegate},set:function(e){this._bulletEmitterDelegate&&this._bulletEmitterDelegate.onExit(),this._bulletEmitterDelegate=e,this._bulletEmitterDelegate.onEnter()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"touchId",{set:function(e){this._touchId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bMove",{get:function(){return this._bMove},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this._radius=this.ring.width/2,this.joystickType==n.FOLLOW&&(this.ring.opacity=0,this.dot.opacity=0),this.role.node.on(cc.Node.EventType.POSITION_CHANGED,this.onRolePositionChanged,this),this.node.on(_.GameProxy.Event.PauseGame,this.onPauseGame,this),this.node.on(_.GameProxy.Event.InitGame,this.onInitGame,this),this.node.on(_.GameProxy.Event.StartGame,this.onStartGame,this),this.node.on(_.GameProxy.Event.ReliveGame,this.onReliveGame,this),this.node.on(_.GameProxy.Event.UpdateBulletCount,this.onUpdateBulletCount,this),this.node.on(_.GameProxy.Event.PropTrigger,this.onPropTrigger,this),this.node.on(_.GameProxy.Event.PropCDZero,this.onPropCDZero,this),this.beAttackSke.setCompleteListener(function(t){t.animation&&t.animation.name,e.beAttackSke.node.active=!1}),this.beAttackSke.node.active=!1,this.beAttackSke.node.scaleY=cc.view.getVisibleSize().height/1334,this.weaponSke.setCompleteListener(function(t){"gun_002"==(t.animation?t.animation.name:"")&&e.weaponSke.setAnimation(0,"gun",!1)}),window.GameRoleController=this},t.prototype.onUpdateBulletCount=function(){var e="x"+this._bulletEmitterDelegate.bulletCount;1==this._bulletEmitter&&(e="\u221e"),this.payloadLabel.string=e;var t=this.payloadBars.length;this._bulletEmitterDelegate.payload>0&&(t=Math.ceil(this._bulletEmitterDelegate.bulletCount/this._bulletEmitterDelegate.payload*this.payloadBars.length)),this.payloadBars.forEach(function(e,o){return e.active=o<t})},t.prototype.onPauseGame=function(e){e&&(this.touchId=null,this._bMove=!1,this.dot.setPosition(this.ring.getPosition()),this.joystickType==n.FOLLOW&&(this.ring.opacity=0,this.dot.opacity=0))},t.prototype.onInitGame=function(){this.maxHp=this._hp=x.ExcelConfig.getExcelTable(T.ExcelTableNames.WeaponUp)[w.World.Storage.HpLv-1].life,this.updateHpProgress(),this.setImpenetrableDefenceCD(3)},t.prototype.setImpenetrableDefenceCD=function(e){var t=this;console.log("setImpenetrableDefenceCD==>",e),this.impenetrableDefence.node.active=!0,this.impenetrableDefence.unblink();var o=cc.sequence(cc.delayTime(e-1),cc.callFunc(function(){t.impenetrableDefence.blink()}),cc.delayTime(1),cc.callFunc(function(){t.impenetrableDefence.node.active=!1}));o.setTag(889),this.role.node.stopActionByTag(889),this.role.node.runAction(o)},t.prototype.onStartGame=function(){console.log("onStartGame===>",_.GameProxy.pauseGame),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),w.World.My.newbies.state("FirstEntryGame")?this.getComponent(S.default).startGenerating():this.guideNode.active=!0},t.prototype.onReliveGame=function(){this.onInitGame();for(var e=0,t=x.ExcelConfig.getExcelTable(T.ExcelTableNames.Weapon).filter(function(e){return 1!=e.id}).sort(function(e,t){return t.unlock-e.unlock});e<t.length;e++){var o=t[e];if(_.GameProxy.level>=o.unlock){this.bulletEmitter=o.id,this.bulletEmitterDelegate.payload=3*this.bulletEmitterDelegate.payload;break}}},t.prototype.onRolePositionChanged=function(){var e=this;this.hpProgressBar.node.position=this.role.node.position,this._takeProps.forEach(function(t){t.active&&(t.position=e.role.node.position)})},t.prototype.onPropTrigger=function(e){var t=this,o=this.getInactiveTakePropNode();o.position=this.role.node.position,o.active=!0,o.scale=1,o.opacity=255,o.runAction(cc.sequence(cc.scaleTo(.3,4),cc.fadeTo(.3,80),cc.callFunc(function(){o.active=!1})));var n=e.propID,i=function(o){var i=cc.instantiate(e.node);i.position=t.propStateNode.getParent().convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.v2())),t.propStateNode.getParent().addChild(i);var r=cc.instantiate(t.propStatePrefab);t.propStateNode.addChild(r),r.scale=0,r.runAction(cc.scaleTo(.3,1)),i.runAction(cc.sequence(cc.moveTo(.3,t.propStateNode.position.add(cc.v2(0,-39))),cc.callFunc(function(){t.propStateNode.children.forEach(function(e){var t=e.getComponent(E.default);t.propID==n&&e!=r&&(t.cdTimer.pause=!0,t.node.active=!1)});var e=r.getComponent(E.default);e.init(n),e.cdTimer.pause=!1,i.destroy(),o&&o()})))};switch(n){case 5:this.setImpenetrableDefenceCD(10.3);break;case 11:this.role.addSupply(n),this.huiXue(Math.floor(.3*this.maxHp));break;case 9:this.role.addSupply(n),i(),this.role.accSpeed=1.5;break;case 10:i();break;case 12:this.role.addSupply(n),i(),_.GameProxy.goldMul=2;break;case 13:_.GameProxy.magnetic=!0,i();break;case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:this.bulletEmitter==n-100?this.bulletEmitterDelegate.bulletCount=this.bulletEmitterDelegate.payload:this.bulletEmitter=n-100}},t.prototype.onPropCDZero=function(e){switch(e){case 5:this.impenetrableDefence.node.active=!1;break;case 9:this.role.accSpeed=1;break;case 10:break;case 12:_.GameProxy.goldMul=1;break;case 13:_.GameProxy.magnetic=!1}},t.prototype.start=function(){var e=this,t=this.role.node.getParent();this._bgNode=t,this._roleBounds.x=-t.width/2+this.role.spaceCircleCollider.radius,this._roleBounds.y=-t.height/2+this.role.spaceCircleCollider.radius,this._roleBounds.width=t.width-2*this.role.spaceCircleCollider.radius,this._roleBounds.height=t.height-2*this.role.spaceCircleCollider.radius,this._bgBounds.x=-this.bgLayer.width/2+cc.view.getVisibleSize().width/2,this._bgBounds.y=-this.bgLayer.height/2+cc.view.getVisibleSize().height/2,this._bgBounds.width=this.bgLayer.width-cc.view.getVisibleSize().width,this._bgBounds.height=this.bgLayer.height-cc.view.getVisibleSize().height,this.node.runAction(u.default.update(function(o){var n=e.role.speed*o;if(e._bMove&&!_.GameProxy.pauseGame){var i=e._dir.mul(n),r=e.role.node.position.add(i),a=[];window.GameCollisionController.looseQuadTree.retrieve(e.role.roleAABB.aabb(),a);for(var c=!1,l=0,s=a;l<s.length;l++){var u=s[l].enemy;if(u.node.position.sub(r).mag()<u.spaceCircleCollider.radius+e.role.spaceCircleCollider.radius){c=!0;break}}c||(r.x>e._roleBounds.xMax||r.x<e._roleBounds.xMin||r.y>e._roleBounds.yMax||r.y<e._roleBounds.yMin)&&(c=!0),c||(e.role.node.position=r)}var d=cc.v2(-e.role.node.x,-e.role.node.y).sub(t.position),p=d.mag(),f=d.normalize();if(p>0){var h=n*(p>50?1:5/6),m=h*f.x,g=h*f.y;Math.abs(m)>Math.abs(d.x)&&(m=d.x),Math.abs(g)>Math.abs(d.y)&&(g=d.y);var y=t.x+m,v=t.y+g;y<e._bgBounds.xMin?y=e._bgBounds.xMin:y>e._bgBounds.xMax&&(y=e._bgBounds.xMax),v<e._bgBounds.yMin?v=e._bgBounds.yMin:v>e._bgBounds.yMax&&(v=e._bgBounds.yMax),t.x=y,t.y=v}}));var o=window.GameEnemysController;_.GameProxy.prepareGun>0?(this.bulletEmitter=_.GameProxy.prepareGun,this.bulletEmitterDelegate.payload=3*this.bulletEmitterDelegate.payload,_.GameProxy.prepareGun=0):this.bulletEmitter=g.default.TYPES.ShouQiang,this.node.runAction(u.default.update(function(t){if(!_.GameProxy.pauseGame&&!_.GameProxy.slowGame){e._fireCD>0&&(e._fireCD-=t);var n=null,i=null,r=e.bulletEmitterDelegate.firingRange;e._screenRect.x=-e._bgNode.x-cc.visibleRect.center.x,e._screenRect.y=-e._bgNode.y-cc.visibleRect.center.y;var a=e.role.node.position;if(o.enemyLayer.children.forEach(function(t){if(t.active&&t.getComponent(v.default).hp>0&&e._screenRect.contains(t.position)){var o=t.position.sub(a),c=o.mag();c<r&&(i=o,r=c,n=t)}}),n&&(e.turnTo(i),e._fireCD<=0)){var c=Math.atan(n.getComponent(v.default).spaceCircleCollider.radius/r);if(i.angle(cc.v2(0,1).rotate(cc.misc.degreesToRadians(-e.role.node.rotation)))<c){e._fireCD=e.bulletEmitterDelegate.interval;var l=n.position.sub(a).normalize();if(0==l.x&&0==l.y&&(l=cc.v2(0,1).normalize().rotate(cc.misc.degreesToRadians(-e.role.node.rotation))),e._bulletEmitter==g.default.TYPES.JuJiQiang){var s=cc.loader.getRes("prefab/entities/bullet/fire7"),u=cc.instantiate(s);e.bulletStrikeLayer.addChild(u),u.position=e.role.node.position.add(l.mul(e.role.gunTopNode.y)),u.rotation=90-cc.misc.radiansToDegrees(Math.atan2(l.y,l.x)),u.getComponent(sp.Skeleton).setCompleteListener(function(){u.destroy()})}else e._bulletEmitter!==g.default.TYPES.JiGuang&&e._bulletEmitter!==g.default.TYPES.PenZi&&(e.role.fireSprite.node.scale=1,e.role.fireSprite.node.active=!0,e.role.fireSprite.node.runAction(cc.sequence(cc.scaleTo(.05,.5),cc.callFunc(function(){e.role.fireSprite.node.active=!1}))));e._bulletEmitterDelegate.fire(e.role.node.position.add(l.mul(e.role.gunTopNode.y)),l);var d="sound/msc_g"+("0000000000000000"+e._bulletEmitter).substr(-3);C.Music.playSFX(d,L[e._bulletEmitter-1]),e._bulletEmitterDelegate.isUseUp()&&(e.bulletEmitter=g.default.TYPES.ShouQiang)}}}}))},t.prototype.turnTo=function(e){var t=(90-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x)))%360;t<0&&(t+=360);var o=this.role.node.rotation%360;o<0&&(o+=360);var n=Math.abs(t-o);if(n>0){var i=0;n>180?(i=10*Math.sign(o-t),Math.abs(i)>360-n&&(i=Math.sign(i)*(360-n))):(i=10*Math.sign(t-o),Math.abs(i)>n&&(i=Math.sign(i)*n)),o+=i}this.role.node.rotation=o},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.onTouchStart=function(e){null==this._touchId&&(this.touchId=e.getID(),this._bMove=!1,this.ring.opacity=80,this.dot.opacity=80,this.ring.setPosition(e.getLocation().sub(cc.visibleRect.center)),this.dot.setPosition(cc.v2(0,0)))},t.prototype.onTouchMove=function(e){if(!_.GameProxy.pauseGame&&e.getID()==this._touchId){this._bMove=!0,this.guideNode.active&&this.dot.position.mag()>30&&(this.guideNode.active=!1,w.World.My.newbies.finish("FirstEntryGame"),this.getComponent(S.default).startGenerating());var t=this.dot.position.add(e.getDelta());this._dir=t.normalize(),t.mag()>=this._radius?(this.dot.position=this._dir.mul(this._radius),this.role.speedType=s.SpeedType.FAST,this.ring.position=e.getLocation().sub(cc.visibleRect.center).sub(this.dot.position)):(this.dot.position=t,this.role.speedType=s.SpeedType.NORMAL)}},t.prototype.onTouchEnd=function(e){_.GameProxy.pauseGame||e.getID()!=this._touchId||(this.touchId=null,this._bMove=!1,this.dot.setPosition(this.ring.getPosition()),this.joystickType==n.FOLLOW&&(this.ring.opacity=0,this.dot.opacity=0))},__decorate([A(cc.Node)],t.prototype,"guideNode",void 0),__decorate([A(cc.Node)],t.prototype,"bulletStrikeLayer",void 0),__decorate([A(cc.Prefab)],t.prototype,"propStatePrefab",void 0),__decorate([A(cc.Node)],t.prototype,"propStateNode",void 0),__decorate([A(cc.Node)],t.prototype,"takePropLayer",void 0),__decorate([A(sp.Skeleton)],t.prototype,"beAttackSke",void 0),__decorate([A(sp.Skeleton)],t.prototype,"weaponSke",void 0),__decorate([A(cc.Label)],t.prototype,"payloadLabel",void 0),__decorate([A(cc.Node)],t.prototype,"payloadBars",void 0),__decorate([A(cc.ProgressBar)],t.prototype,"hpProgressBar",void 0),__decorate([A(cc.Node)],t.prototype,"hpBarNode",void 0),__decorate([A(cc.Node)],t.prototype,"bgLayer",void 0),__decorate([A({type:cc.Node,tooltip:"\u6447\u6746\u64cd\u7eb5\u70b9"})],t.prototype,"dot",void 0),__decorate([A({type:cc.Node,tooltip:"\u6447\u6746\u80cc\u666f\u8282\u70b9"})],t.prototype,"ring",void 0),__decorate([A({type:cc.Enum(n),tooltip:"\u89e6\u6478\u7c7b\u578b"})],t.prototype,"joystickType",void 0),__decorate([A({type:cc.Enum(i),tooltip:"\u65b9\u5411\u7c7b\u578b"})],t.prototype,"directionType",void 0),__decorate([A(s.default)],t.prototype,"role",void 0),__decorate([A(b.default)],t.prototype,"impenetrableDefence",void 0),__decorate([k],t)}(cc.Component);o.default=B,cc._RF.pop()},{"../../../framework/actions/Actions":"Actions","../../../framework/audio/Music":"Music","../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../config/ExcelTableNames":"ExcelTableNames","../entities/bullet/BulletOfFangHuDun":"BulletOfFangHuDun","../entities/bulletEmitter/BulletEmitter":"BulletEmitter","../entities/bulletEmitter/BulletEmitterHuoJianTong":"BulletEmitterHuoJianTong","../entities/bulletEmitter/BulletEmitterHuoYan":"BulletEmitterHuoYan","../entities/bulletEmitter/BulletEmitterJiGuang":"BulletEmitterJiGuang","../entities/bulletEmitter/BulletEmitterJiaTeLin":"BulletEmitterJiaTeLin","../entities/bulletEmitter/BulletEmitterJuJiQiang":"BulletEmitterJuJiQiang","../entities/bulletEmitter/BulletEmitterLiZiPao":"BulletEmitterLiZiPao","../entities/bulletEmitter/BulletEmitterPenZi":"BulletEmitterPenZi","../entities/bulletEmitter/BulletEmitterSanDanQiang":"BulletEmitterSanDanQiang","../entities/bulletEmitter/BulletEmitterShanDianQiu":"BulletEmitterShanDianQiu","../entities/bulletEmitter/BulletEmitterShouQiang":"BulletEmitterShouQiang","../entities/enemy/Enemy":"Enemy","../entities/prop/PropStateController":"PropStateController","../entities/role/Role":"Role","../info/World":"World","./GameController":"GameController","./GameProxy":"GameProxy"}],GameSupplyItem:[function(e,t,o){"use strict";cc._RF.push(t,"897d2HY3ThCFpCJTdoeL/dK","GameSupplyItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../framework/tableview/AbstractTableItem"),c=e("../info/World"),l=cc._decorator,s=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockLabel=null,t.bgSprite=null,t.weaponSprite=null,t.nameLabel=null,t.bulletLabel=null,t.numLabel=null,t.weaponSpriteFrames=[],t.bgSpriteFrames=[],t._index=0,t._data=null,t}var o;return i(t,e),o=t,t.prototype.upadteItem=function(e,t){this._data=e,this._index=t,this.bgSprite.spriteFrame=this.bgSpriteFrames[o.gameSupply.focus==t?1:0],this.weaponSprite.spriteFrame=this.weaponSpriteFrames[e.id-1],this.nameLabel.string=e.gun_name,this.numLabel.string=c.World.My.armory.payloadAddOf(e.id)+"x3",this.lockLabel.string="Unlock at Lv"+e.unlock;var n=c.World.Storage.gameLevel<e.unlock;this.lockLabel.node.active=n,this.nameLabel.node.active=!n,this.weaponSprite.setMaterial(0,cc.Material.getBuiltinMaterial(n?"2d-gray-sprite":"2d-sprite")),this.weaponSprite.node.opacity=n?128:255},t.prototype.onClickButton=function(){c.World.Storage.gameLevel<this._data.unlock||(o.gameSupply.focus=this._index)},t.gameSupply=null,r([u(cc.Label)],t.prototype,"lockLabel",void 0),r([u(cc.Sprite)],t.prototype,"bgSprite",void 0),r([u(cc.Sprite)],t.prototype,"weaponSprite",void 0),r([u(cc.Label)],t.prototype,"nameLabel",void 0),r([u(cc.Label)],t.prototype,"bulletLabel",void 0),r([u(cc.Label)],t.prototype,"numLabel",void 0),r([u(cc.SpriteFrame)],t.prototype,"weaponSpriteFrames",void 0),r([u(cc.SpriteFrame)],t.prototype,"bgSpriteFrames",void 0),o=r([s],t)}(a.default);o.default=d,cc._RF.pop()},{"../../../framework/tableview/AbstractTableItem":"AbstractTableItem","../info/World":"World"}],GameSupply:[function(e,t,o){"use strict";cc._RF.push(t,"fa532I+751DgZh0kt4K3xve","GameSupply"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/tableview/TableViewMediator"),i=e("../../../framework/config/ExcelConfig"),r=e("../config/ExcelTableNames"),a=e("./GameProxy"),c=e("./GameSupplyItem"),l=e("../info/World"),s=e("../home/AdManner"),u=cc._decorator,d=u.ccclass,p=u.property,f=!1,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useGuideNode=null,t.videoNode=null,t.tableViewMediator=null,t.noUseNode=null,t._focus=0,t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"focus",{get:function(){return this._focus},set:function(e){this._focus=e,this.tableViewMediator.updateData()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){c.default.gameSupply=this,this.tableViewMediator.datas=i.ExcelConfig.getExcelTable(r.ExcelTableNames.Weapon).filter(function(e){return 1!=e.id}).sort(function(e,t){return e.order-t.order})},t.prototype.onEnable=function(){if(f&&this.tableViewMediator.showAction(),f=!0,a.GameProxy.pauseGame=!0,l.World.My.newbies.state("FirstEntrySupply"))this.useGuideNode.x=50,this.videoNode.active=!0;else{this.useGuideNode.x=0;var e=new cc.Node;e.name="newbieNode",e.position=this.useGuideNode.convertToWorldSpaceAR(cc.v2()),cc.director.getScene().addChild(e);var t=cc.loader.getRes("prefab/guideCircle"),n=cc.instantiate(t);n.position=cc.v2(),e.addChild(n);var i=cc.loader.getRes("prefab/guideSke"),r=cc.instantiate(i);r.position=cc.v2(),e.addChild(r),this.useGuideNode.x=0,this.videoNode.active=!1}o.getqiandao()?(this.useGuideNode.x=50,this.videoNode.active=!0):this.videoNode.active=!1},t.prototype.onClickCloseSupply=function(){a.GameProxy.pauseGame=!1,this.node.active=!1},t.prototype.onClickUseSupply=function(e,t){var n=this;if(0==o.getqiandao()){var i=this.tableViewMediator.datas[this._focus],r=window.GameRoleController;r.bulletEmitter=i.id,r.bulletEmitterDelegate.payload=3*l.World.My.armory.payloadAddOf(i.id),this.onClickCloseSupply(e,t);var a=cc.director.getScene().getChildByName("newbieNode");a&&(a.destroy(),l.World.My.newbies.finish("FirstEntrySupply"))}else s.default.showVideo(function(o){if(o){var i=n.tableViewMediator.datas[n._focus],r=window.GameRoleController;r.bulletEmitter=i.id,r.bulletEmitterDelegate.payload=3*l.World.My.armory.payloadAddOf(i.id),n.onClickCloseSupply(e,t);var a=cc.director.getScene().getChildByName("newbieNode");a&&(a.destroy(),l.World.My.newbies.finish("FirstEntrySupply"))}});o.setqiandao(2)},t.setqiandao=function(e){cc.sys.localStorage.setItem("FirstEntry",e)},t.getqiandao=function(){return 1!=(cc.sys.localStorage.getItem("FirstEntry")||1)},__decorate([p(cc.Node)],t.prototype,"useGuideNode",void 0),__decorate([p(cc.Node)],t.prototype,"videoNode",void 0),__decorate([p(n.default)],t.prototype,"tableViewMediator",void 0),__decorate([p(cc.Node)],t.prototype,"noUseNode",void 0),o=__decorate([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/tableview/TableViewMediator":"TableViewMediator","../config/ExcelTableNames":"ExcelTableNames","../home/AdManner":"AdManner","../info/World":"World","./GameProxy":"GameProxy","./GameSupplyItem":"GameSupplyItem"}],GameUIController:[function(e,t,o){"use strict";cc._RF.push(t,"f3f85MNlcZIA6Ym+TSEYYf+","GameUIController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameProxy"),c=e("../../../framework/extend/Extend"),l=e("../../../framework/actions/Actions"),s=cc._decorator,u=s.ccclass,d=s.property,p=null,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supplyIconNode=null,t.lvLabels=[],t.gameProgressBar=null,t.gameProgressLabel=null,t.goldLabel=null,t.goldIconNode=null,t.goldLayer=null,t.gameOverNode=null,t}return i(t,e),t.prototype.getInactiveGoldIconNode=function(){var e=this.goldLayer.children.find(function(e){return 0==e.active});return null==e&&((e=cc.instantiate(this.goldIconNode)).active=!1,this.goldLayer.addChild(e)),e.opacity=255,e.scale=.7,e},t.prototype.updateGold=function(){this.goldLabel.string=c.ext.shortFormat(a.GameProxy.goldCount)},t.prototype.onLoad=function(){this.node.on(a.GameProxy.Event.KillEnemy,this.onKillEnemy,this),this.node.on(a.GameProxy.Event.InitGame,this.onInitGame,this),this.node.on(a.GameProxy.Event.StartGame,this.onStartGame,this),this.supplyIconNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.35,.91),cc.scaleTo(.35,1))))},t.prototype.onDestroy=function(){this.node.off(a.GameProxy.Event.KillEnemy,this.onKillEnemy,this),this.node.off(a.GameProxy.Event.InitGame,this.onInitGame,this),this.node.off(a.GameProxy.Event.StartGame,this.onStartGame,this)},t.prototype.checkWin=function(){a.GameProxy.isOver&&a.GameProxy.killCount>=a.GameProxy.maxEnemyNum&&this.goldLayer.children.every(function(e){return 0==e.active})&&(console.log("\u91d1\u5e01\u98de\u5b8c\u4e86\uff0c\u7ed3\u7b97"),this.gameOverNode.active=!0)},t.prototype.onKillEnemy=function(e){var t=this,o=e.gold*a.GameProxy.goldMul,n=Math.floor(o/e.goldIconFell),i=o-n*e.goldIconFell,r=!1,c=e.node.position.add(e.node.getParent().getParent().position);if(e.goldIconFell<5)for(var s=p.sub(c),u=c.add(s.mul(.15)),d=s.normalize().rotate(-90*Math.PI/180),f=100*Math.random()%2==1,h=function(e){var o=e%2==0?f:!f,l=m.getInactiveGoldIconNode();l.position=c,l.active=!0,l.runAction(cc.speed(cc.sequence(cc.delayTime(.1*e),cc.bezierTo(.65,[u.add(d.mul(300*(o?-1:1))),p,p]).easing(cc.easeCircleActionIn()),cc.callFunc(function(){l.active=!1,r?a.GameProxy.goldCount+=n:(r=!0,a.GameProxy.goldCount+=n+i),t.updateGold(),t.checkWin()})),1))},m=this,g=0;g<e.goldIconFell;g++)h(g);else{var y=e.goldIconFell;l.default.boom(function(){var e=t.getInactiveGoldIconNode();return e.active=!0,e},c,p,80,y,1e3,function(){r?a.GameProxy.goldCount+=n:(r=!0,a.GameProxy.goldCount+=n+i),t.updateGold(),t.checkWin()})}this.updateGameProgress()},t.prototype.onInitGame=function(){this.lvLabels.forEach(function(e,t){return e.string="<b><outline color=#1e1e1e width=3>"+(a.GameProxy.level-1+t)+"</outline></b>"}),a.GameProxy.level<2&&(this.lvLabels[0].node.getParent().active=!1),this.updateGameProgress(),this.updateGold()},t.prototype.onStartGame=function(){p=this.goldLayer.convertToNodeSpaceAR(this.goldIconNode.convertToWorldSpaceAR(cc.v2()))},t.prototype.updateGameProgress=function(){this.gameProgressBar.progress=a.GameProxy.killCount/a.GameProxy.maxEnemyNum,this.gameProgressLabel.string="Enemy Remain\uff1a"+Math.ceil(100*(a.GameProxy.maxEnemyNum-a.GameProxy.killCount)/a.GameProxy.maxEnemyNum)+"%"},r([d(cc.Node)],t.prototype,"supplyIconNode",void 0),r([d(cc.RichText)],t.prototype,"lvLabels",void 0),r([d(cc.ProgressBar)],t.prototype,"gameProgressBar",void 0),r([d(cc.Label)],t.prototype,"gameProgressLabel",void 0),r([d(cc.Label)],t.prototype,"goldLabel",void 0),r([d(cc.Node)],t.prototype,"goldIconNode",void 0),r([d(cc.Node)],t.prototype,"goldLayer",void 0),r([d(cc.Node)],t.prototype,"gameOverNode",void 0),r([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../framework/actions/Actions":"Actions","../../../framework/extend/Extend":"Extend","./GameProxy":"GameProxy"}],GroupConfig:[function(e,t,o){"use strict";cc._RF.push(t,"a8411Y6H4RH8ILHau8poiNJ","GroupConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.GroupConfig=void 0,function(e){e.default="default",e.enemy="enemy",e.role="role"}(o.GroupConfig||(o.GroupConfig={})),cc._RF.pop()},{}],Guns:[function(e,t,o){"use strict";cc._RF.push(t,"054bfjlEYREGJmkW9iT6Xlw","Guns"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PropBase"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ske=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.ske=this.getComponent(sp.Skeleton)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.ske.setSkin(("000"+(t-100)).substr(-3))},t.prototype.display=function(){var e=this;this._on_off=!1,this.node.active=!0,this.ske.setAnimation(0,"gun_002",!0),this.cd>0&&this.node.runAction(cc.sequence(cc.delayTime(this.cd-5),cc.callFunc(function(){e.ske.setAnimation(0,"gun",!0)}),cc.blink(5,25),cc.callFunc(function(){e.node.active=!1})))},__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./PropBase":"PropBase"}],HomeController:[function(e,t,o){"use strict";cc._RF.push(t,"66c32PpR9NFyZaVgsff9cCS","HomeController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{l(n.next(e))}catch(t){r(t)}}function c(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,c)}l((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return l([e,t])}}function l(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../framework/extend/Extend"),s=e("../../../framework/facade/Facade"),u=e("../../../framework/config/ExcelConfig"),d=e("../config/ExcelTableNames"),p=e("../entities/enemy/Enemy"),f=e("../../../framework/audio/Music"),h=e("../config/MusicPaths"),m=e("../info/World"),g=e("../../../framework/actions/Actions"),y=e("../game/GameProxy"),_=e("./WeaponLayerController"),v=e("../entities/bulletEmitter/BulletEmitter"),b=e("./AdManner"),E=cc._decorator,C=E.ccclass,w=E.property,x=!1,T=0,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startGameNode=null,t.weaponStartNode=null,t.roleHeadNode=null,t.enemyLayer=null,t.doorSke=null,t.bottomNode=null,t.centerNode=null,t.blockNode=null,t.bottomLayers=[],t.upIconNodes=[],t.weaponLayerController=null,t.propButtonNode=null,t.fightButtonNode=null,t.topNode=null,t.rightNode=null,t}var o;return i(t,e),o=t,t.prototype.onDestroy=function(){x=!0},t.prototype.onLoad=function(){var e=this;o.FristInter?b.default.showInterstitialAd():o.FristInter=!0,y.GameProxy.firstAidFlag=!0,this.weaponStartNode.active=!0,this.weaponStartNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.35,.91),cc.scaleTo(.35,1)))),this.weaponStartNode.active=!1,this.topNode.y=cc.view.getVisibleSize().height/2+250,this.rightNode.x=489,this.bottomNode.y=-this.bottomNode.height/2-cc.view.getVisibleSize().height/2,this.centerNode.x=-cc.view.getVisibleSize().width,this.blockNode.active=!0,this.upIconNodes.forEach(function(e){e.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,cc.v2(0,15)),cc.moveBy(.5,cc.v2(0,-15))))),e.active=!1});var t=u.ExcelConfig.getExcelTable(d.ExcelTableNames.StartEnemy).slice(0),n=cc.repeatForever(cc.sequence(cc.delayTime(0),cc.callFunc(function(){if(t.length>0){var o=t.shift(),n=o.id,i="prefab/entities/enemy/enemy"+n;cc.loader.loadRes(i,cc.Prefab,function(t,i){if(null==t){var r=cc.instantiate(i),a=r.getComponent(p.default);a.onLoad=function(){},a.start=function(){},a.onEnable=function(){},a.update=function(){},e.enemyLayer.addChild(r),a.init(n),a.stiff=!0,a.playWalk();var c=cc.v2(o.cd_sx,o.cd_sy),l=cc.v2(o.cd_ex,o.cd_ey),s=l.sub(c),u=90-cc.misc.radiansToDegrees(Math.atan2(s.y,s.x)),d=s.mag()/(15*a.moveSpeed);r.position=c,r.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){a.node.rotation=u}),cc.moveTo(d,l),cc.callFunc(function(){a.node.rotation=u+180}),cc.moveTo(d,c))))}})}else e.node.stopActionByTag(2583)})));n.setTag(2583),this.node.runAction(n),this.showUpIcon();for(var i=2,r=0,a=u.ExcelConfig.getExcelTable(d.ExcelTableNames.Weapon).filter(function(e){return 1!=e.id}).sort(function(e,t){return t.unlock-e.unlock});r<a.length;r++){var c=a[r];if(m.World.Storage.gameLevel>=c.unlock){i=c.id;break}}i>7&&(i=7),cc.loader.loadRes("prefab/entities/bullet/bullet"+i),i==v.default.TYPES.LiZiPao?cc.loader.loadRes("prefab/entities/bullet/bullet108"):i==v.default.TYPES.HuoJianTong?cc.loader.loadRes("prefab/entities/explosive/explosive9"):i==v.default.TYPES.JuJiQiang&&cc.loader.loadRes("prefab/entities/bullet/fire7")},t.prototype.start=function(){this.openDoor()},t.prototype.openDoor=function(){var e=this;console.log("openDoor.."),f.Music.setBgm(h.MusicPaths.HomeBg);var t="animation";x?t="opened":f.Music.playSFX("sound/msc_openDoor",2),this.doorSke.node.active=!0,this.doorSke.setCompleteListener(function(){e.playEntry()}),this.doorSke.setAnimation(0,t,!1)},t.prototype.playNodeAction=function(e){e.stopAllActions();var t=g.default.cycleAction(cc.rotateTo,0,0,8,180,8,0),o=g.default.cycleAction(cc.scaleTo,1,1,.1,1.25,0,0,.5);e.runAction(t),e.runAction(o)},t.prototype.playNodeActionStart=function(){var e=this;this.startGameNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.35,.91),cc.scaleTo(.35,1)))),this.schedule(function(){e.playNodeAction(e.propButtonNode)},3)},t.prototype.playEntry=function(){var e=this;console.log("playEntry...");var t=[],o=250+this.topNode.height/2;l.ext.isIphoneX&&(o+=66),t.push(this.topNode.runActionAwait(cc.moveBy(o/700,cc.v2(0,-o)))),t.push(this.rightNode.runActionAwait(cc.moveBy(200/700,cc.v2(-200,0)))),t.push(this.bottomNode.runActionAwait(cc.moveBy(this.bottomNode.height/700,cc.v2(0,this.bottomNode.height)))),t.push(this.centerNode.runActionAwait(cc.moveTo(cc.view.getVisibleSize().width/700,cc.v2(0,0)))),Promise.all(t).then(function(){return a(e,void 0,void 0,function(){var e,t,o,n,i,r,a,l,p,f,h=this;return c(this,function(){if(this.playNodeActionStart(),m.World.My.newbies.state("FirstEntryHome")||((e=new cc.Node).name="newbieNode",e.position=this.startGameNode.convertToWorldSpaceAR(cc.v2()),cc.director.getScene().addChild(e),t=cc.loader.getRes("prefab/guideCircle"),(o=cc.instantiate(t)).position=cc.v2(),e.addChild(o),n=cc.loader.getRes("prefab/guideSke"),(i=cc.instantiate(n)).position=cc.v2(),e.addChild(i)),this.blockNode.active=!1,!cc.director.getScene().getChildByName("newbieNode"))if(x&&T%3!=2)T++;else{for(T=0,r=!0,a=u.ExcelConfig.getExcelTable(d.ExcelTableNames.Prop).filter(function(e){return 7!=e.id&&8!=e.id&&10!=e.id&&0!=e.unlock}),l=0,p=a;l<p.length;l++)if(f=p[l],m.World.My.propInfo.beUsing(f.id)){r=!1;break}r&&(this.blockNode.active=!0,this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){s.default.executeCommand("OpenViewCommand","prefab/recommendProps"),h.blockNode.active=!1}))))}return[2]})})})},t.prototype.playExit=function(){this.blockNode.active=!0;var e=cc.director.getScene().getChildByName("newbieNode");e&&(e.destroy(),m.World.My.newbies.finish("FirstEntryHome")),s.default.executeCommand("LoadSceneCommand","GameScene")},t.prototype.onToggleEvent=function(e,t){var o=this;t=parseInt(t);for(var n=[],i=0;i<this.bottomLayers.length;i++){var r=this.bottomLayers[i];r.stopAllActions(),i!=t-1&&n.push(r.runActionAwait(cc.moveTo(Math.abs(r.y-r.height/2+this.bottomNode.height/2)/1200,cc.v2(0,-r.height/2+this.bottomNode.height/2))))}var a=this.bottomLayers[t-1],c=cc.v2(0,-a.height/2+this.bottomNode.height/2);e.isChecked&&(c.y=a.height/2+this.bottomNode.height/2,this.upIconNodes.forEach(function(e){return e.active=!1})),(2==t&&!e.isChecked||2!=t)&&(this.startGameNode.active=!0,this.weaponStartNode.active=!1),n.push(a.runActionAwait(cc.moveTo(Math.abs(c.y-a.y)/1200,c))),Promise.all(n).then(function(){if(console.log("finish."),e.isChecked?2==t&&(o.startGameNode.active=!1,o.weaponStartNode.active=!0):o.showUpIcon(),1==t){var n=cc.director.getScene().getChildByName("newbieNode");n&&(o.blockNode.active=!0,n.getChildByName("guideSke").active=!1,n.runAction(cc.sequence(cc.moveTo(.5,o.fightButtonNode.convertToWorldSpaceAR(cc.v2())),cc.callFunc(function(){o.blockNode.active=!1,n.getChildByName("guideSke").active=!0}))))}})},t.prototype.showUpIcon=function(){this.upIconNodes.forEach(function(e){return e.active=!0});var e=u.ExcelConfig.getExcelTable(d.ExcelTableNames.Weapon),t=e[0],o=u.ExcelConfig.getExcelTable(d.ExcelTableNames.WeaponUp),n=m.World.Storage.HpLv<t.lv_limit&&m.World.Storage.goldCount>=o[m.World.Storage.HpLv-1].life_expend,i=m.World.Storage.ADLv<t.lv_limit&&m.World.Storage.goldCount>=o[m.World.Storage.ADLv-1].life_expend;this.upIconNodes[0].active=n||i,this.upIconNodes[1].active=!1;for(var r=1;r<e.length;r++){var a=e[r],c=m.World.Storage.gameLevel<a.unlock,l=m.World.My.armory.levelOfEmitterFirePower(a.id),s=l<a.lv_limit&&m.World.Storage.goldCount>=o[l-1].fire_expend,p=m.World.My.armory.levelOfEmitterPower(a.id),f=p<a.lv_limit&&m.World.Storage.goldCount>=o[p-1].power_expend;if(!c&&(s||f)){this.upIconNodes[1].active=!0;break}}var h=u.ExcelConfig.getExcelTable(d.ExcelTableNames.GoldUp),g=m.World.Storage.goldLv<h.length&&m.World.Storage.goldCount>=h[m.World.Storage.goldLv-1].gvalue_expend,y=m.World.Storage.dayEarnLv<h.length&&m.World.Storage.goldCount>=h[m.World.Storage.dayEarnLv-1].on_hook_expend;this.upIconNodes[2].active=g||y},t.prototype.onTouchBG=function(){this.weaponStartNode.active||(cc.director.getScene().getChildByName("newbieNode")?this.playExit():s.default.executeCommand("OpenViewCommand","prefab/recommend"))},t.prototype.onClickWeaponStart=function(){var e=this;b.default.showVideo(function(t){t&&(y.GameProxy.prepareGun=e.weaponLayerController.focusGunID(),e.playExit())})},t.FristInter=!1,r([w(cc.Node)],t.prototype,"startGameNode",void 0),r([w(cc.Node)],t.prototype,"weaponStartNode",void 0),r([w(cc.Node)],t.prototype,"roleHeadNode",void 0),r([w(cc.Node)],t.prototype,"enemyLayer",void 0),r([w(sp.Skeleton)],t.prototype,"doorSke",void 0),r([w(cc.Node)],t.prototype,"bottomNode",void 0),r([w(cc.Node)],t.prototype,"centerNode",void 0),r([w(cc.Node)],t.prototype,"blockNode",void 0),r([w([cc.Node])],t.prototype,"bottomLayers",void 0),r([w([cc.Node])],t.prototype,"upIconNodes",void 0),r([w(_.default)],t.prototype,"weaponLayerController",void 0),r([w(cc.Node)],t.prototype,"propButtonNode",void 0),r([w(cc.Node)],t.prototype,"fightButtonNode",void 0),r([w(cc.Node)],t.prototype,"topNode",void 0),r([w(cc.Node)],t.prototype,"rightNode",void 0),o=r([C],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../../framework/actions/Actions":"Actions","../../../framework/audio/Music":"Music","../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../../../framework/facade/Facade":"Facade","../config/ExcelTableNames":"ExcelTableNames","../config/MusicPaths":"MusicPaths","../entities/bulletEmitter/BulletEmitter":"BulletEmitter","../entities/enemy/Enemy":"Enemy","../game/GameProxy":"GameProxy","../info/World":"World","./AdManner":"AdManner","./WeaponLayerController":"WeaponLayerController"}],HttpClient:[function(e,t,o){"use strict";cc._RF.push(t,"0d6301Fqh9AaZzazi2zgka+","HttpClient"),Object.defineProperty(o,"__esModule",{value:!0}),o.HttpClient=void 0;var n=e("./HttpOption"),i=e("../../script/app/config/NetworkConfig"),r=cc._decorator,a=(r.ccclass,r.property,new Map),c=new n.HttpOption;c.host=i.NetworkConfig.host,c.port=443,c.timeout=18e3,c.cookieKey="vertx-cookie","undefined"==typeof FormData&&c.headers.set("content-type","application/x-www-form-urlencoded");var l=function(){function e(){}return e.deleteCookie=function(e){a.delete(e)},e.get=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,this.send("GET",e,t)]})})},e.post=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,this.send("POST",e,t)]})})},e.send=function(t,o,n){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(){return[2,new Promise(function(r,c){return __awaiter(i,void 0,void 0,function(){var i,l,s,u,d;return __generator(this,function(){return i=n||e.defaultHttpOption,(l=new XMLHttpRequest).timeout=i.timeout,l.ontimeout=function(e){console.log(e,"ontimeout..."),c({message:"\u7f51\u7edc\u8d85\u65f6",status:1,protocol:o})},l.onerror=function(e){console.log(e,"onerror..."),"undefined"!=typeof wx&&-1!==e.indexOf("timeout")?c({message:"\u7f51\u7edc\u8d85\u65f6",status:1,protocol:o}):c({message:"\u7f51\u7edc\u9519\u8bef",status:1,protocol:o})},l.onloadend=function(e){if(4==l.readyState)if(i.cookieKey&&!a.get(i.cookieKey)&&a.set(i.cookieKey,l.getResponseHeader(i.cookieKey)),200===l.status)try{o.decode(l.responseText),r(o.getResponseData())}catch(e){c({message:"\u670d\u52a1\u5668\u72b6\u6001\u51fa\u9519==>"+o.getResponseMessage(),status:200,protocol:o})}else{if(0==l.status&&e.timeStamp&&e.timeStamp>l.timeout)return;var t;t=0===l.status?"\u7f51\u7edc\u5f02\u5e38":"\u670d\u52a1\u5668\u5f02\u5e38",c({message:t,status:l.status,protocol:o})}},s=i.host,80!=i.port&&443!=i.port&&(s+=":"+i.port),s+=o.uri,l.open(t,s),i.cookieKey&&null!=(u=a.get(i.cookieKey))&&l.setRequestHeader(i.cookieKey,u),i.headers.forEach(function(e,t){return l.setRequestHeader(t,e)}),d=o.encode(),l.send(d),[2]})})})]})})},e.defaultHttpOption=c,e}();o.HttpClient=l,cc._RF.pop()},{"../../script/app/config/NetworkConfig":"NetworkConfig","./HttpOption":"HttpOption"}],HttpOption:[function(e,t,o){"use strict";cc._RF.push(t,"9aa190e59hJS45MuYWui0Ak","HttpOption"),Object.defineProperty(o,"__esModule",{value:!0}),o.HttpOption=void 0;o.HttpOption=function(){this.host=null,this.port=null,this.timeout=null,this.cookieKey=null,this.headers=new Map},cc._RF.pop()},{}],HttpProtocol:[function(e,t,o){"use strict";cc._RF.push(t,"ce99fMxrOJCPI2VBILKV/GL","HttpProtocol"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.uri=null,this.request={},this.response=null}return e.prototype.getResponseStatus=function(){return this.response.status},e.prototype.getResponseData=function(){return this.response.data},e.prototype.getResponseMessage=function(){return this.response.message},e.prototype.encode=function(){console.log(">>>>\u53d1\u53d1\u53d1\u53d1\u53d1\u53d1==="+this.uri,this.request);var e=null;if("function"==typeof FormData){var t=new FormData;for(var o in this.request)"function"!=typeof this.request[o]&&t.append(o,this.request[o]);e=t}else{var n=[],i=0;for(var o in this.request)"function"!=typeof this.request[o]&&(n[i]=encodeURIComponent(o)+"="+encodeURIComponent(this.request[o]),i++);e=n.join("&")}return e},e.prototype.decode=function(e){if(this.response=JSON.parse(e),console.log("<<<<\u6536\u6536\u6536\u6536\u6536\u6536==="+this.uri,e),0!=this.response.status)throw this.response},e}();o.default=n,cc._RF.pop()},{}],ICommand:[function(e,t,o){"use strict";cc._RF.push(t,"f2c54BXBTlBn4fPXf6TacFb","ICommand"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IConverter:[function(e,t,o){"use strict";cc._RF.push(t,"9d93bWtokZFdpeixHUZwVgA","IConverter"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator;n.ccclass,n.property,cc._RF.pop()},{}],ImpenetrableDefence:[function(e,t,o){"use strict";cc._RF.push(t,"4cfaeeoywhMBKH2pNDKPKw0","ImpenetrableDefence"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/GameProxy"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ske=null,t.followNode=null,t.rotateAction=null,t._impenetrableDefenceCD=0,t._defenceCD=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.followNode.on(cc.Node.EventType.POSITION_CHANGED,function(){e.node.position=e.followNode.position}),this.ske.setCompleteListener(function(t){var o=t.animation?t.animation.name:"";"start"==o?(e.ske.setAnimation(0,"loops",!0),e.rotateAction=cc.speed(cc.repeatForever(cc.rotateBy(.45,360)),0),e.rotateAction.setTag(140),e.node.runAction(e.rotateAction)):"transition"==o&&e.ske.setAnimation(0,"loops",!0)})},t.prototype.start=function(){this.node.position=this.followNode.position},Object.defineProperty(t.prototype,"impenetrableDefenceCD",{set:function(e){this._impenetrableDefenceCD=e,this.node.active||(this.node.active=!0,this.node.stopAllActions(),this.ske.setAnimation(0,"start",!1))},enumerable:!1,configurable:!0}),t.prototype.defence=function(){"loops"==this.ske.animation&&this.ske.setAnimation(0,"transition",!1)},t.prototype.update=function(e){if(!n.GameProxy.pauseGame){if(this.node.color.getR()<255&&this.node.color.setR(this.node.color.getR()+1),this.node.color.getG()<255&&this.node.color.setG(this.node.color.getG()+1),this.node.color.getB()<255&&this.node.color.setB(this.node.color.getB()+1),"loops"===this.ske.animation)if(this._defenceCD>0)this._defenceCD-=e;else if(this.rotateAction.getSpeed()<1){var t=this.rotateAction.getSpeed()+.01;t>1&&(t=1),this.rotateAction.setSpeed(t)}this._impenetrableDefenceCD-=e,this._impenetrableDefenceCD<=0&&(this.node.active=!1)}},__decorate([a(sp.Skeleton)],t.prototype,"ske",void 0),__decorate([a(cc.Node)],t.prototype,"followNode",void 0),__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../game/GameProxy":"GameProxy"}],Interceptor:[function(e,t,o){"use strict";cc._RF.push(t,"e5d01V2r2VHM5KPSwqwyJKc","Interceptor"),Object.defineProperty(o,"__esModule",{value:!0}),o.Interceptor=void 0;var n=new Map,i=function(){function e(){}return e.register=function(e,t){var o;o="function"==typeof t?t:t.constructor;var n=this.interceptorsOf(e);n.every(function(e){return e.constructor!=o})&&("function"==typeof t?n.push(new t):n.push(t))},e.unregister=function(e,t){var o,i=this.interceptorsOf(e);o="function"==typeof t?t:t.constructor;var r=i.filter(function(e){return e.constructor!=o});n.set(e,r)},e.interceptorsOf=function(e){var t=n.get(e);return void 0===t&&(t=[],n.set(e,t)),t},e}();o.Interceptor=i,cc._RF.pop()},{}],InviteConfig:[function(e,t,o){"use strict";cc._RF.push(t,"0b4bf370PJHSbsNEq/dqeAY","InviteConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.InviteConfig=void 0;var n=function(){function e(){}return e.datas=[{icon:"WhackZombies/001.jpg",title:"\u672b\u65e5 \u5e9f\u571f \u4e27\u5c38 \u548c\u6210\u4e3a\u8d85\u7ea7\u6218\u58eb\u7684\u4f60\uff01"}],e}();o.InviteConfig=n,cc._RF.pop()},{}],InviteItem:[function(e,t,o){"use strict";cc._RF.push(t,"618ecW0IVZD/IS6hmiplscv","InviteItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/tableview/AbstractTableItem"),i=e("../../../framework/extend/Extend"),r=e("../network/Network"),a=e("../info/World"),c=e("../../../framework/facade/Facade"),l=cc._decorator,s=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idLabel=null,t.iconSprite=null,t.rewardLabel=null,t.takenNode=null,t.willTakeNode=null,t.data=null,t}return __extends(t,e),t.prototype.upadteItem=function(e,t){console.log(e,"share1===>upadteItem"),this.data=e,this.idLabel.string=(t+1).toString(),this.rewardLabel.string=30..toString(),i.ext.wxCreateImageToSprite(this.iconSprite,e.headUrl),this.takenNode.active=e.receive,this.willTakeNode.active=!this.takenNode.active},t.prototype.onClickTakeReward=function(){var e=this;this.data&&(this.willTakeNode.getComponent(cc.Button).interactable=!1,r.default.takeShareReward("share1",this.data.playerId).then(function(){a.World.Storage.diamondCount+=30,c.default.executeCommand("ShowTipsCommand","\u94bb\u77f3 +30"),e.takenNode.active=!0,e.willTakeNode.active=!e.takenNode.active}))},__decorate([u(cc.Label)],t.prototype,"idLabel",void 0),__decorate([u(cc.Sprite)],t.prototype,"iconSprite",void 0),__decorate([u(cc.Label)],t.prototype,"rewardLabel",void 0),__decorate([u(cc.Node)],t.prototype,"takenNode",void 0),__decorate([u(cc.Node)],t.prototype,"willTakeNode",void 0),__decorate([s],t)}(n.default);o.default=d,cc._RF.pop()},{"../../../framework/extend/Extend":"Extend","../../../framework/facade/Facade":"Facade","../../../framework/tableview/AbstractTableItem":"AbstractTableItem","../info/World":"World","../network/Network":"Network"}],InvitesController:[function(e,t,o){"use strict";cc._RF.push(t,"0e6831yPJtIjo1qDNuGnPS0","InvitesController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/tableview/TableViewMediator"),i=e("../config/NetworkConfig"),r=e("../network/Network"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tableviewMediator=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;i.NetworkConfig.connectServer&&r.default.getShareList("share1").then(function(t){console.log(t,"share1===>"),e.tableviewMediator.datas=t})},__decorate([l(n.default)],t.prototype,"tableviewMediator",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../framework/tableview/TableViewMediator":"TableViewMediator","../config/NetworkConfig":"NetworkConfig","../network/Network":"Network"}],JackpotController:[function(e,t,o){"use strict";cc._RF.push(t,"4df4e9sTVZId7fiAYzaOydn","JackpotController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../info/World"),i=e("../../../framework/config/ExcelConfig"),r=e("../config/ExcelTableNames"),a=e("../../../framework/extend/Extend"),c=e("../config/NetworkConfig"),l=e("../network/Network"),s=e("../../../framework/facade/Facade"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.goldLabel=null,t.takeLabel=null,t.button=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.progressBar.node.active=!1,this.goldLabel.node.active=!1,this.takeLabel.node.active=!1,s.default.canvasNode.on("TakeJackpot",this._takeIt,this),this.init()},t.prototype.onDestroy=function(){s.default.canvasNode.off("TakeJackpot",this._takeIt,this)},t.prototype.init=function(){var e=this;this.scheduleOnce(function(){e.goldLabel.node.active=!0,0==n.World.Storage.dayEarnTotalModifyTime&&(n.World.Storage.dayEarnTotalModifyTime=n.World.My.serverTime),0==n.World.Storage.dayEarnExpireTime&&(n.World.Storage.dayEarnExpireTime=n.World.My.serverTime+864e5),e.schedule(function(){e.updateDayEarnCD()},0),e.updateDayEarnCD()},.1)},t.prototype.updateDayEarnCD=function(){var e=n.World.My.serverTime,t=(n.World.Storage.dayEarnExpireTime-e)/1e3,o=0;t>0?(o=(864e5-1e3*t)/864e5)>1&&(o=1):o=1,this.progressBar.node.active=o<1;var c=i.ExcelConfig.getExcelTable(r.ExcelTableNames.GoldUp)[n.World.Storage.dayEarnLv-1].on_hook,l=(n.World.My.serverTime-n.World.Storage.dayEarnTotalModifyTime)/1e3,s=Math.floor(l/3)*c;s>0&&(n.World.Storage.dayEarnTotal+=s),this.goldLabel.string=a.ext.shortFormat(n.World.Storage.dayEarnTotal),this.button.interactable=n.World.Storage.dayEarnTotal>0,this.takeLabel.node.active=n.World.Storage.dayEarnTotal>0,this.progressBar.progress=l%3/3},t.prototype._takeIt=function(e){n.World.Storage.goldCount+=n.World.Storage.dayEarnTotal*e,s.default.executeCommand("ShowTipsCommand","\u91d1\u5e01 +"+a.ext.shortFormat(n.World.Storage.dayEarnTotal*e)),n.World.Storage.dayEarnTotal=0,n.World.Storage.dayEarnExpireTime=n.World.My.serverTime+864e5,this.updateDayEarnCD(),c.NetworkConfig.connectServer&&l.default.pushStorage()},__decorate([p(cc.ProgressBar)],t.prototype,"progressBar",void 0),__decorate([p(cc.Label)],t.prototype,"goldLabel",void 0),__decorate([p(cc.Label)],t.prototype,"takeLabel",void 0),__decorate([p(cc.Button)],t.prototype,"button",void 0),__decorate([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../../../framework/facade/Facade":"Facade","../config/ExcelTableNames":"ExcelTableNames","../config/NetworkConfig":"NetworkConfig","../info/World":"World","../network/Network":"Network"}],JsonConverter:[function(e,t,o){"use strict";cc._RF.push(t,"6ad4356PtNOWakao1ECJinM","JsonConverter"),Object.defineProperty(o,"__esModule",{value:!0}),o.JsonConverter=void 0;var n=function(){function e(){}return e.prototype.encode=function(){var e={};for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},e.prototype.decode=function(e){for(var t in"string"==typeof e&&(e=JSON.parse(e)),this)if("function"!=typeof this[t]){if(void 0===e[t])throw this.constructor.name+".decode data not found attr===>"+t;this[t]=e[t]}return this},e}();o.JsonConverter=n,cc._RF.pop()},{}],KVData:[function(e,t){"use strict";cc._RF.push(t,"446d6qbT8lCkZgFb1DEDrEV","KVData"),cc._RF.pop()},{}],LifeCycle:[function(e,t,o){"use strict";cc._RF.push(t,"a7c48jInGlJw7oRhT15QWXk","LifeCycle"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.prototype.addCall=function(e,t,o){var n=this[e];this[e]=function(){n&&n(),o?t.call(o):t()}},t.onDestroyFollow=function(e,t){t.addComponent(o).addCall("onDestroy",function(){e.isValid&&e.destroy()})},t.onDisableFollow=function(e,t){t.addComponent(o).addCall("onDisable",function(){e.active=!1})},t.onEnableFollow=function(e,t){t.addComponent(o).addCall("onEnable",function(){e.active=!0})},o=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],Lightning:[function(e,t,o){"use strict";cc._RF.push(t,"b12ccGunt9H9pBPDrPhutA1","Lightning"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ske=null,t.lightEnemys=[],t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.ske.setCompleteListener(function(t){t.animation&&t.animation.name,e.node.active=!1,e.lightEnemys.length})},t.prototype.joint=function(e){this.lightEnemys.push(e);var t=e.node.position.sub(this.node.position),o=t.mag();this.node.rotation=90-cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),this.node.scaleY=o/375,this.node.active=!0,this.ske.setAnimation(0,"animation",!1)},__decorate([r(sp.Skeleton)],t.prototype,"ske",void 0),__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],LoadSceneCommand:[function(e,t,o){"use strict";cc._RF.push(t,"4fde6oupepCYrYBAsbalMnm","LoadSceneCommand");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{l(n.next(e))}catch(t){r(t)}}function c(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,c)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return l([e,t])}}function l(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.getCurrentSceneName=void 0;var a=e("./Facade"),c=cc._decorator,l=c.ccclass,s=(c.property,"WelcomeScene"),u=null,d=function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,void 0,Promise,function(){var t=this;return r(this,function(){return[2,new Promise(function(o){return i(t,void 0,void 0,function(){var t,n,i,c;return r(this,function(r){switch(r.label){case 0:return t=e[0],console.log(t,"sceneName."),null==u&&((u=new cc.Node).zIndex=cc.macro.MAX_ZINDEX,u.addComponent(cc.BlockInputEvents),u.setContentSize(cc.view.getVisibleSize()),u.setPosition(cc.view.getViewportRect().center),u.setParent(a.default.canvasNode),(n=u.addComponent(cc.Label)).node.addComponent(cc.LabelOutline),n.string="Loading...",n.fontSize=36,n.overflow=cc.Label.Overflow.RESIZE_HEIGHT),u.active=!0,[4,cc.loader.loadResAwait("prefab/"+t,cc.Prefab)];case 1:return i=r.sent(),console.log("\u52a0\u8f7d\u573a\u666f\u6210\u529f",t),a.default.canvasNode.children.filter(function(e){return null==e.getComponent(cc.Camera)}).forEach(function(e){e.destroy()}),console.log("\u6e05\u7406\u573a\u666f\u6210\u529f."),u.active=!1,(c=cc.instantiate(i)).setParent(a.default.canvasNode),s=t,console.log("\u521b\u5efa\u573a\u666f\u6210\u529f.",t),o(c),[2]}})})})]})})},n([l("LoadSceneCommand")],e)}();o.default=d,o.getCurrentSceneName=function(){return s},cc._RF.pop()},{"./Facade":"Facade"}],LoadSceneIntercetor:[function(e,t,o){"use strict";cc._RF.push(t,"852b8t92dhL855GnoTwHCmW","LoadSceneIntercetor"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/facade/Facade"),i=e("../config/MusicPaths"),r=e("../../../framework/audio/Music"),a=e("../config/NetworkConfig"),c=e("../network/Network"),l=cc._decorator,s=l.ccclass,u=(l.property,function(){function e(){}return e.prototype.preHandle=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o){return __awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return"GameScene"!=(t=e[0])?[3,2]:[4,n.default.executeCommand("PreloadGameSceneCommand")];case 1:return i.sent(),[3,3];case 2:"HomeScene"==t&&a.NetworkConfig.connectServer&&c.default.pushStorage(),i.label=3;case 3:return o(!0),[2]}})})})]})})},e.prototype.postHandle=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return __awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(o){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(){return"HomeScene"==(e=t[0])||"GameScene"==e&&r.Music.setBgm(i.MusicPaths.GameBg),o(),[2]})})})]})})},__decorate([s],e)}());o.default=u,cc._RF.pop()},{"../../../framework/audio/Music":"Music","../../../framework/facade/Facade":"Facade","../config/MusicPaths":"MusicPaths","../config/NetworkConfig":"NetworkConfig","../network/Network":"Network"}],LoadingCommand:[function(e,t,o){"use strict";cc._RF.push(t,"ec9e9EHzntFyYuA7kcVJd7f","LoadingCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/facade/Facade"),i=e("../../../framework/config/ExcelConfig"),r=cc._decorator,a=r.ccclass,c=(r.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){console.log("LoadingCommand===>xxx");var t=[];t.push(i.ExcelConfig.loadAllExcel("data/"));for(var o=0;o<8;o++)t.push(cc.loader.loadResAwait("prefab/entities/enemy/enemy"+(o+1),cc.Prefab));t.push(cc.loader.loadResAwait("prefab/guideCircle")),t.push(cc.loader.loadResAwait("prefab/guideSke")),t.push(n.default.initSeparationLayer("prefab/separationLayer")),t.push(n.default.initTextTips("prefab/textTips")),t.push(n.default.initTextTips("prefab/color")),t.push(cc.loader.loadResAwait("frame_fy005",cc.SpriteFrame)),t.push(cc.loader.loadResDirAwait("sound/")),cc.loader.loadRes("prefab/exchange"),cc.loader.loadRes("prefab/friendRank"),cc.loader.loadRes("prefab/invites"),cc.loader.loadRes("prefab/props"),cc.loader.loadRes("prefab/roleSupply"),cc.loader.loadRes("prefab/settings"),cc.loader.loadRes("prefab/takeJackpot"),cc.loader.loadRes("prefab/tips"),cc.loader.loadRes("prefab/recommend"),Promise.all(t).then(function(){console.log("\u52a0\u8f7d\u5b8c\u6210..."),cc.sys.garbageCollect(),e()}).catch(function(e){console.error(e)})})]})})},__decorate([a("LoadingCommand")],e)}());o.default=c,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/facade/Facade":"Facade"}],LocalStorageKeys:[function(e,t,o){"use strict";cc._RF.push(t,"c2610q2qXFMkpceJwMl/oK9","LocalStorageKeys"),Object.defineProperty(o,"__esModule",{value:!0}),o.localStorageKeys=void 0,(o.localStorageKeys||(o.localStorageKeys={})).gameBG="gameBG",cc._RF.pop()},{}],LocalStorage:[function(e,t,o){"use strict";cc._RF.push(t,"0eb5f782MZHjINkdZwIcuag","LocalStorage"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStorage=void 0;var n=function(){function e(){}return e.get=function(e){return cc.sys.localStorage.getItem(this.prefix+e)},e.set=function(e,t){cc.sys.localStorage.setItem(this.prefix+e,t)},e.getNumber=function(e){var t=this.get(e);return null==t?null:parseInt(t)},e.setNumber=function(e,t){this.set(e,t)},e.getBoolean=function(e){return!!this.getNumber(e)},e.setBoolean=function(e,t){var o=0;t&&(o=1),this.set(e,o)},e.getString=function(e){return this.get(e)},e.setString=function(e,t){this.set(e,t)},e.getObject=function(e,t){var o=this.get(e);return o?(t.decode(JSON.parse(o)),t):null},e.setObject=function(e,t){var o=t.encode();"object"==typeof o&&(o=JSON.stringify(o)),this.set(e,o)},e.prefix="",e}();o.LocalStorage=n,cc._RF.pop()},{}],LooseQuadTreeCell:[function(e,t,o){"use strict";cc._RF.push(t,"87e35DEagBNP5N9xxZ6MiIk","LooseQuadTreeCell"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LooseQuadTree"),i=function(){function e(e,t,o,n){var i=this;this.level=0,this.index=0,this.bounds=null,this.looseBounds=null,this.parent=null,this.children=null,this._objects=[],this._objectCount=0,this.level=e,this.index=t,this.bounds=o,this.looseBounds=cc.rect(o.xMin-o.width/2,o.yMin-o.height/2,2*o.width,2*o.height),this.children=n,this.children.forEach(function(e){return e.parent=i})}return Object.defineProperty(e.prototype,"objectCount",{get:function(){return this._objectCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"objects",{get:function(){return this._objects},enumerable:!1,configurable:!0}),e.prototype.removeObject=function(e){var t=this._objects.indexOf(e);if(t<0)console.error("remove not found cell==> level="+e.level+" index="+e.index);else{this._objects.splice(t,1),e.index=-1,e.level=-1;for(var o=this;o;)o._objectCount--,o=o.parent}},e.prototype.addObject=function(e){this._objects.push(e),e.index=this.index,e.level=this.level;for(var t=this;t;)t._objectCount++,t=t.parent},e.prototype.retrieve=function(e,t){this._objectCount>0&&this.looseBounds.intersects(e)&&(n.default.retrieveCount++,this._objects.length>0&&t.push.apply(t,this._objects),this.children.forEach(function(o){o._objectCount>0&&o.retrieve(e,t)}))},e}();o.default=i,cc._RF.pop()},{"./LooseQuadTree":"LooseQuadTree"}],LooseQuadTree:[function(e,t,o){"use strict";cc._RF.push(t,"5b330tmq8ZCMJpbBrEz7uMo","LooseQuadTree");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./LooseQuadTreeCell"),c=cc._decorator,l=c.ccclass,s=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minSideLength=10,t._grids=[],t._graphic=null,t}var o;return i(t,e),o=t,t.prototype.init=function(){for(var e=Math.max(this.node.width,this.node.height),t=Math.ceil(Math.log2(e/this.minSideLength)),o=-e/2,n=e/2,i=Math.pow(2,t),r=t-1;r>=0;r--){this._grids[r]=[];for(var c=e/(i/=2),l=0;l<i;l++)for(var s=0;s<i;s++){var u=cc.rect(o+c*s,n-(l+1)*c,c,c),d=[];if(r<t-1)for(var p=2*i,f=0;f<2;f++)for(var h=0;h<2;h++)d.push(this._grids[r+1][(2*l+f)*p+2*s+h]);var m=l*i+s;this._grids[r][m]=new a.default(r,m,u,d)}}},t.prototype.updateCell=function(e){var t=this;e.objectCount>0&&(e.objects.forEach(function(e){return t.updateRegion(e)}),e.children.forEach(function(e){e.objectCount>0&&t.updateCell(e)}))},t.prototype.updateAll=function(){this.updateCell(this._grids[0][0])},t.prototype.updateRegion=function(e){if(e.level<0||e.index<0)return console.error("remove fail==>level="+e.level+" index="+e.index),!1;var t=e.aabb(),o=this._grids[0][0],n=e.level,i=this._grids[n][0].bounds.width,r=Math.pow(2,n),a=Math.floor((t.center.x-o.bounds.xMin)/i),c=Math.floor((o.bounds.yMax-t.center.y)/i)*r+a;return c!=e.index&&(this._grids[e.level][e.index].removeObject(e),this._grids[n][c].addObject(e)),!0},t.prototype.insert=function(e){if(e.index>=0||e.level>=0)return console.error("\u5df2\u7ecf\u5206\u914d\u7a7a\u95f4level="+e.level+" index="+e.index),!1;var t=e.aabb(),o=Math.max(t.width,t.height),n=this._grids[0][0],i=n.bounds.width;if(o>i)return console.error("region rect too big, can not insert it"),null;var r=Math.floor(Math.log2(i/o));r>this._grids.length-1&&(r=this._grids.length-1,console.warn("Maybe this item is too small, but we can add it to max level.",i,o,r,this._grids.length,e.node.name));var a=this._grids[r][0].bounds.width,c=Math.pow(2,r),l=Math.floor((t.center.x-n.bounds.xMin)/a),s=Math.floor((n.bounds.yMax-t.center.y)/a)*c+l;return this._grids[r][s].addObject(e),!0},t.prototype.remove=function(e){return e.level<0||e.index<0?(console.error("remove fail==>level="+e.level+" index="+e.index),!1):(this._grids[e.level][e.index].removeObject(e),!0)},t.prototype.retrieve=function(e,t){o.retrieveCount=0,this._grids[0][0].retrieve(e,t)},t.prototype.test=function(e){var t=this._graphic;t.clear();var o=[];this.retrieve(e,o),o.forEach(function(e){var o=e.aabb();t.rect(o.xMin,o.yMin,o.width,o.height)}),t.stroke()},t.prototype.onLoad=function(){this.init();var e=new cc.Node;this.node.addChild(e);var t=e.addComponent(cc.Graphics);t.strokeColor=cc.Color.RED,t.lineWidth=20,e.zIndex=100,this._graphic=t},t.retrieveCount=0,r([s({tooltip:"\u6700\u5c0f\u7269\u4f53\u8fb9\u957f"})],t.prototype,"minSideLength",void 0),o=r([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./LooseQuadTreeCell":"LooseQuadTreeCell"}],MusicPaths:[function(e,t,o){"use strict";cc._RF.push(t,"191c6z1J6lMp4PCBdsWPXAH","MusicPaths"),Object.defineProperty(o,"__esModule",{value:!0}),o.MusicPaths=void 0,function(e){e.HomeBg="sound/msc_fly",e.GameBg="sound/bgm",e.ClickUI="sound/ui_click"}(o.MusicPaths||(o.MusicPaths={})),cc._RF.pop()},{}],Music:[function(e,t,o){"use strict";cc._RF.push(t,"5ad67KpxH1DUaUccHBNSBaw","Music"),Object.defineProperty(o,"__esModule",{value:!0}),o.Music=void 0;var n=e("../persistence/LocalStorage"),i=cc._decorator,r=(i.ccclass,i.property,function(){function e(){}return e.init=function(){e.setMusicOpen(!n.LocalStorage.getBoolean("musicOpen")),e.sfxOpen=!n.LocalStorage.getBoolean("sfxOpen")},e.persistence=function(){n.LocalStorage.setBoolean("musicOpen",!this._musicOpen),n.LocalStorage.setBoolean("sfxOpen",!this.sfxOpen)},e.setBgmVolume=function(e){this._bgmVolume=e,this.updateVolue()},e.getBgmVolume=function(){return this._bgmVolume},e.updateVolue=function(){this.bgmAudioID>0&&cc.audioEngine.setVolume(this.bgmAudioID,this._bgmVolume)},e.setMusicOpen=function(e){this._musicOpen=e,e?(this.playBGM(),this.updateVolue()):this.stopBGM()},e.getMusicOpen=function(){return this._musicOpen},e.setBgm=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this._bgmPath=e,this.playBGM(),[2]})})},e.playBGM=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return 1==this._musicOpen&&this._bgmPath?[4,cc.loader.loadResAwait(this._bgmPath,cc.AudioClip)]:[3,2];case 1:e=t.sent(),this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(e,!0,this._bgmVolume),t.label=2;case 2:return[2]}})})},e.stopBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID)},e.playSFX=function(e,t){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(n){switch(n.label){case 0:return 1!=this.sfxOpen?[3,4]:(o=null,"string"!=typeof e?[3,2]:[4,cc.loader.loadResAwait(e,cc.AudioClip)]);case 1:return o=n.sent(),[3,3];case 2:o=e,n.label=3;case 3:return[2,cc.audioEngine.play(o,!1,t||this.sfxVolume)];case 4:return[2]}})})},e.pauseAll=function(){cc.audioEngine.pauseAll()},e.resumeAll=function(){cc.audioEngine.resumeAll()},e.stopAll=function(){cc.audioEngine.stopAll()},e._bgmVolume=.7,e.sfxVolume=1,e._musicOpen=!0,e.sfxOpen=!0,e._bgmPath=null,e.bgmAudioID=-1,e}());o.Music=r,cc._RF.pop()},{"../persistence/LocalStorage":"LocalStorage"}],NetworkConfig:[function(e,t,o){"use strict";cc._RF.push(t,"1cfcd2hmxdBN5+omE1y+zAv","NetworkConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.NetworkConfig=void 0;var n=function(){function e(){}return e.connectServer=!1,e.host="https://x.xxx.com",e}();o.NetworkConfig=n,cc._RF.pop()},{}],Network:[function(e,t,o){"use strict";cc._RF.push(t,"f782cknxKBOBY6HpYDQ16Ji","Network"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../info/World"),i=e("../config/AppConfig"),r=e("../../../framework/http/HttpProtocol"),a=e("../../../framework/http/HttpClient"),c=e("../../../framework/persistence/LocalStorage"),l=e("../../../framework/facade/Facade"),s=e("../config/NetworkConfig"),u=function(){function e(){}return e.post=function(t,o){return __awaiter(this,void 0,Promise,function(){var n=this;return __generator(this,function(){return[2,new Promise(function(i,r){return __awaiter(n,void 0,void 0,function(){var n,c;return __generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,11]),[4,a.HttpClient.post(t)];case 1:return c=s.sent(),i(c),[3,11];case 2:return n=s.sent(),console.log(n,"\u7f51\u7edc\u51fa\u9519\u4e86\u2026\u2026\u2026\u2026"),0!=n.status?[3,3]:(l.default.executeCommand("ShowTipsCommand",n.message+":\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5"),[3,10]);case 3:return 1!=n.status?[3,4]:(l.default.executeCommand("ShowTipsCommand",n.message+":uri="+n.protocol.uri),[3,10]);case 4:return 200!=n.status?[3,9]:-2!=n.protocol.getResponseStatus()?[3,7]:[4,e.login()];case 5:return s.sent(),[4,e.post(n.protocol,o)];case 6:return c=s.sent(),i(c),[2];case 7:l.default.executeCommand("ShowTipsCommand",n.message+":uri="+n.protocol.uri+" status="+n.protocol.getResponseStatus()),s.label=8;case 8:return[3,10];case 9:l.default.executeCommand("ShowTipsCommand",n.message+":uri="+n.protocol.uri+" status="+n.status),s.label=10;case 10:return r(n),[3,11];case 11:return[2]}})})})]})})},e.login=function(){return __awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(t){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(){return t(),[2]})})})]})})},e.uploadInfo=function(){return __awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(t){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(){return t(),[2]})})})]})})},e.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return s.NetworkConfig.connectServer?[4,e.initGameData()]:[3,2];case 1:return t.sent(),[3,3];case 2:n.World.Storage.init(),t.label=3;case 3:return[2]}})})},e.uploadLv=function(t){return __awaiter(this,void 0,Promise,function(){var o=this;return __generator(this,function(){return[2,new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return(o=new r.default).uri="/game/addRecord",o.request={gameId:i.AppConfig.GameID,key:i.AppConfig.rankKey,score:t},[4,e.post(o)];case 1:return a.sent(),this.pushStorage(),n(),[2]}})})})]})})},e.buyItem=function(t,o){return void 0===o&&(o=1),__awaiter(this,void 0,Promise,function(){var n=this;return __generator(this,function(){return[2,new Promise(function(i){return __awaiter(n,void 0,void 0,function(){var n;return __generator(this,function(a){switch(a.label){case 0:return(n=new r.default).uri="/game/mall/buy",n.request={id:t,num:o},[4,e.post(n)];case 1:return a.sent(),i(),[2]}})})})]})})},e.syncBought=function(){return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o){return __awaiter(t,void 0,void 0,function(){var t,n;return __generator(this,function(i){switch(i.label){case 0:return(t=new r.default).uri="/game/user/items",[4,e.post(t)];case 1:return n=i.sent(),o(n),[2]}})})})]})})},e.totalRankList=function(){return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o,n){return __awaiter(t,void 0,void 0,function(){var t,a,c;return __generator(this,function(l){switch(l.label){case 0:(t=new r.default).uri="/game/getTotalRank",t.request={gameId:i.AppConfig.GameID,key:i.AppConfig.rankKey},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.post(t)];case 2:return a=l.sent().list,o(a),[3,4];case 3:return c=l.sent(),n(c),[3,4];case 4:return[2]}})})})]})})},e.addDiamond=function(t){return __awaiter(this,void 0,Promise,function(){var o=this;return __generator(this,function(){return[2,new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,i;return __generator(this,function(a){switch(a.label){case 0:return(o=new r.default).uri="/game/user/addDiamond",o.request={num:t},[4,e.post(o)];case 1:return i=a.sent().diamond,n(i),[2]}})})})]})})},e.expendDiamond=function(t){return __awaiter(this,void 0,Promise,function(){var o=this;return __generator(this,function(){return[2,new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,i;return __generator(this,function(a){switch(a.label){case 0:return(o=new r.default).uri="/game/user/expendDiamond",o.request={num:t},[4,e.post(o)];case 1:return i=a.sent().diamond,n(i),[2]}})})})]})})},e.onShare=function(t,o){return __awaiter(this,void 0,Promise,function(){var i=this;return __generator(this,function(){return[2,new Promise(function(a){return __awaiter(i,void 0,void 0,function(){var i;return __generator(this,function(c){switch(c.label){case 0:return 0==n.World.My.playerId?[3,2]:((i=new r.default).uri="/game/onShare",i.request={shareKey:t,fromPlayerId:o},[4,e.post(i)]);case 1:c.sent(),c.label=2;case 2:return a(),[2]}})})})]})})},e.getShareList=function(t){return __awaiter(this,void 0,Promise,function(){var o=this;return __generator(this,function(){return[2,new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,i;return __generator(this,function(a){switch(a.label){case 0:return(o=new r.default).uri="/game/getShareList",o.request={shareKey:t},[4,e.post(o)];case 1:return i=a.sent(),n(i),[2]}})})})]})})},e.takeShareReward=function(t,o){return __awaiter(this,void 0,Promise,function(){var n=this;return __generator(this,function(){return[2,new Promise(function(i){return __awaiter(n,void 0,void 0,function(){var n;return __generator(this,function(a){switch(a.label){case 0:return(n=new r.default).uri="/game/receiveSharedRecord",n.request={shareKey:t,receivePlayerId:o},[4,e.post(n)];case 1:return a.sent(),i(),[2]}})})})]})})},e.setStorage=function(t,o){return __awaiter(this,void 0,Promise,function(){var n=this;return __generator(this,function(){return[2,new Promise(function(i){return __awaiter(n,void 0,void 0,function(){var n;return __generator(this,function(a){switch(a.label){case 0:return(n=new r.default).uri="/game/setStorage",n.request={key:t,value:o},[4,e.post(n)];case 1:return a.sent(),i(!0),[2]}})})})]})})},e.multiSetStorage=function(t){return __awaiter(this,void 0,Promise,function(){var o=this;return __generator(this,function(){return[2,new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o;return __generator(this,function(i){switch(i.label){case 0:return(o=new r.default).uri="/game/multiSetStorage",o.request={pairs:JSON.stringify(t)},[4,e.post(o)];case 1:return i.sent(),n(!0),[2]}})})})]})})},e.getStorage=function(t){return __awaiter(this,void 0,Promise,function(){var o=this;return __generator(this,function(){return[2,new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,i;return __generator(this,function(a){switch(a.label){case 0:return(o=new r.default).uri="/game/getStorage",o.request={key:t},[4,e.post(o)];case 1:return i=a.sent(),n(i),[2]}})})})]})})},e.multiGetStorage=function(t){return __awaiter(this,void 0,Promise,function(){var o=this;return __generator(this,function(){return[2,new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,i;return __generator(this,function(a){switch(a.label){case 0:return(o=new r.default).uri="/game/multiGetStorage",o.request={keys:JSON.stringify(t)},[4,e.post(o)];case 1:return i=a.sent(),n(i),[2]}})})})]})})},e.initGameData=function(){return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o){return __awaiter(t,void 0,void 0,function(){var t,i,r,a;return __generator(this,function(c){switch(c.label){case 0:return t=n.World.Storage.allKeys().filter(function(e){return!n.World.updateStorageKeys.includes(e)}),[4,e.multiGetStorage(t)];case 1:for(r in i=c.sent())a=i[r],"number"==typeof n.World.Storage["_"+r]?a=parseInt(a):"boolean"==typeof n.World.Storage["_"+r]&&(a="true"==a.toLowerCase()),n.World.Storage[r]=a;return o(),[2]}})})})]})})},e.pushStorage=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o){return __awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return console.log("========>pushStorage",n.World.updateStorageKeys),0!=n.World.updateStorageKeys.length?[3,1]:(o(),[3,3]);case 1:return t={},n.World.pushStorageKeys=n.World.updateStorageKeys,n.World.updateStorageKeys=[],n.World.pushStorageKeys.forEach(function(e){t[e]=n.World.Storage[e]}),[4,e.multiSetStorage(t)];case 2:i.sent(),n.World.pushStorageKeys=[],c.LocalStorage.setString("updateKVData",JSON.stringify(n.World.updateStorageKeys)),i.label=3;case 3:return[2]}})})})]})})},e}();o.default=u,cc._RF.pop()},{"../../../framework/facade/Facade":"Facade","../../../framework/http/HttpClient":"HttpClient","../../../framework/http/HttpProtocol":"HttpProtocol","../../../framework/persistence/LocalStorage":"LocalStorage","../config/AppConfig":"AppConfig","../config/NetworkConfig":"NetworkConfig","../info/World":"World"}],Newbies:[function(e,t,o){"use strict";cc._RF.push(t,"21af4u3ilxCeqEbsCgLln+k","Newbies"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./World"),i=function(){function e(e){this._map=null,this._map=e}return e.prototype.state=function(e){return!!this._map[e]},e.prototype.finish=function(e){this._map[e]=1,n.World.Storage.newbies=this.toJson()},e.prototype.toJson=function(){return JSON.stringify(this._map)},e}();o.default=i,cc._RF.pop()},{"./World":"World"}],NodeEvent:[function(e,t,o){"use strict";cc._RF.push(t,"6b1ecDYFXlE36An3M1fJwDV","NodeEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=cc._decorator,r=i.ccclass,a=i.property,c=i.menu;(function(e){e[e.TOUCH_START=0]="TOUCH_START",e[e.TOUCH_MOVE=1]="TOUCH_MOVE",e[e.TOUCH_END=2]="TOUCH_END",e[e.TOUCH_CANCEL=3]="TOUCH_CANCEL",e[e.MOUSE_DOWN=4]="MOUSE_DOWN",e[e.MOUSE_MOVE=5]="MOUSE_MOVE",e[e.MOUSE_ENTER=6]="MOUSE_ENTER",e[e.MOUSE_LEAVE=7]="MOUSE_LEAVE",e[e.MOUSE_UP=8]="MOUSE_UP",e[e.MOUSE_WHEEL=9]="MOUSE_WHEEL",e[e.POSITION_CHANGED=10]="POSITION_CHANGED",e[e.ROTATION_CHANGED=11]="ROTATION_CHANGED",e[e.SCALE_CHANGED=12]="SCALE_CHANGED",e[e.SIZE_CHANGED=13]="SIZE_CHANGED",e[e.ANCHOR_CHANGED=14]="ANCHOR_CHANGED",e[e.CHILD_ADDED=15]="CHILD_ADDED",e[e.CHILD_REMOVED=16]="CHILD_REMOVED",e[e.CHILD_REORDER=17]="CHILD_REORDER",e[e.GROUP_CHANGED=18]="GROUP_CHANGED"})(n||(n={}));var l=new Map;l.set(n.TOUCH_START,cc.Node.EventType.TOUCH_START),l.set(n.TOUCH_MOVE,cc.Node.EventType.TOUCH_MOVE),l.set(n.TOUCH_END,cc.Node.EventType.TOUCH_END),l.set(n.TOUCH_CANCEL,cc.Node.EventType.TOUCH_CANCEL),l.set(n.MOUSE_DOWN,cc.Node.EventType.MOUSE_DOWN),l.set(n.MOUSE_MOVE,cc.Node.EventType.MOUSE_MOVE),l.set(n.MOUSE_ENTER,cc.Node.EventType.MOUSE_ENTER),l.set(n.MOUSE_LEAVE,cc.Node.EventType.MOUSE_LEAVE),l.set(n.MOUSE_UP,cc.Node.EventType.MOUSE_UP),l.set(n.MOUSE_WHEEL,cc.Node.EventType.MOUSE_WHEEL),l.set(n.POSITION_CHANGED,cc.Node.EventType.POSITION_CHANGED),l.set(n.SCALE_CHANGED,cc.Node.EventType.SCALE_CHANGED),l.set(n.ANCHOR_CHANGED,cc.Node.EventType.ANCHOR_CHANGED),l.set(n.CHILD_ADDED,cc.Node.EventType.CHILD_ADDED),l.set(n.CHILD_REMOVED,cc.Node.EventType.CHILD_REMOVED),l.set(n.CHILD_REORDER,cc.Node.EventType.CHILD_REORDER),l.set(n.GROUP_CHANGED,cc.Node.EventType.GROUP_CHANGED);var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.once=!1,t.eventType=n.TOUCH_END,t.eventHandlers=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(l.get(this.eventType),this.onNodeEvent,this)},t.prototype.onNodeEvent=function(e){cc.Component.EventHandler.emitEvents(this.eventHandlers,e),this.once&&(this.offEvent(),this.destroy())},t.prototype.offEvent=function(){this.node.off(l.get(this.eventType),this.onNodeEvent,this)},t.prototype.onDestroy=function(){this.offEvent()},__decorate([a],t.prototype,"once",void 0),__decorate([a({type:cc.Enum(n),displayName:"\u4e8b\u4ef6\u7c7b\u578b"})],t.prototype,"eventType",void 0),__decorate([a({type:cc.Component.EventHandler,displayName:"\u89e6\u53d1\u4e8b\u4ef6"})],t.prototype,"eventHandlers",void 0),__decorate([r,c("\u81ea\u5b9a\u4e49/NodeEvent")],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],OpenViewCommand:[function(e,t,o){"use strict";cc._RF.push(t,"b27f8KHhAhEG5gWtv30iiyW","OpenViewCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Facade"),i=cc._decorator,r=i.ccclass,a=(i.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o,i){return __awaiter(t,void 0,void 0,function(){var t,r,a;return __generator(this,function(c){switch(c.label){case 0:return t=e[0],n.default.canvasNode.getChildByName(t.substring(t.lastIndexOf("/")+1))?(console.error("\u6b64\u7a97\u53e3\u5df2\u6253\u5f00===>"+t,"\u6216\u8005\u662fprefab\u6839\u8282\u70b9\u540d\u79f0\u4e0e\u5176\u4ed6prefab\u6839\u8282\u70b9\u540d\u79f0\u51b2\u7a81...\u89c4\u5219\uff1aprefab\u540d\u79f0\u8981\u4e0e\u8be5prefab\u6839\u8282\u70b9\u540d\u79f0\u4e00\u81f4\u3002"),i(),[3,3]):[3,1];case 1:return[4,cc.loader.loadResAwait(t,cc.Prefab)];case 2:r=c.sent(),(a=cc.instantiate(r)).setParent(n.default.canvasNode),o(a),c.label=3;case 3:return[2]}})})})]})})},__decorate([r("OpenViewCommand")],e)}());o.default=a,cc._RF.pop()},{"./Facade":"Facade"}],OpenViewInterceptor:[function(e,t,o){"use strict";cc._RF.push(t,"27753peuxhLZrjjPlvjamxu","OpenViewInterceptor"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/facade/Facade"),i=e("../../../framework/component/LifeCycle"),r=cc._decorator,a=r.ccclass,c=(r.property,function(){function e(){}var t;return t=e,e.onceAwait=function(e,t){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(){return(o=n.default.canvasNode.getChildByName("blockLayer==>"+e))?[2,o.onceAwait(t)]:(console.error("not found view==>"+e),[2])})})},e.prototype.preHandle=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o){return __awaiter(t,void 0,void 0,function(){var t,i,r;return __generator(this,function(a){switch(a.label){case 0:return[4,cc.loader.loadResAwait("prefab/color",cc.Prefab)];case 1:return t=a.sent(),(i=new cc.Node("blockLayer==>"+e[0])).on(cc.Node.EventType.TOUCH_START,function(){console.log("\u70b9\u51fb\u4e86\u963b\u585e\u5c42touch start=>"+i.name)}),i.addComponent(cc.BlockInputEvents),r=cc.instantiate(t).getComponent(cc.Sprite).spriteFrame,i.addComponent(cc.Sprite).spriteFrame=r,i.color=cc.Color.BLACK,i.opacity=0,i.setContentSize(cc.view.getVisibleSize()),n.default.canvasNode.addChild(i),i.runAction(cc.fadeTo(1,150)),o(!0),[2]}})})})]})})},e.prototype.postHandle=function(e){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];return __awaiter(this,void 0,Promise,function(){var r=this;return __generator(this,function(){return[2,new Promise(function(a){return __awaiter(r,void 0,void 0,function(){var r;return __generator(this,function(c){switch(c.label){case 0:return(r=n.default.canvasNode.getChildByName("blockLayer==>"+o[0])).emit(t.BlockLayerEvent.viewCreateFinish,e),e.addComponent(i.default).addCall("onDestroy",function(){r.emit(t.BlockLayerEvent.destroy),r.destroy()}),"prefab/task"!=o[0]?[3,2]:(cc.director.getScene().getChildByName("top").active=!0,[4,this.moveDownToFocus(e)]);case 1:return c.sent(),[3,3];case 2:"prefab/gameover"==o[0]&&(cc.director.getScene().getChildByName("top").active=!0),c.label=3;case 3:return r.emit(t.BlockLayerEvent.viewDisplayFinish,e),a(),[2]}})})})]})})},e.prototype.moveDownToFocus=function(e){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(n){switch(n.label){case 0:return t=e.x,o=e.y,e.y=o-cc.view.getVisibleSize().height,[4,e.runActionAwait(cc.moveTo(1.2,t,o).easing(cc.easeElasticOut(.6)))];case 1:return n.sent(),[2]}})})},e.BlockLayerEvent={destroy:"destroy",viewCreateFinish:"viewCreateFinish",viewDisplayFinish:"viewDisplayFinish"},t=__decorate([a],e)}());o.default=c,cc._RF.pop()},{"../../../framework/component/LifeCycle":"LifeCycle","../../../framework/facade/Facade":"Facade"}],PauseAllRunningActions:[function(e,t,o){"use strict";cc._RF.push(t,"76cc4E/XWhMC562JoS9uogz","PauseAllRunningActions"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.menu,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=cc.director.getActionManager().pauseAllRunningActions();this.onDestroy=function(){cc.director.getActionManager().resumeTargets(e)}},__decorate([i,r("\u81ea\u5b9a\u4e49/PauseAllRunningActions")],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],PostCommandInterceptor:[function(e,t,o){"use strict";cc._RF.push(t,"b1980TfB1xNpaZmm/jO2HzX","PostCommandInterceptor"),Object.defineProperty(o,"__esModule",{value:!0}),o.PostCommandInterceptor=void 0;var n=function(){function e(){}return e.prototype.preHandle=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){return e(!0)})]})})},e}();o.PostCommandInterceptor=n,cc._RF.pop()},{}],PreCommandInterceptor:[function(e,t,o){"use strict";cc._RF.push(t,"a3b4dlTRDJMdKhqI+oAHol6","PreCommandInterceptor"),Object.defineProperty(o,"__esModule",{value:!0}),o.PreCommandInterceptor=void 0;var n=function(){function e(){}return e.prototype.postHandle=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){return e()})]})})},e}();o.PreCommandInterceptor=n,cc._RF.pop()},{}],PreloadGameSceneCommand:[function(e,t,o){"use strict";cc._RF.push(t,"cf93bRhBi5KuIVrHFENupQS","PreloadGameSceneCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(t,o){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(){return Promise.all([cc.loader.loadResAwait("prefab/entities/enemy/enemy1",cc.Prefab),cc.loader.loadResAwait("prefab/entities/enemy/enemy2",cc.Prefab),cc.loader.loadResAwait("prefab/entities/enemy/enemy3",cc.Prefab),cc.loader.loadResAwait("prefab/entities/enemy/enemy4",cc.Prefab),cc.loader.loadResAwait("prefab/entities/enemy/enemy5",cc.Prefab),cc.loader.loadResAwait("prefab/entities/enemy/enemy6",cc.Prefab),cc.loader.loadResAwait("prefab/entities/enemy/enemy7",cc.Prefab),cc.loader.loadResAwait("prefab/entities/enemy/enemy8",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet1",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet1Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet2",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet2Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet3",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet3Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet4",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet4Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet5",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet5Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet6",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet6Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet7",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet7Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet8",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet8Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet9",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet9Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet10",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet10Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet108",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/bullet108Strike",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/fire7",cc.Prefab),cc.loader.loadResAwait("prefab/entities/explosive/explosive9",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/enemyBullet1",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/enemyBullet2",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/enemyBullet3",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/propBullet1",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/propBullet2",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/propBullet3",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/propBullet4",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/propBullet5",cc.Prefab),cc.loader.loadResAwait("prefab/entities/bullet/propBullet6",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop1",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop2",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop3",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop4",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop5",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop6",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop9",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop10",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop11",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop12",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/prop13",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/guns",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/propState",cc.Prefab),cc.loader.loadResAwait("prefab/entities/prop/takeProp",cc.Prefab),cc.loader.loadResAwait("prefab/entities/blood/blood",cc.Prefab),cc.loader.loadResAwait("prefab/roleSupply",cc.Prefab)]).then(function(){t()}).catch(function(e){o(e)}),[2]})})})]})})},__decorate([i("PreloadGameSceneCommand")],e)}());o.default=r,cc._RF.pop()},{}],PropBase:[function(e,t,o){"use strict";cc._RF.push(t,"5c07bd2qlBC57ZQMODENtUU","PropBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/GameProxy"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cd=12,t.collider=null,t._on_off=!1,t._magnetic=!1,t.propID=-1,t}return __extends(t,e),Object.defineProperty(t.prototype,"on_off",{get:function(){return this._on_off},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magnetic",{get:function(){return this._magnetic},set:function(e){e!=this._magnetic&&(this._magnetic=e,this._magnetic&&(this.node.stopAllActions(),this.moveToRole()))},enumerable:!1,configurable:!0}),t.prototype.moveToRole=function(){var e=this,t=window.GameRoleController,o=this.node.position.sub(t.role.node.position).mag();this.node.runAction(cc.sequence(cc.moveTo(o/1e3,t.role.node.position).easing(cc.easeSineIn()),cc.callFunc(function(){e.moveToRole()})))},t.prototype.init=function(e){this.propID=e},t.prototype.display=function(){var e=this;this._on_off=!1,this.node.active=!0,this.cd>0&&this.node.runAction(cc.sequence(cc.delayTime(this.cd-5),cc.blink(5,25),cc.callFunc(function(){e.node.active=!1})))},t.prototype.trigger=function(){this._on_off=!0,this.node.stopAllActions(),n.GameProxy.emit(n.GameProxy.Event.PropTrigger,this),this.node.active=!1},t.prototype.onLoad=function(){this.collider=this.getComponent(cc.Collider)},t.prototype.onEnable=function(){this._on_off=!1,this._magnetic=!1,window.GameEnemysController.gameProps.push(this)},t.prototype.onDisable=function(){this.node.stopAllActions();var e=window.GameEnemysController;e.gameProps.splice(e.gameProps.indexOf(this),1)},__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../../game/GameProxy":"GameProxy"}],PropInfo:[function(e,t,o){"use strict";cc._RF.push(t,"3fd2b3Z2YFPp7jX7jvk4yqf","PropInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./World"),i=function(){function e(e){this._map=null,this._map=e}return e.prototype.expireTime=function(e){return this._map[e]},e.prototype.beUsing=function(e){return this._map[e]&&this._map[e]>(new Date).getTime()},e.prototype.use=function(e){this._map[e]=(new Date).getTime()+36e5,n.World.Storage.props=this.toJson()},e.prototype.toJson=function(){return JSON.stringify(this._map)},e}();o.default=i,cc._RF.pop()},{"./World":"World"}],PropStateController:[function(e,t,o){"use strict";cc._RF.push(t,"ad6c7iO+p1G1qYI4btYwplX","PropStateController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../framework/component/CDTimer"),i=e("../../game/GameProxy"),r=cc._decorator,a=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrames=[],t.sprite=null,t.prgressBar=null,t.cdTimer=null,t.propID=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.sprite.node.active=!1,this.prgressBar.node.active=!1},t.prototype.onDisable=function(){this.node.stopAllActions()},t.prototype.init=function(e){this.propID=e;var t=0,o=0;switch(e){case 5:t=0,o=15;break;case 9:t=1,o=12;break;case 10:t=2,o=12;break;case 12:t=3,o=20;break;case 13:t=4,o=10}this.sprite.spriteFrame=this.spriteFrames[t],this.cdTimer.cd=o,this.cdTimer.reset(),this.prgressBar.progress=1,this.cdTimer.pause=!0,this.node.scale=1,this.sprite.node.active=!0,this.prgressBar.node.active=!0},t.prototype.onProgressEvent=function(e){this.prgressBar.progress=1-e},t.prototype.onZeroEvent=function(){var e=this;i.GameProxy.emit(i.GameProxy.Event.PropCDZero,this.propID),this.node.runAction(cc.sequence(cc.scaleTo(.15,0),cc.callFunc(function(){e.node.active=!1})))},__decorate([c(cc.SpriteFrame)],t.prototype,"spriteFrames",void 0),__decorate([c(cc.Sprite)],t.prototype,"sprite",void 0),__decorate([c(cc.ProgressBar)],t.prototype,"prgressBar",void 0),__decorate([c(n.default)],t.prototype,"cdTimer",void 0),__decorate([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../../framework/component/CDTimer":"CDTimer","../../game/GameProxy":"GameProxy"}],PropsController:[function(e,t,o){"use strict";cc._RF.push(t,"ce3c5l6ZAlLkpyTmNdI0qJX","PropsController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/tableview/TableViewMediator"),i=e("../../../framework/config/ExcelConfig"),r=e("../config/ExcelTableNames"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tableViewMediator=null,t.detailNode=null,t.detailLabel=null,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.detailNode.on(cc.Node.EventType.TOUCH_START,function(){e.detailNode.active=!1}),this.tableViewMediator.datas=i.ExcelConfig.getExcelTable(r.ExcelTableNames.Prop).filter(function(e){return 7!=e.id&&8!=e.id&&10!=e.id}).sort(function(e,t){return e.order-t.order})},__decorate([l(n.default)],t.prototype,"tableViewMediator",void 0),__decorate([l(cc.Node)],t.prototype,"detailNode",void 0),__decorate([l(cc.Label)],t.prototype,"detailLabel",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/tableview/TableViewMediator":"TableViewMediator","../config/ExcelTableNames":"ExcelTableNames"}],PropsItemController:[function(e,t,o){"use strict";cc._RF.push(t,"d06a8YvgQJJG4ULGjMJqc1Z","PropsItemController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../framework/tableview/AbstractTableItem"),c=e("./PropsController"),l=e("../info/World"),s=e("./AdManner"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propsController=null,t.bgFrameSprite=null,t.iconSprite=null,t.nameLabel=null,t.useNode=null,t.usingNode=null,t.foreverNode=null,t.cdLabel=null,t.iconSpriteFrames=[],t._data=null,t._index=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.schedule(function(){if(e.node.active&&e.usingNode.active&&e._data){var t=e._data.id;l.World.My.propInfo.beUsing(t)?e.updateCD():(e.foreverNode.active=!1,e.useNode.active=!0,e.usingNode.active=!1)}},.99)},t.prototype.updateCD=function(){var e=Math.floor((l.World.My.propInfo.expireTime(this._data.id)-(new Date).getTime())/1e3),t=Math.floor(e/60),o=e%60;this.cdLabel.string="Time Remain "+("000"+t).substr(-2)+":"+("000"+o).substr(-2)},t.prototype.upadteItem=function(e,t){this._data=e,this._index=t;var o=e.id;this.iconSprite.spriteFrame=this.iconSpriteFrames[o-1],this.nameLabel.string=e.prop_name,0==e.unlock?(this.foreverNode.active=!0,this.useNode.active=!1,this.usingNode.active=!1):l.World.My.propInfo.beUsing(o)?(this.foreverNode.active=!1,this.useNode.active=!1,this.usingNode.active=!0,this.updateCD()):(this.foreverNode.active=!1,this.useNode.active=!0,this.usingNode.active=!1)},t.prototype.onClickDetail=function(){this.propsController.detailLabel.string=this._data.description,this.propsController.detailNode.active=!0},t.prototype.onClickUse=function(){var e=this;s.default.showVideo(function(t){t&&(l.World.My.propInfo.use(e._data.id),e.upadteItem(e._data,e._index))})},r([p(c.default)],t.prototype,"propsController",void 0),r([p(cc.Sprite)],t.prototype,"bgFrameSprite",void 0),r([p(cc.Sprite)],t.prototype,"iconSprite",void 0),r([p(cc.Label)],t.prototype,"nameLabel",void 0),r([p(cc.Node)],t.prototype,"useNode",void 0),r([p(cc.Node)],t.prototype,"usingNode",void 0),r([p(cc.Node)],t.prototype,"foreverNode",void 0),r([p(cc.Label)],t.prototype,"cdLabel",void 0),r([p(cc.SpriteFrame)],t.prototype,"iconSpriteFrames",void 0),r([d],t)}(a.default);o.default=f,cc._RF.pop()},{"../../../framework/tableview/AbstractTableItem":"AbstractTableItem","../info/World":"World","./AdManner":"AdManner","./PropsController":"PropsController"}],RecommendController:[function(e,t,o){"use strict";cc._RF.push(t,"14d59qg1Z9N5JJ+Z0KRq+TC","RecommendController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../entities/bulletEmitter/BulletEmitterShouQiang"),i=e("../entities/bulletEmitter/BulletEmitterJuJiQiang"),r=e("../entities/bulletEmitter/BulletEmitterJiaTeLin"),a=e("../entities/bulletEmitter/BulletEmitterJiGuang"),c=e("../entities/bulletEmitter/BulletEmitterHuoYan"),l=e("../entities/bulletEmitter/BulletEmitterHuoJianTong"),s=e("../entities/bulletEmitter/BulletEmitterLiZiPao"),u=e("../entities/bulletEmitter/BulletEmitterPenZi"),d=e("../entities/bulletEmitter/BulletEmitterSanDanQiang"),p=e("../entities/bulletEmitter/BulletEmitterShanDianQiu"),f=e("../entities/bulletEmitter/BulletEmitter"),h=e("../entities/role/Role"),m=e("../../../framework/actions/Actions"),g=e("../../../framework/config/ExcelConfig"),y=e("../config/ExcelTableNames"),_=e("../info/World"),v=e("../../../framework/facade/Facade"),b=e("./HomeController"),E=e("../game/GameProxy"),C=e("./AdManner"),w=cc._decorator,x=w.ccclass,T=w.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.role=null,t.useNode=null,t.noUseNode=null,t._fireCD=0,t._gunId=1,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.noUseNode.on(cc.Node.EventType.POSITION_CHANGED,function(){e.useNode.position=e.noUseNode.position.add(cc.v2(0,87))});var t=window.GameBulletsController;t.bulletLayer.on(cc.Node.EventType.CHILD_ADDED,function(e){e.group="ui"});for(var o=null,h=2,v=0,b=g.ExcelConfig.getExcelTable(y.ExcelTableNames.Weapon).filter(function(e){return 1!=e.id}).sort(function(e,t){return t.unlock-e.unlock});v<b.length;v++){var E=b[v];if(_.World.Storage.gameLevel>=E.unlock){h=E.id;break}}h>7&&(h=7),this._gunId=h;var C=[];C.push(cc.loader.loadResAwait("prefab/entities/bullet/bullet"+h)),h==f.default.TYPES.LiZiPao?C.push(cc.loader.loadResAwait("prefab/entities/bullet/bullet108")):h==f.default.TYPES.HuoJianTong?C.push(cc.loader.loadResAwait("prefab/entities/explosive/explosive9")):h==f.default.TYPES.JuJiQiang&&C.push(cc.loader.loadResAwait("prefab/entities/bullet/fire7")),Promise.all(C).then(function(){switch(h){case f.default.TYPES.ShouQiang:o=new n.default(t);break;case f.default.TYPES.PenZi:o=new u.default(t);break;case f.default.TYPES.JiaTeLin:o=new r.default(t);break;case f.default.TYPES.SanDanQiang:o=new d.default(t);break;case f.default.TYPES.JuJiQiang:o=new i.default(t);break;case f.default.TYPES.LiZiPao:o=new s.default(t);break;case f.default.TYPES.HuoJianTong:o=new l.default(t);break;case f.default.TYPES.ShanDianQiu:o=new p.default(t);break;case f.default.TYPES.JiGuang:o=new a.default(t);break;case f.default.TYPES.HuoYan:o=new c.default(t)}if(o.init(h),h==f.default.TYPES.JiGuang){var g=o.gameBulletsController.getInactiveBullet(f.default.TYPES.JiGuang);g.collider.enabled=!1;var y=g.getComponent(sp.Skeleton);y.setStartListener(function(e){"jiguang"===(e.animation?e.animation.name:"")&&(g.collider.enabled=!0)}),y.setCompleteListener(function(e){var t=e.animation?e.animation.name:"";"xuneng"===t?y.setAnimation(0,"jiguang",!1):"jiguang"===t&&(o.bulletCount--,g.collider.enabled=!1,g.node.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){g.collider.enabled||(g.node.active=!1)}))))}),o._bulletJiGuangSke=y,o._bulletJiGuang=g,o._bulletJiGuang.node.rotation=e.role.node.rotation,o._bulletJiGuang.node.position=e.role.node.position.add(cc.v2(0,1).rotate(cc.misc.degreesToRadians(-e.role.node.rotation)).normalize().mul(e.role.gunTopNode.y+20))}var _=cc.v2(0,1e3).sub(e.role.node.position).normalize();e.node.runAction(m.default.update(function(n){if(e._fireCD>0)e._fireCD-=n;else{if(e._fireCD=o.interval,h==f.default.TYPES.JuJiQiang){var i=cc.loader.getRes("prefab/entities/bullet/fire7"),r=cc.instantiate(i);t.bulletLayer.addChild(r,0),r.position=e.role.node.position.add(_.mul(e.role.gunTopNode.y)),r.rotation=90-cc.misc.radiansToDegrees(Math.atan2(_.y,_.x)),r.getComponent(sp.Skeleton).setCompleteListener(function(){r.destroy()})}else h!==f.default.TYPES.JiGuang&&h!==f.default.TYPES.PenZi&&(e.role.fireSprite.node.scale=1,e.role.fireSprite.node.active=!0,e.role.fireSprite.node.runAction(cc.sequence(cc.scaleTo(.05,.5),cc.callFunc(function(){e.role.fireSprite.node.active=!1}))));o.fire(e.role.node.position.add(_.mul(e.role.gunTopNode.y)),_)}}))})},t.prototype.onClickUse=function(){var e=this;C.default.showVideo(function(t){t&&(E.GameProxy.prepareGun=e._gunId,v.default.findComponent("HomeScene",b.default).playExit(),e.node.destroy())})},t.prototype.onClickNoUse=function(){v.default.findComponent("HomeScene",b.default).playExit(),this.node.destroy()},__decorate([T(h.default)],t.prototype,"role",void 0),__decorate([T(cc.Node)],t.prototype,"useNode",void 0),__decorate([T(cc.Node)],t.prototype,"noUseNode",void 0),__decorate([x],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../../framework/actions/Actions":"Actions","../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/facade/Facade":"Facade","../config/ExcelTableNames":"ExcelTableNames","../entities/bulletEmitter/BulletEmitter":"BulletEmitter","../entities/bulletEmitter/BulletEmitterHuoJianTong":"BulletEmitterHuoJianTong","../entities/bulletEmitter/BulletEmitterHuoYan":"BulletEmitterHuoYan","../entities/bulletEmitter/BulletEmitterJiGuang":"BulletEmitterJiGuang","../entities/bulletEmitter/BulletEmitterJiaTeLin":"BulletEmitterJiaTeLin","../entities/bulletEmitter/BulletEmitterJuJiQiang":"BulletEmitterJuJiQiang","../entities/bulletEmitter/BulletEmitterLiZiPao":"BulletEmitterLiZiPao","../entities/bulletEmitter/BulletEmitterPenZi":"BulletEmitterPenZi","../entities/bulletEmitter/BulletEmitterSanDanQiang":"BulletEmitterSanDanQiang","../entities/bulletEmitter/BulletEmitterShanDianQiu":"BulletEmitterShanDianQiu","../entities/bulletEmitter/BulletEmitterShouQiang":"BulletEmitterShouQiang","../entities/role/Role":"Role","../game/GameProxy":"GameProxy","../info/World":"World","./AdManner":"AdManner","./HomeController":"HomeController"}],RecommendPropsController:[function(e,t,o){"use strict";cc._RF.push(t,"bb6edVloYVAk6hnOKWOg07b","RecommendPropsController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../entities/role/Role"),i=e("../info/World"),r=e("../../../framework/extend/Extend"),a=e("../entities/bullet/BulletOfJianGuangSi"),c=e("./AdManner"),l=cc._decorator,s=l.ccclass,u=l.property,d=[3,4,5],p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.role=null,t.fangHuDunSke=null,t.useNode=null,t.noUseNode=null,t._propId=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.fangHuDunSke.node.active=!1,this.noUseNode.on(cc.Node.EventType.POSITION_CHANGED,function(){e.useNode.position=e.noUseNode.position.add(cc.v2(0,87))}),window.GameBulletsController.bulletLayer.on(cc.Node.EventType.CHILD_ADDED,function(e){e.group="ui"});var t=d.filter(function(e){return!i.World.My.propInfo.beUsing(e)});0==t.length&&(t=d),this._propId=r.ext.randomElement(t);var o="prefab/entities/bullet/propBullet"+this._propId;cc.loader.loadRes(o,cc.Prefab,function(t){null==t&&e.updateShown()})},t.prototype.updateShown=function(){var e=this;switch(console.log("updateShown===>",this._propId),this._propId){case 3:for(var t=cc.v2(this.role.node.x,this.role.node.y),o=function(e){n.node.runAction(cc.sequence(cc.delayTime(.05*e),cc.callFunc(function(){var o=window.GameBulletsController.getInactivePropBullet(3);o.node.active=!0;var n=30+60*e;o.node.rotation=n-90;var i=cc.v2(0,1).rotateSelf(cc.misc.degreesToRadians(-n)).normalizeSelf();o.node.position=t,o.node.scale=0,o.node.runAction(cc.scaleTo(.08,1)),o.collider.enabled=!1,o.node.runAction(cc.sequence(cc.moveBy(.08,i.mul(80)),cc.callFunc(function(){o.collider.enabled=!0,o.node.runAction(cc.sequence(cc.delayTime(20),cc.callFunc(function(){o.node.active=!1})))})))})))},n=this,i=0;i<6;i++)o(i);var r=function(e){c.node.runAction(cc.sequence(cc.delayTime(.05*(e+6)),cc.callFunc(function(){var o=window.GameBulletsController.getInactivePropBullet(3);o.node.active=!0;var n=60+60*e;o.node.rotation=n-90;var i=cc.v2(0,1).rotateSelf(cc.misc.degreesToRadians(-n)).normalizeSelf();o.node.position=t,o.node.scale=0,o.node.runAction(cc.scaleTo(.08,1)),o.collider.enabled=!1,o.node.runAction(cc.sequence(cc.moveBy(.08,i.mul(140)),cc.callFunc(function(){o.collider.enabled=!0,o.node.runAction(cc.sequence(cc.delayTime(20),cc.callFunc(function(){o.node.active=!1})))})))})))},c=this;for(i=0;i<6;i++)r(i);this.node.runAction(cc.sequence(cc.delayTime(21),cc.callFunc(function(){e.updateShown()})));break;case 4:var l=window.GameBulletsController.getInactivePropBullet(4);l.node.position=this.role.node.position,l.node.active=!0,l.getComponent(sp.Skeleton).setAnimation(0,"614",!0),l.getComponent(sp.Skeleton).setCompleteListener(function(){}),l.node.removeComponent(a.default);break;case 5:this.fangHuDunSke.node.active=!0,this.fangHuDunSke.setAnimation(0,"start",!1),this.fangHuDunSke.setCompleteListener(function(t){var o=t.animation?t.animation.name:"";if(("start"==o||"transition"==o)&&(e.fangHuDunSke.setAnimation(0,"loops",!1),!e.node.getActionByTag(114))){var n=cc.speed(cc.repeatForever(cc.rotateBy(1.25,720)),0);n.setTag(114),e.fangHuDunSke.node.runAction(n),cc.tween(n).to(1,{_speed:1},{easing:"sineIn"}).start()}})}},t.prototype.onClickUse=function(){var e=this;c.default.showVideo(function(t){t&&(i.World.My.propInfo.use(e._propId),e.node.destroy())})},t.prototype.onClickNoUse=function(){this.node.destroy()},__decorate([u(n.default)],t.prototype,"role",void 0),__decorate([u(sp.Skeleton)],t.prototype,"fangHuDunSke",void 0),__decorate([u(cc.Node)],t.prototype,"useNode",void 0),__decorate([u(cc.Node)],t.prototype,"noUseNode",void 0),__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../framework/extend/Extend":"Extend","../entities/bullet/BulletOfJianGuangSi":"BulletOfJianGuangSi","../entities/role/Role":"Role","../info/World":"World","./AdManner":"AdManner"}],ResConfig:[function(e,t,o){"use strict";cc._RF.push(t,"c07349DfYtOrKUAwEyz1xe/","ResConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResConfig=void 0;var n=function(){function e(){}return e.retainPrefabs=["prefab/dialog","prefab/separationLayer","prefab/textTips"],e}();o.ResConfig=n,cc._RF.pop()},{}],RigidBodyCollisionEvent:[function(e,t,o){"use strict";cc._RF.push(t,"bd3eca0KaZBS54KFgdqn1/X","RigidBodyCollisionEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=cc._decorator,r=i.ccclass,a=i.property,c=i.menu;(function(e){e[e.onBeginContact=0]="onBeginContact",e[e.onEndContact=1]="onEndContact",e[e.onPreSolve=2]="onPreSolve",e[e.onPostSolve=3]="onPostSolve"})(n||(n={}));var l=new Map;l.set(n.onBeginContact,"onBeginContact"),l.set(n.onEndContact,"onEndContact"),l.set(n.onPreSolve,"onPreSolve"),l.set(n.onPostSolve,"onPostSolve");var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collisionType=n.onBeginContact,t.eventHandlers=[],t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this[l.get(this.collisionType)]=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(){return(e=cc.Component.EventHandler).emitEvents.apply(e,__spreadArrays([this.eventHandlers],t)),[2]})})}},__decorate([a({type:cc.Enum(n),displayName:"\u521a\u4f53\u78b0\u649e\u7c7b\u578b"})],t.prototype,"collisionType",void 0),__decorate([a({type:cc.Component.EventHandler,displayName:"\u89e6\u53d1\u4e8b\u4ef6"})],t.prototype,"eventHandlers",void 0),__decorate([r,c("\u81ea\u5b9a\u4e49/RigidBodyCollisionEvent")],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],RoleAABB:[function(e,t,o){"use strict";cc._RF.push(t,"77d4amxHlhAAaN1LjD+GliJ","RoleAABB"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../quad-tree/AABBRegion"),i=cc._decorator,r=i.ccclass,a=i.disallowMultiple,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radius=0,t}return __extends(t,e),t.prototype.onLoad=function(){this._radius=this.getComponent(cc.CircleCollider).radius},t.prototype.aabb=function(){var e=2*this._radius;return cc.rect(this.node.x-this._radius,this.node.y-this._radius,e,e)},__decorate([r,a],t)}(n.default);o.default=c,cc._RF.pop()},{"../../../quad-tree/AABBRegion":"AABBRegion"}],RoleLayerController:[function(e,t,o){"use strict";cc._RF.push(t,"f61265lNHFLoLCiFgJtZAnX","RoleLayerController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../info/World"),c=e("../../../framework/config/ExcelConfig"),l=e("../config/ExcelTableNames"),s=e("../../../framework/extend/Extend"),u=e("../../../framework/facade/Facade"),d=cc._decorator,p=d.ccclass,f=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hpLvLabel=null,t.adLvLabel=null,t.hpCostLabel=null,t.adCostLabel=null,t.hpWorthLabel=null,t.adWorthLabel=null,t.hpLvButton=null,t.adButton=null,t._AdUpCount=0,t}return i(t,e),t.prototype.onLoad=function(){this.updateHpUp(),this.updateAdUp(),cc.find("Canvas").on("UpdateStorage",this.onUpdateStorageEvent,this)},t.prototype.onDestroy=function(){cc.find("Canvas").off("UpdateStorage",this.onUpdateStorageEvent,this)},t.prototype.onUpdateStorageEvent=function(e){if("goldCount"==e){var t=c.ExcelConfig.getExcelTable(l.ExcelTableNames.Weapon)[0];if(a.World.Storage.HpLv<t.lv_limit){var o=c.ExcelConfig.getExcelTable(l.ExcelTableNames.WeaponUp)[a.World.Storage.HpLv-1].life_expend;this.hpLvButton.interactable=a.World.Storage.goldCount>=o,this.hpCostLabel.node.color=this.hpLvButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338")}a.World.Storage.ADLv<t.lv_limit&&(o=c.ExcelConfig.getExcelTable(l.ExcelTableNames.WeaponUp)[a.World.Storage.ADLv-1].fight_expend,this.adButton.interactable=a.World.Storage.goldCount>=o,this.adCostLabel.node.color=this.adButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338"))}},t.prototype.updateHpUp=function(){var e=c.ExcelConfig.getExcelTable(l.ExcelTableNames.Weapon)[0];if(this.hpLvLabel.string="<b><outline color=#1e1e1e width=4>HP Lv."+a.World.Storage.HpLv+"</outline></b>",a.World.Storage.HpLv>=e.lv_limit)this.hpCostLabel.string="<b><outline color=#1e1e1e width=3>Full Lv</outline></b>",this.hpLvButton.interactable=!1;else{var t=c.ExcelConfig.getExcelTable(l.ExcelTableNames.WeaponUp)[a.World.Storage.HpLv-1].life_expend;this.hpCostLabel.string="<b><outline color=#1e1e1e width=3>"+s.ext.shortFormat(t)+"</outline></b>",this.hpLvButton.interactable=a.World.Storage.goldCount>=t}this.hpCostLabel.node.color=this.hpLvButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338");var o=c.ExcelConfig.getExcelTable(l.ExcelTableNames.WeaponUp)[a.World.Storage.HpLv-1].life;this.hpWorthLabel.string="<b><outline color=#1e1e1e width=3>"+s.ext.shortFormat(o)+"</outline></b>"},t.prototype.updateAdUp=function(){var e=c.ExcelConfig.getExcelTable(l.ExcelTableNames.Weapon)[0];if(this.adLvLabel.string="<b><outline color=#1e1e1e width=4>ATK Lv."+a.World.Storage.ADLv+"</outline></b>",a.World.Storage.ADLv>=e.lv_limit)this.adCostLabel.string="<b><outline color=#1e1e1e width=3>Full Lv</outline></b>",this.adButton.interactable=!1;else{var t=c.ExcelConfig.getExcelTable(l.ExcelTableNames.WeaponUp)[a.World.Storage.ADLv-1].fight_expend;this.adCostLabel.string="<b><outline color=#1e1e1e width=3>"+s.ext.shortFormat(t)+"</outline></b>",this.adButton.interactable=a.World.Storage.goldCount>=t}this.adCostLabel.node.color=this.adButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338");var o=c.ExcelConfig.getExcelTable(l.ExcelTableNames.WeaponUp)[a.World.Storage.ADLv-1].fight;this.adWorthLabel.string="<b><outline color=#1e1e1e width=3>"+s.ext.shortFormat(o)+"</outline></b>"},t.prototype.onClickUpHpLv=function(){var e=c.ExcelConfig.getExcelTable(l.ExcelTableNames.WeaponUp)[a.World.Storage.HpLv-1].life_expend;a.World.Storage.goldCount-=e,a.World.Storage.HpLv++,this.updateHpUp(),u.default.canvasNode.emit("RoleUp")},t.prototype.onClickUpADLv=function(){var e=c.ExcelConfig.getExcelTable(l.ExcelTableNames.WeaponUp)[a.World.Storage.ADLv-1].fight_expend;a.World.Storage.goldCount-=e,a.World.Storage.ADLv++,this.updateAdUp(),u.default.canvasNode.emit("RoleUp"),this._AdUpCount++;var t=cc.director.getScene().getChildByName("newbieNode");t&&(!this.adButton.interactable||this._AdUpCount>2)&&(t.destroy(),a.World.My.newbies.finish("FirstRoleUp"))},r([f(cc.RichText)],t.prototype,"hpLvLabel",void 0),r([f(cc.RichText)],t.prototype,"adLvLabel",void 0),r([f(cc.RichText)],t.prototype,"hpCostLabel",void 0),r([f(cc.RichText)],t.prototype,"adCostLabel",void 0),r([f(cc.RichText)],t.prototype,"hpWorthLabel",void 0),r([f(cc.RichText)],t.prototype,"adWorthLabel",void 0),r([f(cc.Button)],t.prototype,"hpLvButton",void 0),r([f(cc.Button)],t.prototype,"adButton",void 0),r([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../../../framework/facade/Facade":"Facade","../config/ExcelTableNames":"ExcelTableNames","../info/World":"World"}],RoleSupply:[function(e,t,o){"use strict";cc._RF.push(t,"2bd6dTM6NBDwZWsxGIeQ2I/","RoleSupply"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ske=null,t.roleNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.ske.setCompleteListener(function(){e.node.destroy()})},t.prototype.setSupply=function(e,t){this.roleNode=t,this.roleNode.on(cc.Node.EventType.POSITION_CHANGED,this.onFollowRole,this);var o="prop_"+("0000000000"+e).substr(-3);this.ske.setSkin(o),this.ske.setAnimation(0,"supplyLong",!1)},t.prototype.onFollowRole=function(){this.node.position=this.roleNode.position},t.prototype.onDestroy=function(){this.roleNode&&this.roleNode.off(cc.Node.EventType.POSITION_CHANGED,this.onFollowRole,this)},__decorate([r(sp.Skeleton)],t.prototype,"ske",void 0),__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],Role:[function(e,t,o){"use strict";cc._RF.push(t,"a7126UmhvpEn48Odvb547b7","Role"),Object.defineProperty(o,"__esModule",{value:!0}),o.SpeedType=void 0;var n,i=e("./RoleAABB"),r=e("./RoleSupply"),a=cc._decorator,c=a.ccclass,l=a.property;(function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.FAST=2]="FAST"})(n=o.SpeedType||(o.SpeedType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireSprite=null,t.gunTopNode=null,t.spriteNode=null,t._speedType=n.STOP,t._speed=0,t._roleAABB=null,t._spaceCircleCollider=null,t.stopSpeed=0,t.normalSpeed=100,t.fastSpeed=200,t.accSpeed=1,t}return __extends(t,e),Object.defineProperty(t.prototype,"spaceCircleCollider",{get:function(){return this._spaceCircleCollider},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roleAABB",{get:function(){return this._roleAABB},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed*this.accSpeed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speedType",{get:function(){return this._speedType},set:function(e){switch(e){case n.STOP:this._speed=this.stopSpeed;break;case n.NORMAL:this._speed=this.normalSpeed;break;case n.FAST:this._speed=this.fastSpeed}this._speedType=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._roleAABB=this.getComponent(i.default),this._spaceCircleCollider=this.getComponent(cc.CircleCollider)},t.prototype.onCollisionEnter=function(e){1==e.tag&&console.log("\u89d2\u8272\u88ab\u653b\u51fb\u4e86.")},t.prototype.addSupply=function(e){var t=cc.loader.getRes("prefab/roleSupply",cc.Prefab),o=cc.instantiate(t);o.getComponent(r.default).setSupply(e,this.node),this.node.getParent().addChild(o)},__decorate([l(cc.Sprite)],t.prototype,"fireSprite",void 0),__decorate([l(cc.Node)],t.prototype,"gunTopNode",void 0),__decorate([l(cc.Node)],t.prototype,"spriteNode",void 0),__decorate([l({type:cc.Enum(n),tooltip:"\u901f\u5ea6\u7ea7\u522b"})],t.prototype,"speedType",null),__decorate([l({tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"})],t.prototype,"stopSpeed",void 0),__decorate([l({tooltip:"\u6b63\u5e38\u901f\u5ea6"})],t.prototype,"normalSpeed",void 0),__decorate([l({tooltip:"\u6700\u5feb\u901f\u5ea6"})],t.prototype,"fastSpeed",void 0),__decorate([l],t.prototype,"accSpeed",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./RoleAABB":"RoleAABB","./RoleSupply":"RoleSupply"}],SettingsController:[function(e,t,o){"use strict";cc._RF.push(t,"70d0e19OftKZJUlHUMeABhq","SettingsController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/audio/Music"),i=e("../info/World"),r=e("../../../framework/component/View"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundToggle=null,t.shakeToggle=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.soundToggle.isChecked=n.Music.getMusicOpen(),this.shakeToggle.isChecked=i.World.Storage.shakeOpen;var e=new cc.Component.EventHandler;e.target=this.node,e.component="SettingsController",e.handler="sfxToggleCallback",e.customEventData="",this.soundToggle.checkEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="SettingsController",t.handler="shakeToggleCallback",t.customEventData="",this.shakeToggle.checkEvents.push(t)},t.prototype.sfxToggleCallback=function(e,t){this.soundToggle.isChecked!=n.Music.getMusicOpen()&&(r.default.executeClickSoundCommand(e,t),n.Music.setMusicOpen(!n.Music.getMusicOpen()),n.Music.sfxOpen=n.Music.getMusicOpen(),n.Music.persistence())},t.prototype.shakeToggleCallback=function(e,t){this.shakeToggle.isChecked!=i.World.Storage.shakeOpen&&(r.default.executeClickSoundCommand(e,t),i.World.Storage.shakeOpen=!i.World.Storage.shakeOpen)},__decorate([l(cc.Toggle)],t.prototype,"soundToggle",void 0),__decorate([l(cc.Toggle)],t.prototype,"shakeToggle",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../framework/audio/Music":"Music","../../../framework/component/View":"View","../info/World":"World"}],ShadowLayerController:[function(e,t,o){"use strict";cc._RF.push(t,"6fe32R8NilNCJIY/KYNM8S+","ShadowLayerController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shadowCamera=null,t.sprite=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=new cc.RenderTexture;e.initWithSize(cc.visibleRect.width,cc.visibleRect.height),this.shadowCamera.targetTexture=e,this.sprite.spriteFrame=new cc.SpriteFrame(e),this.sprite.node.color=cc.Color.BLACK,this.sprite.node.opacity=100},__decorate([r(cc.Camera)],t.prototype,"shadowCamera",void 0),__decorate([r(cc.Sprite)],t.prototype,"sprite",void 0),__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],Shake:[function(e,t,o){"use strict";cc._RF.push(t,"47c33eZuWxPkonS55ujUXfr","Shake"),Object.defineProperty(o,"__esModule",{value:!0}),o.Shake=void 0;var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._initial_x=0,t._initial_y=0,t._strength_x=0,t._strength_y=0,t}var o;return __extends(t,e),o=t,t.create=function(e,t,n){var i=new o;return i.initWithDuration(e,t,n),i},t.prototype.initWithDuration=function(e,t,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=t,this._strength_y=o,!0},t.prototype.fgRangeRand=function(e,t){return Math.random()*(t-e)+e},t.prototype.update=function(){var e=this.fgRangeRand(-this._strength_x,this._strength_x),t=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(e+this._initial_x,t+this._initial_y)},t.prototype.startWithTarget=function(e){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=e.x,this._initial_y=e.y},t.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},o=__decorate([i],t)}(cc.ActionInterval));o.Shake=r,cc._RF.pop()},{}],ShowDialogCommand:[function(e,t,o){"use strict";cc._RF.push(t,"1d21aRvW3dDg4Q92XfCz8Of","ShowDialogCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../facade/Facade"),i=e("../component/LifeCycle"),r=e("./DialogMediator"),a=cc._decorator,c=a.ccclass,l=(a.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o,a){return __awaiter(t,void 0,void 0,function(){var t,c,l,s,u,d,p,f,h;return __generator(this,function(m){switch(m.label){case 0:return t=n.default.addSeparationLayer(e[1],e[2]),[4,cc.loader.loadResAwait(r.default.dialogPrefabName,cc.Prefab)];case 1:for(d in c=m.sent(),(l=cc.instantiate(c)).setParent(n.default.canvasNode),i.default.onDestroyFollow(t,l),s=e[0],u=l.getComponent(r.default),s)if(null!=s[d]&&"function"!=typeof s[d])for(p in s[d])u[d][p]=s[d][p];m.label=2;case 2:return m.trys.push([2,4,,5]),[4,l.onceAwait("clickButton")];case 3:return f=m.sent(),o(f),[3,5];case 4:return h=m.sent(),a(h),[3,5];case 5:return[2]}})})})]})})},__decorate([c("ShowDialogCommand")],e)}());o.default=l,cc._RF.pop()},{"../component/LifeCycle":"LifeCycle","../facade/Facade":"Facade","./DialogMediator":"DialogMediator"}],ShowTipsCommand:[function(e,t,o){"use strict";cc._RF.push(t,"5a011mWwutAHI4SKXF9o6cQ","ShowTipsCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/extend/Extend"),i=e("../../../framework/component/View"),r=cc._decorator,a=r.ccclass,c=(r.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(t){cc.loader.loadRes("prefab/tips",cc.Prefab,function(o,r){if(null==o){var a=cc.instantiate(r),c=a.getChildByName("title").getComponent(cc.RichText),l=e[0]||"\u60a8\u5fd8\u8bb0\u4f20\u53c2\u6570\u55bd";if(c.string="<b><outline color=#1e1e1e width=3>"+l.replace(">","\u300b").replace("<","\u300a")+"</outline></b>",cc.director.getScene()){cc.director.getScene().addChild(a),a.getComponent(cc.Layout).updateLayout(),a.position=cc.v2(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height);var s=n.ext.isIphoneX?.3:.2,u=n.ext.isIphoneX?cc.view.getVisibleSize().height-a.height-i.default.IPHONEX_TOP_BLACK_HEIGHT:cc.view.getVisibleSize().height-a.height;a.runAction(cc.sequence(cc.moveTo(s,cc.v2(cc.view.getVisibleSize().width/2,u)),cc.delayTime(2),cc.moveTo(s,cc.v2(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height)),cc.callFunc(function(){a.destroy(),t()})))}}else console.error(o)})})]})})},__decorate([a("ShowTipsCommand")],e)}());o.default=c,cc._RF.pop()},{"../../../framework/component/View":"View","../../../framework/extend/Extend":"Extend"}],SpacePartition:[function(e,t,o){"use strict";cc._RF.push(t,"1e0c0hTQv9M4Y9mgmNZ7No5","SpacePartition"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){}var t;return t=e,e.randomSpace=function(e,t,o){var n=e.filter(function(e){return e.width>t&&e.height>o});if(0===n.length)return null;var i=n[Math.floor(Math.random()*n.length)%n.length],r=i.xMin+Math.random()*(i.width-t),a=i.yMin+Math.random()*(i.height-o),c=cc.rect(r,a,t,o);return this.partitionRect(e,c),c},e.randomSpaces=function(e,t,o,n){for(var i=[],r=0;r<n;r++){var a=this.randomSpace(e,t,o);if(!a)break;i.push(a)}return i},e.partitionRect=function(e,o,n,i){void 0===n&&(n=0),void 0===i&&(i=0),e.splice(0).forEach(function(r){var a=new cc.Rect;r.intersection(a,o),a.width>0&&a.height>0?t.partitionRects(e,r,[o],n,i):e.push(r)})},e.partitionRects=function(e,t,o,n,i){if(!(t.width<n||t.height<i))if(0!=o.length){var r=o.pop();if(t.xMin<r.xMin){var a=cc.rect(t.xMin,t.yMin,r.xMin-t.xMin,t.height);this.partitionRects(e,a,o.filter(function(e){var t=new cc.Rect;return e.intersection(t,a),t.width>0&&t.height>0}),n,i)}if(t.xMax>r.xMax){var c=cc.rect(r.xMax,t.yMin,t.xMax-r.xMax,t.height);this.partitionRects(e,c,o.filter(function(e){var t=new cc.Rect;return e.intersection(t,c),t.width>0&&t.height>0}),n,i)}if(t.yMax>r.yMax){var l=cc.rect(t.xMin,r.yMax,t.width,t.yMax-r.yMax);this.partitionRects(e,l,o.filter(function(e){var t=new cc.Rect;return e.intersection(t,l),t.width>0&&t.height>0}),n,i)}if(t.yMin<r.yMin){var s=cc.rect(t.xMin,t.yMin,t.width,r.yMin-t.yMin);this.partitionRects(e,s,o.filter(function(e){var t=new cc.Rect;return e.intersection(t,s),t.width>0&&t.height>0}),n,i)}}else e.push(t)},t=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],SpiderEnemy:[function(e,t,o){"use strict";cc._RF.push(t,"944dfHPyTJMzJibewidrYiK","SpiderEnemy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../framework/audio/Music"),i=e("../../game/GameProxy"),r=e("./Enemy"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blinkNode=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"bAcc",{set:function(e){this._bAcc=e,this._bAcc&&!this.blinkNode.active&&(this.blinkNode.active=!0,this.blinkNode.runAction(cc.repeatForever(cc.blink(1,3))),i.GameProxy.pauseGame||n.Music.playSFX("sound/msc_en002"))},enumerable:!1,configurable:!0}),t.prototype.doAttack=function(){this.hp=0,console.log("\u7206\u70b8\u8718\u86db\u6b7b\u6389")},t.prototype.playDead=function(){e.prototype.playDead.call(this);var t=window.GameBulletsController.getInactiveEnemyBullet(this._enemyID);t.node.position=this.node.position,t.node.rotation=this.node.rotation,t.node.active=!0,t.boom()},t.prototype.reset=function(){e.prototype.reset.call(this),this.blinkNode.stopAllActions(),this.blinkNode.active=!1},__decorate([l(cc.Node)],t.prototype,"blinkNode",void 0),__decorate([c],t)}(r.default);o.default=s,cc._RF.pop()},{"../../../../framework/audio/Music":"Music","../../game/GameProxy":"GameProxy","./Enemy":"Enemy"}],StartupCommand:[function(e,t,o){"use strict";cc._RF.push(t,"1f4dfBMj31PKbFLl7ohviZN","StartupCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./config/AppConfig"),i=e("../../framework/extend/Extend"),r=e("../../framework/audio/Music"),a=e("../../framework/component/View"),c=e("../../framework/interceptor/Interceptor"),l=e("./interceptor/OpenViewInterceptor"),s=e("./interceptor/CloseViewInterceptor"),u=e("./interceptor/LoadSceneIntercetor"),d=e("../../framework/persistence/LocalStorage"),p=cc._decorator,f=p.ccclass,h=(p.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(t){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(){return console.log("StartupCommand==>",n.AppConfig.gameName,n.AppConfig.version),d.LocalStorage.prefix=n.AppConfig.GameID,cc.game.setFrameRate(60),cc.director.getCollisionManager(),console.log(i.ext.isIphoneX,"isIphoneX===>"),console.log(i.ext.isLandscape,"isLandscape===>"),n.AppConfig.isDebug||(console.log=function(){}),a.default.clickSoundCommand="ClickSoundCommand",r.Music.init(),c.Interceptor.register("OpenViewCommand",l.default),c.Interceptor.register("CloseViewCommand",s.default),c.Interceptor.register("LoadSceneCommand",u.default),t(!0),[2]})})})]})})},__decorate([f("StartupCommand")],e)}());o.default=h,cc._RF.pop()},{"../../framework/audio/Music":"Music","../../framework/component/View":"View","../../framework/extend/Extend":"Extend","../../framework/interceptor/Interceptor":"Interceptor","../../framework/persistence/LocalStorage":"LocalStorage","./config/AppConfig":"AppConfig","./interceptor/CloseViewInterceptor":"CloseViewInterceptor","./interceptor/LoadSceneIntercetor":"LoadSceneIntercetor","./interceptor/OpenViewInterceptor":"OpenViewInterceptor"}],SwingEffect:[function(e,t,o){"use strict";cc._RF.push(t,"abbefSmFDxID7incLgxXe5d","SwingEffect"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../actions/Actions"),i=cc._decorator,r=i.ccclass,a=i.property,c=i.menu,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startValue=0,t.endValue=0,t.deltaValue=8,t.speed=180,t.times=8,t.damping=0,t.cycleDelay=0,t.repeatNum=0,t.repeatDelay=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=n.default.cycleAction(cc.rotateTo,this.startValue,this.endValue,this.deltaValue,this.speed,this.times,this.damping,this.cycleDelay);this.repeatNum>0?e=cc.repeat(cc.sequence(e,cc.delayTime(this.repeatDelay)),this.repeatNum):this.repeatNum<0&&(e=cc.repeatForever(cc.sequence(e,cc.delayTime(this.repeatDelay)))),this.node.runAction(e)},__decorate([a({displayName:"\u5f00\u59cb\u89d2\u5ea6"})],t.prototype,"startValue",void 0),__decorate([a({displayName:"\u7ed3\u675f\u89d2\u5ea6"})],t.prototype,"endValue",void 0),__decorate([a({displayName:"\u89d2\u5ea6\u5dee"})],t.prototype,"deltaValue",void 0),__decorate([a({displayName:"\u901f\u5ea6"})],t.prototype,"speed",void 0),__decorate([a({displayName:"\u6446\u52a8\u6b21\u6570"})],t.prototype,"times",void 0),__decorate([a({displayName:"\u8870\u51cf\u503c"})],t.prototype,"damping",void 0),__decorate([a({displayName:"\u5468\u671f\u6027\u5ef6\u65f6",textTips:"\u5355\u6446\u5230\u6700\u9ad8\u70b9\u65f6\u5ef6\u65f6"})],t.prototype,"cycleDelay",void 0),__decorate([a({displayName:"\u91cd\u590d",textTips:"\u5c0f\u4e8e\u96f6\u8868\u793arepeatForever"})],t.prototype,"repeatNum",void 0),__decorate([a({displayName:"\u91cd\u590d\u5ef6\u65f6",textTips:"\u91cd\u590d\u6b21\u6570\u4e0d\u7b49\u4e8e0\u65f6\u624d\u6709\u6548"})],t.prototype,"repeatDelay",void 0),__decorate([r,c("\u81ea\u5b9a\u4e49/SwingEffect")],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../actions/Actions":"Actions"}],SwitchAudioCommand:[function(e,t,o){"use strict";cc._RF.push(t,"0d2e7m1GVBPX4D7BSHixkfQ","SwitchAudioCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Music"),i=e("../component/View"),r=cc._decorator,a=r.ccclass,c=(r.property,function(){function e(){}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(o){return __awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(){return t=!n.Music.getMusicOpen(),"object"==typeof e[0]&&e[0].constructor==cc.Toggle&&(t=e[0].isChecked)!=n.Music.getMusicOpen()&&i.default.executeClickSoundCommand(e[0],e[1]),n.Music.setMusicOpen(t),n.Music.sfxOpen=t,n.Music.persistence(),o(),[2]})})})]})})},__decorate([a("SwitchAudioCommand")],e)}());o.default=c,cc._RF.pop()},{"../component/View":"View","./Music":"Music"}],TableViewMediator:[function(e,t,o){"use strict";cc._RF.push(t,"579ceeOw5xKP6NamQb0EmS/","TableViewMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./AbstractTableItem"),i=cc._decorator,r=i.ccclass,a=i.property,c=i.menu,l=i.requireComponent,s=i.disallowMultiple,u=i.executionOrder,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.template=null,t.marginTop=0,t.marginBottom=0,t.margin=0,t.testNum=0,t.itemAction=!1,t.itemHeight=0,t.list=[],t.firstIndex=0,t.firstIndexMax=0,t._datas=[],t.createNodesFinish=!1,t}return __extends(t,e),t.prototype.createNodesListener=function(e){this.createNodesFinish?e():this.node.on("CreateNodesSuccess",function(){e()})},Object.defineProperty(t.prototype,"datas",{get:function(){return this._datas},set:function(e){var t=this;this.createNodesListener(function(){var o=Math.ceil((t.scrollView.node.getContentSize().height-t.marginTop-t.marginBottom+t.margin)/(t.itemHeight+t.margin));t.firstIndexMax=e.length-o-1,t._datas=e.slice(0),t.scrollView.content.height=t.marginTop+t.marginBottom+t.itemHeight*t._datas.length+t.margin*(t._datas.length-1),t.firstIndex=0,t.scrollView.scrollToTop(),t.list.forEach(function(e,o){e.y=-t.marginTop-e.height/2-o*(e.height+t.margin),o>=t._datas.length&&(e.active=!1)}),t.updateData(),t.itemAction&&t.showAction()})},enumerable:!1,configurable:!0}),t.prototype.createNode=function(){var e=cc.instantiate(this.template.node);return e.active=!1,this.itemHeight=e.getContentSize().height,e.x=0,e.setParent(this.scrollView.content),this.list.push(e),e},t.prototype.addNode=function(e){var t=this;if(e<=this.scrollView.node.getContentSize().height)this.node.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){t.createNode().y=-e-t.itemHeight/2,e+=t.itemHeight+t.margin,t.addNode(e)})));else{this.createNode().y=-e-this.itemHeight/2;var o=new cc.Component.EventHandler;o.target=this.node,o.component="TableViewMediator",o.handler="onScrollEvent",o.customEventData="",this.scrollView.scrollEvents.push(o),this.createNodesFinish||(this.createNodesFinish=!0,this.node.emit("CreateNodesSuccess"))}},t.prototype.onLoad=function(){if(this.scrollView=this.node.getComponent(cc.ScrollView),this.addNode(this.marginTop),this.testNum>0){for(var e=[],t=0;t<this.testNum;t++)e.push(t+1);this.datas=e}},t.prototype._adjustList=function(){for(var e=this.scrollView.node.getContentSize(),t=this.scrollView.content,o=this.itemHeight/2,n=this.marginTop+(this.itemHeight+this.margin)*this.list.length-this.margin;n<e.height+this.itemHeight;){var i=cc.instantiate(this.template.node);if(i.active=!1,i.x=0,i.y=-n-o,i.setParent(t),this.list.push(i),n+=this.itemHeight+this.margin,this._datas.length>=this.list.length){var r=this.list.length-1,a=this.list[r];a.active=!0,this.updateItem(a,r)}}if(this._datas.length>0){var c=Math.ceil((e.height-this.marginTop-this.marginBottom+this.margin)/(this.itemHeight+this.margin));this.firstIndexMax=this._datas.length-c-1}},t.prototype.updateData=function(){var e=this.list.slice(0,Math.min(this._datas.length,this.list.length));this.updateItems(e,0)},t.prototype.showAction=function(){this.list.slice(0,Math.min(this._datas.length,this.list.length)).forEach(function(e,t){if(e.scaleX=0,e.active)e.runAction(cc.scaleTo(.3+.08*t,1).easing(cc.easeCubicActionInOut()));else{var o=e.addComponent(cc.Component);o.onEnable=function(){e.runAction(cc.scaleTo(.3+.08*t,1).easing(cc.easeCubicActionInOut()))},o.onDisable=function(){o.destroy()}}})},t.prototype.updateItems=function(e,t){var o=this;t<e.length&&this.node.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){var n=e[t];n.active=!0,o.updateItem(n,o.firstIndex+t),o.updateItems(e,t+1)})))},t.prototype.updateItem=function(e,t){var o=this._datas[t];e.getComponent(n.default).upadteItem(o,t)},t.prototype.onScrollEvent=function(){for(var e=this.scrollView.content,t=this.scrollView.node.getContentSize().height,o=e.y,n=this.itemHeight/2;this.firstIndex>0&&this.list[0].y+this.marginTop+n<-o;){var i=this.list.pop();i.y=this.list[0].y+this.itemHeight+this.margin,this.list.unshift(i),this.firstIndex--,this.updateItem(i,this.firstIndex)}for(;this.firstIndex<this.firstIndexMax&&this.list[this.list.length-1].y-n-this.marginBottom>-o-t;){var r=this.list.shift();r.y=this.list[this.list.length-1].y-this.itemHeight-this.margin,this.list.push(r),this.firstIndex++,this.updateItem(r,this.firstIndex+this.list.length-1)}},__decorate([a(n.default)],t.prototype,"template",void 0),__decorate([a({type:cc.Integer})],t.prototype,"marginTop",void 0),__decorate([a({type:cc.Integer})],t.prototype,"marginBottom",void 0),__decorate([a({type:cc.Integer})],t.prototype,"margin",void 0),__decorate([a],t.prototype,"testNum",void 0),__decorate([a],t.prototype,"itemAction",void 0),__decorate([r,c("\u81ea\u5b9a\u4e49/TableViewMediator"),l(cc.ScrollView),s,u(-10)],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./AbstractTableItem":"AbstractTableItem"}],TakeJackpotController:[function(e,t,o){"use strict";cc._RF.push(t,"714fcJtcJtP9q86lkg3hnXM","TakeJackpotController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/facade/Facade"),i=e("../../../framework/extend/Extend"),r=e("../info/World"),a=e("./AdManner"),c=e("../../banner"),l=cc._decorator,s=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.oneLabel=null,t.threeLabel=null,t.oneButtonNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){c.default.show_banner(15),this.updateView(),n.default.canvasNode.on("UpdateStorage",this.onUpdateStorage,this)},t.prototype.onDestroy=function(){c.default.hide_banner(),n.default.canvasNode.off("UpdateStorage",this.onUpdateStorage,this)},t.prototype.onUpdateStorage=function(e){"dayEarnTotal"==e&&this.updateView()},t.prototype.updateView=function(){this.oneLabel.string=i.ext.shortFormat(r.World.Storage.dayEarnTotal),this.threeLabel.string=i.ext.shortFormat(3*r.World.Storage.dayEarnTotal)},t.prototype.onTakeIt=function(e,t){var o=this;1==(t=parseInt(t))?(this.node.destroy(),n.default.canvasNode.emit("TakeJackpot",1)):a.default.showVideo(function(e){e?(console.log("1111111111111111"),o.node.destroy(),n.default.canvasNode.emit("TakeJackpot",3)):console.log("22222222222222222222")})},__decorate([u(cc.Label)],t.prototype,"oneLabel",void 0),__decorate([u(cc.Label)],t.prototype,"threeLabel",void 0),__decorate([u(cc.Node)],t.prototype,"oneButtonNode",void 0),__decorate([s],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../framework/extend/Extend":"Extend","../../../framework/facade/Facade":"Facade","../../banner":"banner","../info/World":"World","./AdManner":"AdManner"}],Task:[function(e,t,o){"use strict";cc._RF.push(t,"763c02OmEBA5Yyyt0WowwAG","Task"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./World"),i=e("../config/ExcelTableNames"),r=e("../../../framework/config/ExcelConfig"),a=cc._decorator,c=a.ccclass,l=(a.property,function(){function e(){}return e.initCurrentLvData=function(){this._taskItemsOfCurrentLv=this._taskProxy.list.map(function(e){return{id:e.id,num:0,take:!1}})},e.mergeCurrentLvData=function(){var e=this;console.log("mergeCurrentLvData==>"),console.log(this._taskItemsOfCurrentLv,"this._taskItemsOfCurrentLv");var t=!1;this._taskItemsOfCurrentLv.forEach(function(o,n){var a=r.ExcelConfig.getExcelLine(i.ExcelTableNames.task,"id",o.id);o.num>0&&e._taskProxy.list[n].num<a.num&&(e._taskProxy.list[n].num+=o.num,e._taskProxy.list[n].num>=a.num&&(e._taskProxy.list[n].num=a.num),t=!0)}),t&&this.write()},e.write=function(){n.World.Storage.task=JSON.stringify(this._taskProxy)},e.addNum=function(e,t){console.log("======>addNum",e,t);var o=this._taskItemsOfCurrentLv.find(function(t){return t.id==e});o&&(o.num+=t),console.log(this._taskItemsOfCurrentLv,"----")},e.killEnemy=function(){this.addNum(1,1)},e.killLuckyEnemy=function(){this.addNum(2,1)},e.triggerCrazy=function(){this.addNum(3,1)},e.killBoss=function(){this.addNum(4,1)},e.useTool=function(){this.addNum(5,1)},e.init=function(){console.log("Task.initBullet===>");var e=JSON.parse(n.World.Storage.task);if(!e||!e.expireTime||e.expireTime<=n.World.My.serverTime){e={};var t=new Date(n.World.My.serverTime);console.log(t.getFullYear()+"\u5e74"+t.getMonth()+"\u6708"+t.getDay()+"\u65e5"+t.getHours()+"\u65f6"+t.getMinutes()+"\u5206"+t.getSeconds()+"\u79d2"+t.getMilliseconds()+"\u6beb\u79d2");var o=86400-(3600*t.getHours()+60*t.getMinutes()+t.getSeconds()),a=Math.floor(o/3600),c=Math.floor((o-3600*a)/60),l=o%60;console.log(a+"\u65f6"+c+"\u5206"+l+"\u79d2-----------"),e.expireTime=n.World.My.serverTime+1e3*o-t.getMilliseconds(),e.box=!1,e.list=[];for(var s=r.ExcelConfig.getExcelTable(i.ExcelTableNames.task).filter(function(e){return 1==e.type}),u=0;u<3;u++){var d=Math.floor(100*Math.random())%s.length,p=s[d];console.log(d,p.id,"====="),e.list.push({id:parseInt(p.id),num:0,take:!1}),s.splice(d,1)}n.World.Storage.task=JSON.stringify(e)}else if(e&&!e.list)for(var f in this._taskProxy.list=[],this._taskProxy)if("expireTime"!=f&&"box"!=f&&"list"!=f){var h=parseInt(f),m=this._taskProxy[f],g=r.ExcelConfig.getExcelLine(i.ExcelTableNames.task,"id",h);if(g.num){var y=m>=g.num;this._taskProxy.list.push({id:h,num:m,take:y})}}this._taskProxy=e,this.initCurrentLvData()},Object.defineProperty(e,"taskProxy",{get:function(){return this._taskProxy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"taskItemsOfCurrentLv",{get:function(){return this._taskItemsOfCurrentLv},enumerable:!1,configurable:!0}),__decorate([c],e)}());o.default=l,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../config/ExcelTableNames":"ExcelTableNames","./World":"World"}],TestAngle:[function(e,t,o){"use strict";cc._RF.push(t,"08336c0HZ1Nj6P1bDyiai7U","TestAngle"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){var e=this;this.node.on(cc.Node.EventType.ROTATION_CHANGED,function(){var t=cc.misc.degreesToRadians(-e.node.rotation),o=cc.v2(0,1).rotate(t),n=cc.v2(0,1).angle(o);console.log("angle="+n+" rotation="+e.node.rotation+" radians="+t+" dir.x="+o.x+" dir.y="+o.y)}),this.node.runAction(cc.rotateBy(3,360))},__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],TestInterceptor2:[function(e,t,o){"use strict";cc._RF.push(t,"106578FBhpDPKHz51vWDn84","TestInterceptor2"),Object.defineProperty(o,"__esModule",{value:!0}),o.TestInterceptor2=void 0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.postHandle=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){setTimeout(function(){console.log("postHandle  TestInterceptor2"),e(!0)},3e3)})]})})},t.prototype.preHandle=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){setTimeout(function(){console.log("preHandle  TestInterceptor2"),e(!0)},3e3)})]})})},t}(e("./PostCommandInterceptor").PostCommandInterceptor);o.TestInterceptor2=n,cc._RF.pop()},{"./PostCommandInterceptor":"PostCommandInterceptor"}],TestInterceptor:[function(e,t,o){"use strict";cc._RF.push(t,"15bb6OJyFFCL6LFRF9kunrS","TestInterceptor"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PostCommandInterceptor"),i=e("./Interceptor"),r=cc._decorator,a=(r.ccclass,r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.postHandle=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){setTimeout(function(){console.log("postHandle"),e(!0)},3e3)})]})})},t.prototype.preHandle=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){setTimeout(function(){console.log(i.Interceptor.interceptorsOf("test.TestCommand"),"===="),i.Interceptor.unregister("test.TestCommand",t),console.log(i.Interceptor.interceptorsOf("test.TestCommand"),"====22"),e(!0)},3e3)})]})})},t}(n.PostCommandInterceptor));o.default=a,cc._RF.pop()},{"./Interceptor":"Interceptor","./PostCommandInterceptor":"PostCommandInterceptor"}],TestRotation:[function(e,t,o){"use strict";cc._RF.push(t,"cad22+MNstHcIlfr5+qbGo1","TestRotation"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.sprite=null,t}return __extends(t,e),t.prototype.start=function(){var e=new cc.RenderTexture;e.initWithSize(cc.visibleRect.width,cc.visibleRect.height),this.camera.targetTexture=e,this.sprite.spriteFrame=new cc.SpriteFrame(e),this.sprite.node.color=cc.Color.BLACK,this.sprite.node.opacity=100},__decorate([r(cc.Camera)],t.prototype,"camera",void 0),__decorate([r(cc.Sprite)],t.prototype,"sprite",void 0),__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],TestSpineEvent:[function(e,t,o){"use strict";cc._RF.push(t,"90c1f8f8DJO3rWorMFglZHA","TestSpineEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){this.getComponent(sp.Skeleton).setEventListener(function(e,t){var o=e.animation?e.animation.name:"";console.log("[track %s][animation %s] event: %s, %s, %s, %s",e.trackIndex,o,t.data.name,t.intValue,t.floatValue,t.stringValue)})},__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],TestWait:[function(e,t,o){"use strict";cc._RF.push(t,"1c768sedl9GM7v8nUM1WrZ/","TestWait"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.update=function(){this.getComponent("BehaviorTree").tick()},__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],Toast:[function(e,t,o){"use strict";cc._RF.push(t,"909590vl5dAK5p6FmzQ2dSn","Toast"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){}return e.flutterAction=function(){var e=cc.sequence([cc.moveBy(.6,cc.v2(0,0)),cc.moveBy(1,cc.v2(0,84))]),t=(cc.sequence([cc.scaleTo(.1,1.2),cc.scaleTo(.1,.8),cc.scaleTo(.1,1)]),cc.sequence([cc.fadeTo(.8,255),cc.fadeTo(.8,0)]));return cc.spawn(e,t)},e.createRichText=function(e){var t="OnlyOneToastNode",o=cc.director.getScene().getChildByName(t);o||(o=new cc.Node(t),cc.director.getScene().addChild(o,100)),o.scale=1,o.rotation=0,o.opacity=255,o.group=e.group||"ui",o.x=e.x||cc.visibleRect.center.x,o.y=e.y||cc.visibleRect.center.y;var n=o.addComponent(cc.Sprite);n.type=cc.Sprite.Type.SLICED,n.sizeMode=cc.Sprite.SizeMode.CUSTOM,n.spriteFrame=cc.loader.getRes("frame_fy005",cc.SpriteFrame);var i=o.getChildByName("RichTextNode");i||(i=new cc.Node("RichTextNode"),o.addChild(i),i.addComponent(cc.RichText));var r=i.getComponent(cc.RichText);return r.fontSize=e.fontSize||38,r.string=e.string,r.lineHeight=r.fontSize+10,o.setContentSize(r.node.width+30,r.node.height+20),o},e.flutter=function(e){var t=this.createRichText(e);t.stopAllActions(),t.runAction(cc.sequence(cc.delayTime(.6),this.flutterAction(),cc.callFunc(function(){return t.destroy()})))},e.fadeOut=function(e){var t=this.createRichText(e);t.stopAllActions(),t.runAction(cc.sequence(cc.delayTime(.8),cc.fadeTo(2,80),cc.callFunc(function(){return t.destroy()})))},__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],TopController:[function(e,t,o){"use strict";cc._RF.push(t,"60d27bwvCFAMqFkoQdcCoGl","TopController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../info/World"),i=e("../../../framework/extend/Extend"),r=e("../../../framework/facade/Facade"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldLabel=null,t.lvLabels=[],t}return __extends(t,e),t.prototype.init=function(){this.lvLabels.forEach(function(e,t){return e.string="<b><outline color=#1e1e1e width=3>"+(n.World.Storage.gameLevel-1+t)+"</outline></b>"}),n.World.Storage.gameLevel<2&&(this.lvLabels[0].node.getParent().active=!1),this.updateView()},t.prototype.onLoad=function(){r.default.canvasNode.on("UpdateStorage",this.onUpdateStorageEvent,this),this.init()},t.prototype.onDestroy=function(){r.default.canvasNode.off("UpdateStorage",this.onUpdateStorageEvent,this)},t.prototype.onUpdateStorageEvent=function(e){"power"==e||"goldCount"==e&&(this.goldLabel.string="<b><outline color=#1e1e1e width=3>"+i.ext.shortFormat(n.World.Storage.goldCount)+"</outline></b>")},t.prototype.updateView=function(){this.goldLabel.string="<b><outline color=#1e1e1e width=3>"+i.ext.shortFormat(n.World.Storage.goldCount)+"</outline></b>"},t.prototype.onClickPlus=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return t=parseInt(t),[4,r.default.executeCommand("OpenViewCommand","prefab/exchange")];case 1:return e.sent()[0].getComponent("ExchangeController").type=t,[2]}})})},__decorate([l(cc.RichText)],t.prototype,"goldLabel",void 0),__decorate([l(cc.RichText)],t.prototype,"lvLabels",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../framework/extend/Extend":"Extend","../../../framework/facade/Facade":"Facade","../info/World":"World"}],UIScale:[function(e,t,o){"use strict";cc._RF.push(t,"422cbmXYSFCDaWW8A+EYdil","UIScale"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.menu,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fitScale=!1,t.fitPosition=!0,t}return __extends(t,e),t.prototype.start=function(){var e=cc.view.getVisibleSize().height/cc.view.getDesignResolutionSize().height,t=cc.view.getVisibleSize().width/cc.view.getDesignResolutionSize().width,o=Math.abs(e-t);if(this.fitScale&&this.node.setScale(this.node.scale+o),this.fitPosition){var n=this.node.convertToWorldSpaceAR(cc.v2(0,0));if(e>t){var i=n.y*(1+o);this.node.y=this.node.convertToNodeSpaceAR(cc.v2(0,i)).y}else{var r=n.x*(1+o);this.node.x=this.node.convertToNodeSpaceAR(cc.v2(r,0)).x}}},__decorate([r],t.prototype,"fitScale",void 0),__decorate([r],t.prototype,"fitPosition",void 0),__decorate([i,a("\u81ea\u5b9a\u4e49/UIScale")],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],UpEffectController:[function(e,t,o){"use strict";cc._RF.push(t,"de3b1rlVrNDVqI1fkc5g6jI","UpEffectController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/facade/Facade"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventName="",t.ske=null,t}return __extends(t,e),t.prototype.onShowEffect=function(){this.ske.node.active=!0,this.ske.setAnimation(0,"vfxAll",!1)},t.prototype.onLoad=function(){var e=this;""!==this.eventName&&n.default.canvasNode.on(this.eventName,this.onShowEffect,this),this.ske.setCompleteListener(function(){cc.isValid(e)&&cc.isValid(e.ske)&&(e.ske.node.active=!1)}),this.ske.node.active=!1},t.prototype.onDestroy=function(){n.default.canvasNode.off(this.eventName,this.onShowEffect,this)},__decorate([a],t.prototype,"eventName",void 0),__decorate([a(sp.Skeleton)],t.prototype,"ske",void 0),__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../framework/facade/Facade":"Facade"}],View:[function(e,t,o){"use strict";cc._RF.push(t,"a2bbdzy4UJJ65VrnqbThiRb","View"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../extend/Extend"),i=e("../facade/Facade"),r=cc._decorator,a=r.ccclass,c=r.property,l=r.menu,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startCommandName="",t.adapterIphoneX=[],t.targetToCanvas=[],t.screenSize=[],t.releasePrefab=!1,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){n.ext.isIphoneX&&this.adapterIphoneX.forEach(function(e){return e.top+=o.IPHONEX_TOP_BLACK_HEIGHT}),this.targetToCanvas.forEach(function(e){return e.target=i.default.canvasNode}),this.screenSize.forEach(function(e){return e.setContentSize(i.default.canvasNode.getContentSize())})},t.prototype.start=function(){""!=this.startCommandName&&i.default.executeCommand(this.startCommandName)},t.prototype.onDestroy=function(){this.releasePrefab&&i.default.releasePrefab("prefab/"+this.node.name)},t.prototype.closeView=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return"string"!=typeof t||""==t?[3,2]:[4,i.default.executeCommand(t)];case 1:e.sent(),e.label=2;case 2:return[4,i.default.executeCommand("CloseViewCommand",this.node)];case 3:return e.sent(),[2]}})})},t.prototype.closeViewWithClickSound=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return o.executeClickSoundCommand(e,t),[4,this.closeView(e,t)];case 1:return n.sent(),[2]}})})},t.prototype.openView=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i.default.executeCommand("OpenViewCommand",t)];case 1:return e.sent(),[2]}})})},t.prototype.openViewWithClickSound=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return o.executeClickSoundCommand(e,t),[4,this.openView(e,t)];case 1:return n.sent(),[2]}})})},t.prototype.loadScene=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i.default.executeCommand("LoadSceneCommand",t)];case 1:return e.sent(),[2]}})})},t.prototype.loadSceneWithClickSound=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return o.executeClickSoundCommand(e,t),[4,i.default.executeCommand("LoadSceneCommand",t)];case 1:return n.sent(),[2]}})})},t.prototype.executeCommand=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return[4,i.default.executeCommand(t,e)];case 1:return o.sent(),[2]}})})},t.prototype.executeCommandWithClickSound=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return o.executeClickSoundCommand(e,t),[4,this.executeCommand(e,t)];case 1:return n.sent(),[2]}})})},t.executeClickSoundCommand=function(e,t){o.clickSoundCommand&&i.default.executeCommand(o.clickSoundCommand,e,t)},t.clickSoundCommand=null,t.IPHONEX_TOP_BLACK_HEIGHT=66,__decorate([c({displayName:"\u542f\u52a8\u547d\u4ee4",tooltip:"\u52a0\u8f7d\u6210\u529f\u540e\u6267\u884c\u542f\u52a8\u547d\u4ee4"})],t.prototype,"startCommandName",void 0),__decorate([c({type:cc.Widget,displayName:"\u9002\u914dIphoneX",tooltip:"widget.top += 66"})],t.prototype,"adapterIphoneX",void 0),__decorate([c({type:cc.Widget,displayName:"\u7ed1\u5b9aCanvas",tooltip:"widget.target=canvas"})],t.prototype,"targetToCanvas",void 0),__decorate([c({type:cc.Node,displayName:"\u8bbe\u7f6e\u5c4f\u5e55\u5927\u5c0f",tooltip:"node.setContentSize(screenSize)"})],t.prototype,"screenSize",void 0),__decorate([c],t.prototype,"releasePrefab",void 0),o=__decorate([a,l("\u81ea\u5b9a\u4e49/View")],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../extend/Extend":"Extend","../facade/Facade":"Facade"}],WeaponLayerController:[function(e,t,o){"use strict";cc._RF.push(t,"f0699YuuRlMApvOLWG3FOLt","WeaponLayerController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../info/World"),c=e("../../../framework/extend/Extend"),l=e("../../../framework/extend/Toast"),s=e("../../../framework/config/ExcelConfig"),u=e("../config/ExcelTableNames"),d=e("../../../framework/facade/Facade"),p=cc._decorator,f=p.ccclass,h=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firePowerLvLabel=null,t.powerLvLabel=null,t.firePowerCostLabel=null,t.powerCostLabel=null,t.firePowerWorthLabel=null,t.powerWorthLabel=null,t.firePowerButton=null,t.powerButton=null,t.scrollView=null,t.upEffectNode=null,t.trialNode=null,t.weaponButtons=[],t._weaponFocus=-1,t._orders=[],t}return i(t,e),t.prototype.focusGunID=function(){return this._orders[this._weaponFocus].id},Object.defineProperty(t.prototype,"weaponFocus",{set:function(e){var t=this;this._weaponFocus!=e&&(this.upEffectNode.removeFromParent(!1),this.weaponButtons[e].node.addChild(this.upEffectNode),this._weaponFocus=e,this.weaponButtons.forEach(function(e,o){return e.target.getComponent(cc.Sprite).enabled=o==t._weaponFocus}),this.updateWeaponAttr())},enumerable:!1,configurable:!0}),t.prototype.updateWeaponAttr=function(){this.updateFirePower(),this.updatePower()},t.prototype.onLoad=function(){var e=this;this.trialNode.active=!1,this.weaponButtons=this.scrollView.content.children.map(function(e){return e.getComponent(cc.Button)});var t=s.ExcelConfig.getExcelTable(u.ExcelTableNames.Weapon);this._orders=t.filter(function(e){return 1!=e.id}).sort(function(e,t){return e.order-t.order}),this.weaponButtons.forEach(function(t){var o=parseInt(t.node.name),n=e._orders[o-2];t.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=n.gun_name,t.node.getChildByName("Background").getChildByName("weapon").active=!1;var i=t.node.getChildByName("Background").getChildByName("weaponSprite").getComponent(cc.Sprite),r=a.World.Storage.gameLevel<n.unlock;i.setMaterial(0,cc.Material.getBuiltinMaterial(r?"2d-gray-sprite":"2d-sprite")),i.node.opacity=r?128:255}),cc.find("Canvas").on("UpdateStorage",this.onUpdateStorageEvent,this)},t.prototype.start=function(){for(var e=0,t=0,o=this._orders;t<o.length;t++){var n=o[t];if(!(a.World.Storage.gameLevel>=n.unlock))break;e++}if(e<=3)this.scrollView.scrollToLeft();else if(e>=this._orders.length-1)this.scrollView.scrollToRight();else{var i=(e-3)*this.weaponButtons[0].node.width;this.scrollView.scrollToOffset(cc.v2(i,this.scrollView.content.y))}if(this.weaponFocus=e-1,a.World.Storage.unlockGun>0){var r=this._orders.findIndex(function(e){return e.id==a.World.Storage.unlockGun});void 0===r?console.error("not found gun for id===>",a.World.Storage.unlockGun):(this.trialNode.removeFromParent(!1),this.trialNode.active=!0,this.weaponButtons[r].node.addChild(this.trialNode))}},t.prototype.onDestroy=function(){cc.find("Canvas").off("UpdateStorage",this.onUpdateStorageEvent,this)},t.prototype.onUpdateStorageEvent=function(e){if("goldCount"==e){var t=this._orders[this._weaponFocus],o=t.id,n=a.World.My.armory.levelOfEmitterFirePower(o);if(n<t.lv_limit){var i=s.ExcelConfig.getExcelTable(u.ExcelTableNames.WeaponUp)[n-1].fire_expend;this.firePowerButton.interactable=a.World.Storage.goldCount>=i,this.firePowerCostLabel.node.color=this.firePowerButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338")}var r=a.World.My.armory.levelOfEmitterPower(o);r<t.lv_limit&&(i=s.ExcelConfig.getExcelTable(u.ExcelTableNames.WeaponUp)[r-1].power_expend,this.powerButton.interactable=a.World.Storage.goldCount>=i,this.powerCostLabel.node.color=this.powerButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338"))}},t.prototype.updateFirePower=function(){var e=this._orders[this._weaponFocus],t=e.id,o=a.World.My.armory.levelOfEmitterFirePower(t);if(this.firePowerLvLabel.string="<b><outline color=#1e1e1e width=4>Capacity [Lv."+o+"]</outline></b>",o>=e.lv_limit)this.firePowerCostLabel.string="<b><outline color=#1e1e1e width=3>Full Lv</outline></b>",this.firePowerButton.interactable=!1;else{var n=s.ExcelConfig.getExcelTable(u.ExcelTableNames.WeaponUp)[o-1].fire_expend;this.firePowerCostLabel.string="<b><outline color=#1e1e1e width=3>"+c.ext.shortFormat(n)+"</outline></b>",this.firePowerButton.interactable=a.World.Storage.goldCount>=n}this.firePowerCostLabel.node.color=this.firePowerButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338"),this.firePowerWorthLabel.string="<b><outline color=#1e1e1e width=3>"+c.ext.shortFormat(a.World.My.armory.payloadAddOf(t))+"</outline></b>"},t.prototype.updatePower=function(){var e=this._orders[this._weaponFocus],t=e.id,o=a.World.My.armory.levelOfEmitterPower(t);if(this.powerLvLabel.string="<b><outline color=#1e1e1e width=4>FirePower [Lv."+o+"]</outline></b>",o>=e.lv_limit)this.powerCostLabel.string="<b><outline color=#1e1e1e width=3>Full Lv</outline></b>",this.powerButton.interactable=!1;else{var n=s.ExcelConfig.getExcelTable(u.ExcelTableNames.WeaponUp)[o-1].power_expend;this.powerCostLabel.string="<b><outline color=#1e1e1e width=3>"+c.ext.shortFormat(n)+"</outline></b>",this.powerButton.interactable=a.World.Storage.goldCount>=n}this.powerCostLabel.node.color=this.powerButton.interactable?cc.Color.WHITE:cc.Color.RED.fromHEX("#924338");var i=s.ExcelConfig.getExcelTable(u.ExcelTableNames.WeaponUp)[o-1].hurt_add;this.powerWorthLabel.string="<b><outline color=#1e1e1e width=3>"+Math.floor(100*i)+"%</outline></b>"},t.prototype.onClickWeapon=function(e,t){t=parseInt(t);var o=this._orders[t-2];a.World.Storage.gameLevel<o.unlock?l.default.flutter({string:"<color=#faffff><b><outline color=#1e1e1e width=4>Unlock at Lv."+o.unlock+"</outline></b></color>",fontSize:30,y:cc.visibleRect.center.y}):(this.weaponButtons[this._weaponFocus].node.getChildByName("Background").getChildByName("weaponSprite").active=!0,this.weaponButtons[this._weaponFocus].node.getChildByName("Background").getChildByName("weapon").active=!1,this.weaponFocus=t-2)},t.prototype.onClickUpWeaponFirePower=function(){var e=this._orders[this._weaponFocus].id,t=a.World.My.armory.levelOfEmitterFirePower(e);if(t>=a.World.Storage.ADLv)l.default.flutter({string:"<color=#faffff><b><outline color=#1e1e1e width=4>The level shall not be higher than the base combat effectiveness</outline></b></color>",fontSize:30,y:cc.visibleRect.center.y});else{var o=s.ExcelConfig.getExcelTable(u.ExcelTableNames.WeaponUp)[t-1].fire_expend;a.World.Storage.goldCount-=o,a.World.My.armory.addLevelOfEmitterFirePower(e,1),this.updateFirePower(),d.default.canvasNode.emit("WeaponUp")}},t.prototype.onClickUpWeaponPower=function(){var e=this._orders[this._weaponFocus].id,t=a.World.My.armory.levelOfEmitterPower(e);if(t>=a.World.Storage.ADLv)l.default.flutter({string:"<color=#faffff><b><outline color=#1e1e1e width=4>\u7b49\u7ea7\u4e0d\u5f97\u9ad8\u4e8e\u57fa\u7840\u6218\u6597\u529b</outline></b></color>",fontSize:30,y:cc.visibleRect.center.y});else{var o=s.ExcelConfig.getExcelTable(u.ExcelTableNames.WeaponUp)[t-1].power_expend;a.World.Storage.goldCount-=o,a.World.My.armory.addLevelOfEmitterPower(e,1),this.updatePower(),d.default.canvasNode.emit("WeaponUp")}},t.prototype.onClickToggle=function(e){if(console.log("WeaponLayerController===>onClickToggle..."),e.isChecked&&a.World.Storage.unlockGun>0){var t=this._orders.findIndex(function(e){return e.id==a.World.Storage.unlockGun});console.log("index===>",t),void 0===t?console.error("not found gun for id===>",a.World.Storage.unlockGun):(this.weaponFocus=t,this.weaponButtons[t].node.getChildByName("Background").getChildByName("weaponSprite").active=!1,this.weaponButtons[t].node.getChildByName("Background").getChildByName("weapon").active=!0,this.weaponButtons[t].node.getChildByName("Background").getChildByName("weapon").getComponent(sp.Skeleton).setAnimation(0,"gun_002",!0))}},r([h(cc.RichText)],t.prototype,"firePowerLvLabel",void 0),r([h(cc.RichText)],t.prototype,"powerLvLabel",void 0),r([h(cc.RichText)],t.prototype,"firePowerCostLabel",void 0),r([h(cc.RichText)],t.prototype,"powerCostLabel",void 0),r([h(cc.RichText)],t.prototype,"firePowerWorthLabel",void 0),r([h(cc.RichText)],t.prototype,"powerWorthLabel",void 0),r([h(cc.Button)],t.prototype,"firePowerButton",void 0),r([h(cc.Button)],t.prototype,"powerButton",void 0),r([h(cc.ScrollView)],t.prototype,"scrollView",void 0),r([h(cc.Node)],t.prototype,"upEffectNode",void 0),r([h(cc.Node)],t.prototype,"trialNode",void 0),r([f],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../framework/config/ExcelConfig":"ExcelConfig","../../../framework/extend/Extend":"Extend","../../../framework/extend/Toast":"Toast","../../../framework/facade/Facade":"Facade","../config/ExcelTableNames":"ExcelTableNames","../info/World":"World"}],Welcome:[function(e,t,o){"use strict";cc._RF.push(t,"9e3f6FMdypHP65fD2gjB7kj","Welcome"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../network/Network"),i=e("../../../framework/facade/Facade"),r=e("../home/AdManner"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;r.default.initvideo(),cc.warn=function(){};var t=[];t.push(new Promise(function(e){n.default.login().then(function(){n.default.initData().then(function(){e()})})})),t.push(i.default.executeCommand("LoadingCommand")),t.push(new Promise(function(t){e.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){return t()})))})),Promise.all(t).then(function(){cc.loader.loadRes("prefab/HomeScene",cc.Prefab,function(t,o){if(null==t){var n=cc.instantiate(o);i.default.canvasNode.addChild(n),e.bgNode.destroy()}else console.error(t)})})},__decorate([l(cc.Node)],t.prototype,"bgNode",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../framework/facade/Facade":"Facade","../home/AdManner":"AdManner","../network/Network":"Network"}],World:[function(e,t,o){"use strict";cc._RF.push(t,"1fe1d3cS4ZOUpBrBhZxt6l/","World"),Object.defineProperty(o,"__esModule",{value:!0}),o.World=void 0;var n=e("../../../framework/persistence/LocalStorage"),i=e("../network/Network"),r=e("../config/NetworkConfig"),a=e("./Armory"),c=e("./PropInfo"),l=e("./Newbies");(function(e){e.POWER_MAX=999,e.GOLDLV_MAX=999,e.DAYEARN_MAX=999,e.SHARE_REWARD_MAX=100;var t=function(){function t(){}return Object.defineProperty(t,"serverTime",{get:function(){var e=(new Date).getTime();return this._serverTime+e-this._localTime},set:function(e){this._localTime=(new Date).getTime(),this._serverTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"armory",{get:function(){return this._armory||(this._armory=new a.default(JSON.parse(e.Storage.armory))),this._armory},enumerable:!1,configurable:!0}),Object.defineProperty(t,"propInfo",{get:function(){return this._propInfo||(this._propInfo=new c.default(JSON.parse(e.Storage.props))),this._propInfo},enumerable:!1,configurable:!0}),Object.defineProperty(t,"newbies",{get:function(){return this._newbies||(this._newbies=new l.default(JSON.parse(e.Storage.newbies))),this._newbies},enumerable:!1,configurable:!0}),t.playerId=0,t.skinId=1,t._localTime=0,t._serverTime=0,t._armory=null,t._propInfo=null,t._newbies=null,t}();e.My=t,e.updateStorageKeys=[],e.pushStorageKeys=[];var o=function(){function t(){}return t.init=function(){var t=this,o=n.LocalStorage.getString("updateKVData");null!=o&&""!=o&&(e.updateStorageKeys=JSON.parse(o),e.updateStorageKeys.forEach(function(e){"number"==typeof t["_"+e]?t["_"+e]=n.LocalStorage.getNumber(e):"string"==typeof t["_"+e]?t["_"+e]=n.LocalStorage.getString(e):"boolean"==typeof t["_"+e]?t["_"+e]=n.LocalStorage.getBoolean(e):console.error("key="+e+" type="+typeof t["_"+e])}))},t.allKeys=function(){var e=[];for(var o in t)if(o.startsWith("_")){var n=o.substring(1);e.push(n)}return e},t.updateKVData=function(t,o){e.updateStorageKeys.includes(t)||e.updateStorageKeys.push(t),"number"==typeof o?n.LocalStorage.setNumber(t,o):"boolean"==typeof o?n.LocalStorage.setBoolean(t,o):"string"==typeof o&&n.LocalStorage.setString(t,o),n.LocalStorage.setString("updateKVData",JSON.stringify(e.updateStorageKeys.concat(e.pushStorageKeys.filter(function(t){return!e.updateStorageKeys.includes(t)})))),cc.find("Canvas").emit("UpdateStorage",t),r.NetworkConfig.connectServer&&(this.modifyCount++,this.modifyCount>this.maxModify&&(this.modifyCount=0,i.default.pushStorage()))},Object.defineProperty(t,"gameLevel",{get:function(){return this._gameLevel},set:function(e){this._gameLevel!=e&&(this._gameLevel=e,this.updateKVData("gameLevel",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"goldCount",{get:function(){return this._goldCount},set:function(e){this._goldCount!=e&&(this._goldCount=e,this.updateKVData("goldCount",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"diamondCount",{get:function(){return this._diamondCount},set:function(e){this._diamondCount!=e&&(this._diamondCount=e,this.updateKVData("diamondCount",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"goldLv",{get:function(){return this._goldLv},set:function(e){this._goldLv!=e&&(this._goldLv=e,this.updateKVData("goldLv",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dayEarnLv",{get:function(){return this._dayEarnLv},set:function(e){this._dayEarnLv!=e&&(this._dayEarnLv=e,this.updateKVData("dayEarnLv",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"power",{get:function(){return this._power},set:function(t){this._power!=t&&(t>e.POWER_MAX&&(t=e.POWER_MAX),this._power=t,this.updateKVData("power",t))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"powerModifyTime",{get:function(){return this._powerModifyTime},set:function(e){this._powerModifyTime!=e&&(this._powerModifyTime=e,this.updateKVData("powerModifyTime",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dayEarnTotalModifyTime",{get:function(){return this._dayEarnTotalModifyTime},set:function(e){this._dayEarnTotalModifyTime!=e&&(this._dayEarnTotalModifyTime=e,this.updateKVData("dayEarnTotalModifyTime",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dayEarnExpireTime",{get:function(){return this._dayEarnExpireTime},set:function(e){this._dayEarnExpireTime!=e&&(this._dayEarnExpireTime=e,this.updateKVData("dayEarnExpireTime",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dayEarnTotal",{get:function(){return this._dayEarnTotal},set:function(t){this._dayEarnTotal!=t&&(this._dayEarnTotal=t,this.dayEarnTotalModifyTime=e.My.serverTime,this.updateKVData("dayEarnTotal",t))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"task",{get:function(){return this._task},set:function(e){this._task!=e&&(this._task=e,this.updateKVData("task",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gameLucky",{get:function(){return this._gameLucky},set:function(e){this._gameLucky!=e&&(this._gameLucky=e,this.updateKVData("gameLucky",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gameEnergy",{get:function(){return this._gameEnergy},set:function(e){this._gameEnergy!=e&&(this._gameEnergy=e,this.updateKVData("gameEnergy",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shakeOpen",{get:function(){return this._shakeOpen},set:function(e){this._shakeOpen!=e&&(this._shakeOpen=e,this.updateKVData("shakeOpen",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"armory",{get:function(){return this._armory},set:function(e){this._armory!=e&&(this._armory=e,this.updateKVData("armory",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"HpLv",{get:function(){return this._HpLv},set:function(e){this._HpLv!=e&&(this._HpLv=e,this.updateKVData("HpLv",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ADLv",{get:function(){return this._ADLv},set:function(e){this._ADLv!=e&&(this._ADLv=e,this.updateKVData("ADLv",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"passLuckyCount",{get:function(){return this._passLuckyCount},set:function(e){this._passLuckyCount!=e&&(this._passLuckyCount=e,this.updateKVData("passLuckyCount",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"props",{get:function(){return this._props},set:function(e){this._props!=e&&(this._props=e,this.updateKVData("props",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"newbies",{get:function(){return this._newbies},set:function(e){this._newbies!=e&&(this._newbies=e,this.updateKVData("newbies",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"unlockGun",{get:function(){return this._unlockGun},set:function(e){this._unlockGun!=e&&(this._unlockGun=e,this.updateKVData("unlockGun",e))},enumerable:!1,configurable:!0}),t._gameLevel=1,t._goldCount=0,t._diamondCount=0,t._goldLv=1,t._dayEarnLv=1,t._power=120,t._powerModifyTime=0,t._dayEarnTotalModifyTime=0,t._dayEarnExpireTime=0,t._dayEarnTotal=0,t._task="{}",t._gameLucky='{"time":0,"num":0}',t._gameEnergy=0,t._shakeOpen=!0,t._newbies="{}",t.modifyCount=0,t.maxModify=10,t._HpLv=1,t._ADLv=1,t._armory="{}",t._passLuckyCount=0,t._props="{}",t._unlockGun=0,t}();e.Storage=o})(o.World||(o.World={})),cc._RF.pop()},{"../../../framework/persistence/LocalStorage":"LocalStorage","../config/NetworkConfig":"NetworkConfig","../network/Network":"Network","./Armory":"Armory","./Newbies":"Newbies","./PropInfo":"PropInfo"}],ZIndex:[function(e,t,o){"use strict";cc._RF.push(t,"28376gLYLVAy4MJItNA7L8U","ZIndex"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.menu,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zIndex=0,t}return __extends(t,e),t.prototype.onLoad=function(){0!=this.zIndex&&(this.node.zIndex=this.zIndex)},__decorate([r],t.prototype,"zIndex",void 0),__decorate([i,a("\u81ea\u5b9a\u4e49/ZIndex")],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],ZoomEffect:[function(e,t,o){"use strict";cc._RF.push(t,"a29edWktkRN94LMtiNKO1En","ZoomEffect"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../actions/Actions"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startValue=1,t.endValue=1,t.deltaValue=.1,t.speed=1.25,t.times=0,t.damping=0,t.cycleDelay=0,t.repeatNum=0,t.repeatDelay=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=n.default.cycleAction(cc.scaleTo,this.startValue,this.endValue,this.deltaValue,this.speed,this.times,this.damping,this.cycleDelay);this.repeatNum>0?e=cc.repeat(cc.sequence(e,cc.delayTime(this.repeatDelay)),this.repeatNum):this.repeatNum<0&&(e=cc.repeatForever(cc.sequence(e,cc.delayTime(this.repeatDelay)))),this.node.runAction(e)},__decorate([a({displayName:"\u5f00\u59cb\u7f29\u653e\u503c"})],t.prototype,"startValue",void 0),__decorate([a({displayName:"\u7ed3\u675f\u7f29\u653e\u503c"})],t.prototype,"endValue",void 0),__decorate([a({displayName:"\u7f29\u653e\u5dee"})],t.prototype,"deltaValue",void 0),__decorate([a({displayName:"\u901f\u5ea6"})],t.prototype,"speed",void 0),__decorate([a({displayName:"\u7f29\u653e\u6b21\u6570"})],t.prototype,"times",void 0),__decorate([a({displayName:"\u8870\u51cf\u503c"})],t.prototype,"damping",void 0),__decorate([a({displayName:"\u5468\u671f\u6027\u5ef6\u65f6",textTips:"\u5355\u6446\u5230\u6700\u9ad8\u70b9\u65f6\u5ef6\u65f6"})],t.prototype,"cycleDelay",void 0),__decorate([a({displayName:"\u91cd\u590d",textTips:"\u5c0f\u4e8e\u96f6\u8868\u793arepeatForever"})],t.prototype,"repeatNum",void 0),__decorate([a({displayName:"\u91cd\u590d\u5ef6\u65f6",textTips:"\u91cd\u590d\u6b21\u6570\u4e0d\u7b49\u4e8e0\u65f6\u624d\u6709\u6548"})],t.prototype,"repeatDelay",void 0),__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../actions/Actions":"Actions"}],banner:[function(e,t,o){"use strict";cc._RF.push(t,"a9c3e8JFP1AQphXehbF9QsG","banner"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.setmenu=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME||cc.sys.platform==cc.sys.WECHAT_GAME&&(this.platform_QQ?qq.showShareMenu({}):wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}))},t.onshareAppMessage=function(){"undefined"!=typeof tt||cc.sys.platform==cc.sys.WECHAT_GAME&&(this.platform_QQ?qq.onShareAppMessage(function(){return{title:"\u70b9\u51fb\u5f00\u59cb\u6e38\u620f\uff01",imageUrl:"https://cdn.198434.com/cli/image/gongfuyouxia/fxt001.jpg"}}):wx.onShareAppMessage(function(){return{title:"\u70b9\u51fb\u5f00\u59cb\u6e38\u620f\uff01",imageUrl:"https://cdn.198434.com/cli/image/gongfuyouxia/fxt001.jpg"}}))},t.show_banner=function(){var e=this;if(cc.sys.platform==cc.sys.WECHAT_GAME&&"undefined"!=typeof wx){console.log("\u663e\u793awx--\x3ebanner");var t=wx.getSystemInfoSync(),o=t.windowWidth;this.bannerAd=wx.createBannerAd({adUnitId:"adunit-5d7c2ee6458d3516",adIntervals:30,style:{left:o/2-160,top:t.screenHeight-100,width:360,height:87}}),this.bannerAd.onResize(function(o){e.bannerAd.style.left=(t.screenWidth-o.width)/2,e.bannerAd.style.top=t.screenHeight-o.height,e.bannerAd.style.width=o.width,e.bannerAd.style.height=o.height}),this.bannerAd.onLoad(function(){e.bannerAd.show()}),this.bannerAd.onError(function(e){console.log("banner\u52a0\u8f7d\u9519\u8bef",e)})}},t.show_banner_wudian=function(){if(cc.sys.platform==cc.sys.BYTEDANCE_GAME);else if(cc.sys.platform==cc.sys.WECHAT_GAME)return},t.hide_banner=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&(console.log("\u5173\u95edbanner"),"undefined"!=typeof wx&&this.bannerAd&&(this.bannerAd.offResize(),this.bannerAd.destroy()))},t.startRecord=function(){var e=this;if(cc.sys.platform==cc.sys.BYTEDANCE_GAME){null==this.recorder&&(this.recorder=tt.getGameRecorderManager(),this.recorder.onStart(function(t){console.log("\u5f00\u59cb\u5f55\u5c4f=====>",t),e.videoPath=null}),this.recorder.onError(function(e){console.log("\u5f55\u5c4f\u9519\u8bef====>",e)}),this.recorder.onPause(function(e){console.log("\u5f55\u5c4f\u6682\u505c====>",e)}),this.recorder.onResume(function(e){console.log("\u5f55\u5c4f\u6062\u590d",e)}),this.recorder.onInterruptionBegin(function(e){console.log("\u5f55\u5c4f\u4e2d\u65ad\u5f00\u59cb",e)}),this.recorder.onInterruptionEnd(function(e){console.log("\u5f55\u5c4f\u4e2d\u65ad\u7ed3\u675f",e)}),this.recorder.onStop(function(t){var o=(new Date).getTime()-e.startTimeInterval;console.log("\u5206\u4eab\u6700\u540e\u7684\u65f6\u957f",o),o<3e3?(console.log("\u5f55\u5c4f\u65f6\u95f4\u592a\u77ed!"),tt.showToast({title:"\u5f55\u5c4f\u65f6\u95f4\u592a\u77ed",icon:"fail"})):e.videoPath=t.videoPath}));var t=new Date;this.startTimeInterval=t.getTime(),console.log("\u521d\u59cb\u5f55\u5236\u65f6\u95f4\u70b9",this.startTimeInterval),this.recorder.start&&this.recorder.start({duration:300})}},t.stopRecord=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&this.recorder.stop()},t.pauseGameRecorder=function(){this.recorder.pause()},t.resumeGameRecorder=function(){this.recorder.resume()},t.videoShare=function(){if(this.share_video_flag)cc.find("Canvas/battleView").getComponent(BattleView).ADtips("\u4e0d\u80fd\u91cd\u590d\u5206\u4eab");else if(cc.sys.platform==cc.sys.BYTEDANCE_GAME){if(this.share_video_flag=!0,null==this.videoPath)return console.log("\u65e0\u5206\u4eab\u6570\u636e~"),void(this.share_video_flag=!1);tt.shareAppMessage({query:"",desc:"\u70b9\u51fb\u5f00\u59cb\u6e38\u620f",channel:"video",extra:{videoPath:this.videoPath,videoTopics:["\u529f\u592b\u6e38\u4fa0"],hashtag_list:["\u529f\u592b\u6e38\u4fa0"]},success:function(){cc.find("Canvas/battleView/player").getComponent(gameplayer).getcoin(100),console.log("\u5206\u4eab\u6210\u529f")},fail:function(e){cc.find("Canvas/battleView").getComponent(BattleView).ADtips("\u9700\u6210\u529f\u5206\u4eab\u624d\u53ef\u83b7\u5f97\u5956\u52b1"),this.share_video_flag=!1,console.log("\u5206\u4eab\u5931\u8d25",e)},complete:function(){console.log("\u5206\u4eab\u5b8c\u6210")}})}},t.bannerAd=null,t.InterstitialAd=null,t.blockAd1=null,t.blockAd2=null,t.videoAd=null,t.rewardedvideo_flag=!1,t.share_video_flag=!1,t.platform_QQ=!1,t.city=!1,t.WXswitch=!1,t.Bannerswitch=!1,t.stargame_adflag=0,t.recorder=null,t.startTimeInterval=0,t.videoPath=null,__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],bigNumber:[function(e,t){"use strict";cc._RF.push(t,"02e4aFqystFf7DVaHnZYH68","bigNumber"),function(e){var o,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,r=Math.floor,a="[BigNumber Error] ",c=a+"Number primitive has more than 15 significant digits: ",l=1e14,s=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7;function f(e){var t=0|e;return e>0||e===t?t:t-1}function h(e){for(var t,o,n=1,i=e.length,r=e[0]+"";n<i;){for(t=e[n++]+"",o=s-t.length;o--;t="0"+t);r+=t}for(i=r.length;48===r.charCodeAt(--i););return r.slice(0,i+1||1)}function m(e,t){var o,n,i=e.c,r=t.c,a=e.s,c=t.s,l=e.e,s=t.e;if(!a||!c)return null;if(o=i&&!i[0],n=r&&!r[0],o||n)return o?n?0:-c:a;if(a!=c)return a;if(o=a<0,n=l==s,!i||!r)return n?0:!i^o?1:-1;if(!n)return l>s^o?1:-1;for(c=(l=i.length)<(s=r.length)?l:s,a=0;a<c;a++)if(i[a]!=r[a])return i[a]>r[a]^o?1:-1;return l==s?0:l>s^o?1:-1}function g(e,t,o,n){if(e<t||e>o||e!==(e<0?i(e):r(e)))throw Error(a+(n||"Argument")+("number"==typeof e?e<t||e>o?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function y(e){return"[object Array]"==Object.prototype.toString.call(e)}function _(e){var t=e.c.length-1;return f(e.e/s)==t&&e.c[t]%2!=0}function v(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function b(e,t,o){var n,i;if(t<0){for(i=o+".";++t;i+=o);e=i+e}else if(++t>(n=e.length)){for(i=o,t-=n;--t;i+=o);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(o=function e(t){var o,E,C,w,x,T,S,P,N,k=H.prototype={constructor:H,toString:null,valueOf:null},A=new H(1),L=20,B=4,M=-7,R=21,O=-1e7,F=1e7,G=!1,D=1,I=0,W={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"\xa0",fractionGroupSize:0},j="0123456789abcdefghijklmnopqrstuvwxyz";function H(e,t){var o,i,a,l,d,p,f,h,m=this;if(!(m instanceof H))return new H(e,t);if(null==t){if(e instanceof H)return m.s=e.s,m.e=e.e,void(m.c=(e=e.c)?e.slice():e);if((p="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return m.e=l,void(m.c=[e])}h=e+""}else{if(!n.test(h=e+""))return C(m,h,p);m.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(l=h.indexOf("."))>-1&&(h=h.replace(".","")),(d=h.search(/e/i))>0?(l<0&&(l=d),l+=+h.slice(d+1),h=h.substring(0,d)):l<0&&(l=h.length)}else{if(g(t,2,j.length,"Base"),h=e+"",10==t)return q(m=new H(e instanceof H?e:h),L+m.e+1,B);if(p="number"==typeof e){if(0*e!=0)return C(m,h,p,t);if(m.s=1/e<0?(h=h.slice(1),-1):1,H.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(c+e);p=!1}else m.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(o=j.slice(0,t),l=d=0,f=h.length;d<f;d++)if(o.indexOf(i=h.charAt(d))<0){if("."==i){if(d>l){l=f;continue}}else if(!a&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){a=!0,d=-1,l=0;continue}return C(m,e+"",p,t)}(l=(h=E(h,t,10,m.s)).indexOf("."))>-1?h=h.replace(".",""):l=h.length}for(d=0;48===h.charCodeAt(d);d++);for(f=h.length;48===h.charCodeAt(--f););if(h=h.slice(d,++f)){if(f-=d,p&&H.DEBUG&&f>15&&(e>u||e!==r(e)))throw Error(c+m.s*e);if((l=l-d-1)>F)m.c=m.e=null;else if(l<O)m.c=[m.e=0];else{if(m.e=l,m.c=[],d=(l+1)%s,l<0&&(d+=s),d<f){for(d&&m.c.push(+h.slice(0,d)),f-=s;d<f;)m.c.push(+h.slice(d,d+=s));h=h.slice(d),d=s-h.length}else d-=f;for(;d--;h+="0");m.c.push(+h)}}else m.c=[m.e=0]}function U(e,t,o,n){var i,r,a,c,l;if(null==o?o=B:g(o,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)l=h(e.c),l=1==n||2==n&&a<=M?v(l,a):b(l,a,"0");else if(r=(e=q(new H(e),t,o)).e,c=(l=h(e.c)).length,1==n||2==n&&(t<=r||r<=M)){for(;c<t;l+="0",c++);l=v(l,r)}else if(t-=a,l=b(l,r,"0"),r+1>c){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=r-c)>0)for(r+1==c&&(l+=".");t--;l+="0");return e.s<0&&i?"-"+l:l}function V(e,t){var o,n,i=0;for(y(e[0])&&(e=e[0]),o=new H(e[0]);++i<e.length;){if(!(n=new H(e[i])).s){o=n;break}t.call(o,n)&&(o=n)}return o}function J(e,t,o){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(o=n+o*s-1)>F?e.c=e.e=null:o<O?e.c=[e.e=0]:(e.e=o,e.c=t),e}function q(e,t,o,n){var a,c,u,p,f,h,m,g=e.c,y=d;if(g){e:{for(a=1,p=g[0];p>=10;p/=10,a++);if((c=t-a)<0)c+=s,u=t,m=(f=g[h=0])/y[a-u-1]%10|0;else if((h=i((c+1)/s))>=g.length){if(!n)break e;for(;g.length<=h;g.push(0));f=m=0,a=1,u=(c%=s)-s+1}else{for(f=p=g[h],a=1;p>=10;p/=10,a++);m=(u=(c%=s)-s+a)<0?0:f/y[a-u-1]%10|0}if(n=n||t<0||null!=g[h+1]||(u<0?f:f%y[a-u-1]),n=o<4?(m||n)&&(0==o||o==(e.s<0?3:2)):m>5||5==m&&(4==o||n||6==o&&(c>0?u>0?f/y[a-u]:0:g[h-1])%10&1||o==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=y[(s-t%s)%s],e.e=-t||0):g[0]=e.e=0,e;if(0==c?(g.length=h,p=1,h--):(g.length=h+1,p=y[s-c],g[h]=u>0?r(f/y[a-u]%y[u])*p:0),n)for(;;){if(0==h){for(c=1,u=g[0];u>=10;u/=10,c++);for(u=g[0]+=p,p=1;u>=10;u/=10,p++);c!=p&&(e.e++,g[0]==l&&(g[0]=1));break}if(g[h]+=p,g[h]!=l)break;g[h--]=0,p=1}for(c=g.length;0===g[--c];g.pop());}e.e>F?e.c=e.e=null:e.e<O&&(e.c=[e.e=0])}return e}return H.clone=e,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(e){var t,o;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(g(o=e[t],0,1e9,t),L=o),e.hasOwnProperty(t="ROUNDING_MODE")&&(g(o=e[t],0,8,t),B=o),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(y(o=e[t])?(g(o[0],-1e9,0,t),g(o[1],0,1e9,t),M=o[0],R=o[1]):(g(o,-1e9,1e9,t),M=-(R=o<0?-o:o))),e.hasOwnProperty(t="RANGE"))if(y(o=e[t]))g(o[0],-1e9,-1,t),g(o[1],1,1e9,t),O=o[0],F=o[1];else{if(g(o,-1e9,1e9,t),!o)throw Error(a+t+" cannot be zero: "+o);O=-(F=o<0?-o:o)}if(e.hasOwnProperty(t="CRYPTO")){if((o=e[t])!==!!o)throw Error(a+t+" not true or false: "+o);if(o){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw G=!o,Error(a+"crypto unavailable");G=o}else G=o}if(e.hasOwnProperty(t="MODULO_MODE")&&(g(o=e[t],0,9,t),D=o),e.hasOwnProperty(t="POW_PRECISION")&&(g(o=e[t],0,1e9,t),I=o),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(o=e[t]))throw Error(a+t+" not an object: "+o);W=o}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(o=e[t])||/^.$|\.|(.).*\1/.test(o))throw Error(a+t+" invalid: "+o);j=o}}return{DECIMAL_PLACES:L,ROUNDING_MODE:B,EXPONENTIAL_AT:[M,R],RANGE:[O,F],CRYPTO:G,MODULO_MODE:D,POW_PRECISION:I,FORMAT:W,ALPHABET:j}},H.isBigNumber=function(e){return e instanceof H||e&&!0===e._isBigNumber||!1},H.maximum=H.max=function(){return V(arguments,k.lt)},H.minimum=H.min=function(){return V(arguments,k.gt)},H.random=(w=9007199254740992*Math.random()&2097151?function(){return r(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,o,n,c,l,u=0,p=[],f=new H(A);if(null==e?e=L:g(e,0,1e9),c=i(e/s),G)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(c*=2));u<c;)(l=131072*t[u]+(t[u+1]>>>11))>=9e15?(o=crypto.getRandomValues(new Uint32Array(2)),t[u]=o[0],t[u+1]=o[1]):(p.push(l%1e14),u+=2);u=c/2}else{if(!crypto.randomBytes)throw G=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(c*=7);u<c;)(l=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(p.push(l%1e14),u+=7);u=c/7}if(!G)for(;u<c;)(l=w())<9e15&&(p[u++]=l%1e14);for(c=p[--u],e%=s,c&&e&&(l=d[s-e],p[u]=r(c/l)*l);0===p[u];p.pop(),u--);if(u<0)p=[n=0];else{for(n=-1;0===p[0];p.splice(0,1),n-=s);for(u=1,l=p[0];l>=10;l/=10,u++);u<s&&(n-=s-u)}return f.e=n,f.c=p,f}),E=function(){function e(e,t,o,n){for(var i,r,a=[0],c=0,l=e.length;c<l;){for(r=a.length;r--;a[r]*=t);for(a[0]+=n.indexOf(e.charAt(c++)),i=0;i<a.length;i++)a[i]>o-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/o|0,a[i]%=o)}return a.reverse()}return function(t,n,i,r,a){var c,l,s,u,d,p,f,m,g=t.indexOf("."),y=L,_=B;for(g>=0&&(u=I,I=0,t=t.replace(".",""),p=(m=new H(n)).pow(t.length-g),I=u,m.c=e(b(h(p.c),p.e,"0"),10,i,"0123456789"),m.e=m.c.length),s=u=(f=e(t,n,i,a?(c=j,"0123456789"):(c="0123456789",j))).length;0==f[--u];f.pop());if(!f[0])return c.charAt(0);if(g<0?--s:(p.c=f,p.e=s,p.s=r,f=(p=o(p,m,y,_,i)).c,d=p.r,s=p.e),g=f[l=s+y+1],u=i/2,d=d||l<0||null!=f[l+1],d=_<4?(null!=g||d)&&(0==_||_==(p.s<0?3:2)):g>u||g==u&&(4==_||d||6==_&&1&f[l-1]||_==(p.s<0?8:7)),l<1||!f[0])t=d?b(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(f.length=l,d)for(--i;++f[--l]>i;)f[l]=0,l||(++s,f=[1].concat(f));for(u=f.length;!f[--u];);for(g=0,t="";g<=u;t+=c.charAt(f[g++]));t=b(t,s,c.charAt(0))}return t}}(),o=function(){function e(e,t,o){var n,i,r,a,c=0,l=e.length,s=t%p,u=t/p|0;for(e=e.slice();l--;)c=((i=s*(r=e[l]%p)+(n=u*r+(a=e[l]/p|0)*s)%p*p+c)/o|0)+(n/p|0)+u*a,e[l]=i%o;return c&&(e=[c].concat(e)),e}function t(e,t,o,n){var i,r;if(o!=n)r=o>n?1:-1;else for(i=r=0;i<o;i++)if(e[i]!=t[i]){r=e[i]>t[i]?1:-1;break}return r}function o(e,t,o,n){for(var i=0;o--;)e[o]-=i,i=e[o]<t[o]?1:0,e[o]=i*n+e[o]-t[o];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,a,c,u){var d,p,h,m,g,y,_,v,b,E,C,w,x,T,S,P,N,k=n.s==i.s?1:-1,A=n.c,L=i.c;if(!(A&&A[0]&&L&&L[0]))return new H(n.s&&i.s&&(A?!L||A[0]!=L[0]:L)?A&&0==A[0]||!L?0*k:k/0:NaN);for(b=(v=new H(k)).c=[],k=a+(p=n.e-i.e)+1,u||(u=l,p=f(n.e/s)-f(i.e/s),k=k/s|0),h=0;L[h]==(A[h]||0);h++);if(L[h]>(A[h]||0)&&p--,k<0)b.push(1),m=!0;else{for(T=A.length,P=L.length,h=0,k+=2,(g=r(u/(L[0]+1)))>1&&(L=e(L,g,u),A=e(A,g,u),P=L.length,T=A.length),x=P,C=(E=A.slice(0,P)).length;C<P;E[C++]=0);N=L.slice(),N=[0].concat(N),S=L[0],L[1]>=u/2&&S++;do{if(g=0,(d=t(L,E,P,C))<0){if(w=E[0],P!=C&&(w=w*u+(E[1]||0)),(g=r(w/S))>1)for(g>=u&&(g=u-1),_=(y=e(L,g,u)).length,C=E.length;1==t(y,E,_,C);)g--,o(y,P<_?N:L,_,u),_=y.length,d=1;else 0==g&&(d=g=1),_=(y=L.slice()).length;if(_<C&&(y=[0].concat(y)),o(E,y,C,u),C=E.length,-1==d)for(;t(L,E,P,C)<1;)g++,o(E,P<C?N:L,C,u),C=E.length}else 0===d&&(g++,E=[0]);b[h++]=g,E[0]?E[C++]=A[x]||0:(E=[A[x]],C=1)}while((x++<T||null!=E[0])&&k--);m=null!=E[0],b[0]||b.splice(0,1)}if(u==l){for(h=1,k=b[0];k>=10;k/=10,h++);q(v,a+(v.e=h+p*s-1)+1,c,m)}else v.e=p,v.r=+m;return v}}(),x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,S=/^\.([^.]+)$/,P=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g,C=function(e,t,o,n){var i,r=o?t:t.replace(N,"");if(P.test(r))e.s=isNaN(r)?null:r<0?-1:1,e.c=e.e=null;else{if(!o&&(r=r.replace(x,function(e,t,o){return i="x"==(o=o.toLowerCase())?16:"b"==o?2:8,n&&n!=i?e:t}),n&&(i=n,r=r.replace(T,"$1").replace(S,"0.$1")),t!=r))return new H(r,i);if(H.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.c=e.e=e.s=null}},k.absoluteValue=k.abs=function(){var e=new H(this);return e.s<0&&(e.s=1),e},k.comparedTo=function(e,t){return m(this,new H(e,t))},k.decimalPlaces=k.dp=function(e,t){var o,n,i,r=this;if(null!=e)return g(e,0,1e9),null==t?t=B:g(t,0,8),q(new H(r),e+r.e+1,t);if(!(o=r.c))return null;if(n=((i=o.length-1)-f(this.e/s))*s,i=o[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},k.dividedBy=k.div=function(e,t){return o(this,new H(e,t),L,B)},k.dividedToIntegerBy=k.idiv=function(e,t){return o(this,new H(e,t),0,1)},k.exponentiatedBy=k.pow=function(e,t){var o,n,c,l,u,d,p,f=this;if((e=new H(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+e);if(null!=t&&(t=new H(t)),l=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return p=new H(Math.pow(+f.valueOf(),l?2-_(e):+e)),t?p.mod(t):p;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new H(NaN);(n=!u&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||l&&f.c[1]>=24e7:f.c[0]<8e13||l&&f.c[0]<=9999975e7)))return c=f.s<0&&_(e)?-0:0,f.e>-1&&(c=1/c),new H(u?1/c:c);I&&(c=i(I/s+2))}for(l?(o=new H(.5),d=_(e)):d=e%2,u&&(e.s=1),p=new H(A);;){if(d){if(!(p=p.times(f)).c)break;c?p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}if(l){if(q(e=e.times(o),e.e+1,1),!e.c[0])break;l=e.e>14,d=_(e)}else{if(!(e=r(e/2)))break;d=e%2}f=f.times(f),c?f.c&&f.c.length>c&&(f.c.length=c):n&&(f=f.mod(t))}return n?p:(u&&(p=A.div(p)),t?p.mod(t):c?q(p,I,B,void 0):p)},k.integerValue=function(e){var t=new H(this);return null==e?e=B:g(e,0,8),q(t,t.e+1,e)},k.isEqualTo=k.eq=function(e,t){return 0===m(this,new H(e,t))},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(e,t){return m(this,new H(e,t))>0},k.isGreaterThanOrEqualTo=k.gte=function(e,t){return 1===(t=m(this,new H(e,t)))||0===t},k.isInteger=function(){return!!this.c&&f(this.e/s)>this.c.length-2},k.isLessThan=k.lt=function(e,t){return m(this,new H(e,t))<0},k.isLessThanOrEqualTo=k.lte=function(e,t){return-1===(t=m(this,new H(e,t)))||0===t},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&0==this.c[0]},k.minus=function(e,t){var o,n,i,r,a=this,c=a.s;if(t=(e=new H(e,t)).s,!c||!t)return new H(NaN);if(c!=t)return e.s=-t,a.plus(e);var u=a.e/s,d=e.e/s,p=a.c,h=e.c;if(!u||!d){if(!p||!h)return p?(e.s=-t,e):new H(h?a:NaN);if(!p[0]||!h[0])return h[0]?(e.s=-t,e):new H(p[0]?a:3==B?-0:0)}if(u=f(u),d=f(d),p=p.slice(),c=u-d){for((r=c<0)?(c=-c,i=p):(d=u,i=h),i.reverse(),t=c;t--;i.push(0));i.reverse()}else for(n=(r=(c=p.length)<(t=h.length))?c:t,c=t=0;t<n;t++)if(p[t]!=h[t]){r=p[t]<h[t];break}if(r&&(i=p,p=h,h=i,e.s=-e.s),(t=(n=h.length)-(o=p.length))>0)for(;t--;p[o++]=0);for(t=l-1;n>c;){if(p[--n]<h[n]){for(o=n;o&&!p[--o];p[o]=t);--p[o],p[n]+=l}p[n]-=h[n]}for(;0==p[0];p.splice(0,1),--d);return p[0]?J(e,p,d):(e.s=3==B?-1:1,e.c=[e.e=0],e)},k.modulo=k.mod=function(e,t){var n,i,r=this;return e=new H(e,t),!r.c||!e.s||e.c&&!e.c[0]?new H(NaN):!e.c||r.c&&!r.c[0]?new H(r):(9==D?(i=e.s,e.s=1,n=o(r,e,0,3),e.s=i,n.s*=i):n=o(r,e,0,D),(e=r.minus(n.times(e))).c[0]||1!=D||(e.s=r.s),e)},k.multipliedBy=k.times=function(e,t){var o,n,i,r,a,c,u,d,h,m,g,y,_,v,b,E=this,C=E.c,w=(e=new H(e,t)).c;if(!(C&&w&&C[0]&&w[0]))return!E.s||!e.s||C&&!C[0]&&!w||w&&!w[0]&&!C?e.c=e.e=e.s=null:(e.s*=E.s,C&&w?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=f(E.e/s)+f(e.e/s),e.s*=E.s,(u=C.length)<(m=w.length)&&(_=C,C=w,w=_,i=u,u=m,m=i),i=u+m,_=[];i--;_.push(0));for(v=l,b=p,i=m;--i>=0;){for(o=0,g=w[i]%b,y=w[i]/b|0,r=i+(a=u);r>i;)o=((d=g*(d=C[--a]%b)+(c=y*d+(h=C[a]/b|0)*g)%b*b+_[r]+o)/v|0)+(c/b|0)+y*h,_[r--]=d%v;_[r]=o}return o?++n:_.splice(0,1),J(e,_,n)},k.negated=function(){var e=new H(this);return e.s=-e.s||null,e},k.plus=function(e,t){var o,n=this,i=n.s;if(t=(e=new H(e,t)).s,!i||!t)return new H(NaN);if(i!=t)return e.s=-t,n.minus(e);var r=n.e/s,a=e.e/s,c=n.c,u=e.c;if(!r||!a){if(!c||!u)return new H(i/0);if(!c[0]||!u[0])return u[0]?e:new H(c[0]?n:0*i)}if(r=f(r),a=f(a),c=c.slice(),i=r-a){for(i>0?(a=r,o=u):(i=-i,o=c),o.reverse();i--;o.push(0));o.reverse()}for((i=c.length)-(t=u.length)<0&&(o=u,u=c,c=o,t=i),i=0;t;)i=(c[--t]=c[t]+u[t]+i)/l|0,c[t]=l===c[t]?0:c[t]%l;return i&&(c=[i].concat(c),++a),J(e,c,a)},k.precision=k.sd=function(e,t){var o,n,i,r=this;if(null!=e&&e!==!!e)return g(e,1,1e9),null==t?t=B:g(t,0,8),q(new H(r),e,t);if(!(o=r.c))return null;if(n=(i=o.length-1)*s+1,i=o[i]){for(;i%10==0;i/=10,n--);for(i=o[0];i>=10;i/=10,n++);}return e&&r.e+1>n&&(n=r.e+1),n},k.shiftedBy=function(e){return g(e,-u,u),this.times("1e"+e)},k.squareRoot=k.sqrt=function(){var e,t,n,i,r,a=this,c=a.c,l=a.s,s=a.e,u=L+4,d=new H("0.5");if(1!==l||!c||!c[0])return new H(!l||l<0&&(!c||c[0])?NaN:c?a:1/0);if(0==(l=Math.sqrt(+a))||l==1/0?(((t=h(c)).length+s)%2==0&&(t+="0"),l=Math.sqrt(t),s=f((s+1)/2)-(s<0||s%2),n=new H(t=l==1/0?"1e"+s:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+s)):n=new H(l+""),n.c[0])for((l=(s=n.e)+u)<3&&(l=0);;)if(r=n,n=d.times(r.plus(o(a,r,u,1))),h(r.c).slice(0,l)===(t=h(n.c)).slice(0,l)){if(n.e<s&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(q(n,n.e+L+2,1),e=!n.times(n).eq(a));break}if(!i&&(q(r,r.e+L+2,0),r.times(r).eq(a))){n=r;break}u+=4,l+=4,i=1}return q(n,n.e+L+1,B,e)},k.toExponential=function(e,t){return null!=e&&(g(e,0,1e9),e++),U(this,e,t,1)},k.toFixed=function(e,t){return null!=e&&(g(e,0,1e9),e=e+this.e+1),U(this,e,t)},k.toFormat=function(e,t){var o=this.toFixed(e,t);if(this.c){var n,i=o.split("."),r=+W.groupSize,a=+W.secondaryGroupSize,c=W.groupSeparator,l=i[0],s=i[1],u=this.s<0,d=u?l.slice(1):l,p=d.length;if(a&&(n=r,r=a,a=n,p-=n),r>0&&p>0){for(n=p%r||r,l=d.substr(0,n);n<p;n+=r)l+=c+d.substr(n,r);a>0&&(l+=c+d.slice(n)),u&&(l="-"+l)}o=s?l+W.decimalSeparator+((a=+W.fractionGroupSize)?s.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+W.fractionGroupSeparator):s):l}return o},k.toFraction=function(e){var t,n,i,r,c,l,u,p,f,m,g,y,_=this,v=_.c;if(null!=e&&(!(p=new H(e)).isInteger()&&(p.c||1!==p.s)||p.lt(A)))throw Error(a+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+e);if(!v)return _.toString();for(n=new H(A),m=i=new H(A),r=f=new H(A),y=h(v),l=n.e=y.length-_.e-1,n.c[0]=d[(u=l%s)<0?s+u:u],e=!e||p.comparedTo(n)>0?l>0?n:m:p,u=F,F=1/0,p=new H(y),f.c[0]=0;g=o(p,n,0,1),1!=(c=i.plus(g.times(r))).comparedTo(e);)i=r,r=c,m=f.plus(g.times(c=m)),f=c,n=p.minus(g.times(c=n)),p=c;return c=o(e.minus(i),r,0,1),f=f.plus(c.times(m)),i=i.plus(c.times(r)),f.s=m.s=_.s,t=o(m,r,l*=2,B).minus(_).abs().comparedTo(o(f,i,l,B).minus(_).abs())<1?[m.toString(),r.toString()]:[f.toString(),i.toString()],F=u,t},k.toNumber=function(){return+this},k.toPrecision=function(e,t){return null!=e&&g(e,1,1e9),U(this,e,t,2)},k.toString=function(e){var t,o=this,n=o.s,i=o.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(t=h(o.c),null==e?t=i<=M||i>=R?v(t,i):b(t,i,"0"):(g(e,2,j.length,"Base"),t=E(b(t,i,"0"),10,e,n,!0)),n<0&&o.c[0]&&(t="-"+t)),t},k.valueOf=k.toJSON=function(){var e,t=this,o=t.e;return null===o?t.toString():(e=h(t.c),e=o<=M||o>=R?v(e,o):b(e,o,"0"),t.s<0?"-"+e:e)},k._isBigNumber=!0,null!=t&&H.set(t),H}()).default=o.BigNumber=o,"function"==typeof define&&define.amd?define(function(){return o}):void 0!==t&&t.exports?t.exports=o:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=o)}(void 0),cc._RF.pop()},{}],ccIntersection:[function(e,t){"use strict";cc._RF.push(t,"23610RKHSVPp7YUZOd5FJeH","ccIntersection"),cc.Intersection.pLineIntersect=function(e,t,o,n,i){if(e.x===t.x&&e.y===t.y||o.x===n.x&&o.y===n.y)return!1;var r=(e.x-o.x)*(t.y-o.y)-(e.y-o.y)*(t.x-o.x),a=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x);if(r*a>=0)return!1;var c=(o.x-e.x)*(n.y-e.y)-(o.y-e.y)*(n.x-e.x);if(c*(c+r-a)>=0)return!1;var l=c/(a-r),s=l*(t.x-e.x),u=l*(t.y-e.y);return i.x=e.x+s,i.y=e.y+u,!0},cc.Intersection.pLineCircle=function(e,t,o,n){var i,r=t.x-e.x,a=t.y-e.y,c=r*r+a*a,l=2*(r*(e.x-o.position.x)+a*(e.y-o.position.y)),s=l*l-4*c*((e.x-o.position.x)*(e.x-o.position.x)+(e.y-o.position.y)*(e.y-o.position.y)-o.radius*o.radius);return!(c<=1e-7||s<-1e-7||(s<1e-7&&s>-1e-7?(i=-l/(2*c),n.push(cc.v2(e.x+i*r,e.y+i*a)),0):(i=(-l+Math.sqrt(s))/(2*c),n.push(cc.v2(e.x+i*r,e.y+i*a)),i=(-l-Math.sqrt(s))/(2*c),n.push(cc.v2(e.x+i*r,e.y+i*a)),0)))},cc._RF.pop()},{}],cccollider:[function(e,t){"use strict";cc._RF.push(t,"2d489o5zLFFiJWbSuWZB11w","cccollider"),cc.Collider.prototype.onLoad=function(){cc.director.getCollisionManager().initCollider(this)},cc.Collider.prototype.onDisable=function(){},cc.Collider.prototype.onEnable=function(){},cc._RF.pop()},{}],ccloaderAwait:[function(e,t){"use strict";function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(t,o){var n;(n=cc.loader).loadRes.apply(n,__spreadArrays(e,[function(e,n){null==e?t(n):o(e)}]))})]})})}cc._RF.push(t,"e303ct+NQ1IDLF7WAIkdu7m","ccloaderAwait"),cc.loader.getResAwait=function(e,t){return __awaiter(this,void 0,Promise,function(){var n=this;return __generator(this,function(){return[2,new Promise(function(i,r){return __awaiter(n,void 0,void 0,function(){var n,a;return __generator(this,function(c){switch(c.label){case 0:return null!=(n=cc.loader.getRes(e,t))?[3,2]:[4,o(e,t).catch(function(e){r(e)})];case 1:return a=c.sent(),i(a),[3,3];case 2:i(n),c.label=3;case 3:return[2]}})})})]})})},cc.loader.loadResAwait=o,cc.loader.loadResArrayAwait=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(t,o){var n;(n=cc.loader).loadResArray.apply(n,__spreadArrays(e,[function(e,n){null==e?t(n):o(e)}]))})]})})},cc.loader.loadResDirAwait=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(t,o){var n;(n=cc.loader).loadResDir.apply(n,__spreadArrays(e,[function(e,n,i){null==e?t([n,i]):o(e)}]))})]})})},cc.loader.getFileNames=function(e,t){var o=[];return cc.loader._resources.getUuidArray(e,t,o),o},cc._RF.pop()},{}],ccnodeAwait:[function(e,t){"use strict";cc._RF.push(t,"8fb7amgeJpKe4gJLebr3F9k","ccnodeAwait"),cc.Node.prototype.runActionAwait=function(e,t){return __awaiter(this,void 0,Promise,function(){var o;return __generator(this,function(){return o=this,[2,new Promise(function(n){var i=cc.sequence(e,cc.callFunc(function(){n()}));t&&i.setTag(t),o.runAction(i)})]})})},cc.Node.prototype.onceAwait=function(e,t){return __awaiter(this,void 0,Promise,function(){var o;return __generator(this,function(){return o=this,[2,new Promise(function(n){o.once(e,function(e){n(e)},null,t)})]})})},cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"effb4WsLKJE1YEm+2UdWEdK","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["Actions","CCCircleAction","EllipseBy","Music","SwitchAudioCommand","CDTimer","CanvasMediator","DragonBoneMediator","LifeCycle","NodeEvent","PauseAllRunningActions","RigidBodyCollisionEvent","SwingEffect","UIScale","View","ZIndex","ZoomEffect","ExcelConfig","IConverter","JsonConverter","DialogMediator","DialogVO","ShowDialogCommand","Extend","Shake","SpacePartition","Toast","bigNumber","ccIntersection","cccollider","ccloaderAwait","ccnodeAwait","CloseViewCommand","Facade","ICommand","LoadSceneCommand","OpenViewCommand","HttpClient","HttpOption","HttpProtocol","CommandInterceptor","Interceptor","PostCommandInterceptor","PreCommandInterceptor","TestInterceptor","TestInterceptor2","LocalStorage","AbstractTableItem","TableViewMediator","KVData","use_v2.1-2.2.1_cc.Toggle_event","StartupCommand","AppConfig","ExcelTableNames","GroupConfig","InviteConfig","LocalStorageKeys","MusicPaths","NetworkConfig","ResConfig","Bullet","BulletHuoJianTong","BulletHuoYan","BulletJiGuang","BulletJuJiDan","BulletLiZiPao","BulletOfDiLei","BulletOfEnemy","BulletOfFangHuDun","BulletOfJianGuangSi","BulletOfLighting","BulletOfShouLei","BulletOfSpider","BulletOfXuanFengHuoPao","BulletShanDianQiu","BulletEmitter","BulletEmitterHuoJianTong","BulletEmitterHuoYan","BulletEmitterJiGuang","BulletEmitterJiaTeLin","BulletEmitterJuJiQiang","BulletEmitterLiZiPao","BulletEmitterPenZi","BulletEmitterSanDanQiang","BulletEmitterShanDianQiu","BulletEmitterShouQiang","BulletStrike","BulletStrikeLightning","BulletStrikeScale","BossEnemy","EmitBulletEnemy","Enemy","EnemyAABB","SpiderEnemy","Explosive","ExplosiveHuoJianTong","Guns","Lightning","PropBase","PropStateController","ImpenetrableDefence","Role","RoleAABB","RoleSupply","FirstAidController","GameBulletsController","GameCollisionController","GameController","GameEnemysController","GameExplosivesController","GameLabelsController","GameOver","GameOverLucky","GameProxy","GameRelive","GameRoleController","GameSupply","GameSupplyItem","GameUIController","PreloadGameSceneCommand","AdManner","EarningsLayerController","ExchangeController","HomeController","InviteItem","InvitesController","JackpotController","LoadingCommand","PropsController","PropsItemController","RecommendController","RecommendPropsController","RoleLayerController","SettingsController","ShadowLayerController","TakeJackpotController","TopController","UpEffectController","WeaponLayerController","Armory","Formula","Newbies","PropInfo","Task","World","CloseViewInterceptor","LoadSceneIntercetor","OpenViewInterceptor","ClickSoundCommand","Network","ShowTipsCommand","Welcome","banner","AABBRegion","LooseQuadTree","LooseQuadTreeCell","CalSpace","TestAngle","TestRotation","TestSpineEvent","TestWait"]);