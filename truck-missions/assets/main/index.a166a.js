window.__require=function t(e,o,n){function r(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1f0c2AyMRlI06uT5MNJhZks","AudioMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manager/Singleton"),s=t("./Utils"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgmVolume=1,e.sfxVolume=1,e.vibrate=1,e.bgmAudioID=-1,e.audioId=-1,e.musicIndex=s.default.getRandomInt(0,4),e.sfxMap={},e.bgm_url="music1",e.lastplaysfxtime={},e}return r(e,t),e.prototype.loadSounds=function(){var t=cc.sys.localStorage.getItem("bgmVolume"),o=cc.sys.localStorage.getItem("sfxVolume"),n=cc.sys.localStorage.getItem("vibrate");this.bgmVolume=0==t?Number(t):e.DEFAULT_VOLUME,this.sfxVolume=0==o?Number(o):e.DEFAULT_VOLUME,this.vibrate=0==n?Number(n):1,this.playBGM("gameplay_2min")},e.prototype.playBgSeq=function(){var t=this.musicIndex%4+1;this.playBGM("music"+t),this.musicIndex++},e.prototype.playBGM=function(t){return i(this,void 0,void 0,function(){var e=this;return c(this,function(){return this.bgm_url=t,s.default.loadRes("sounds/"+t,"resources",cc.AudioClip,function(t,o){e.bgmAudioID>=0&&cc.audioEngine.stop(e.bgmAudioID),e.bgmVolume>0&&(e.bgmAudioID=cc.audioEngine.play(o,!0,e.bgmVolume))}),[2]})})},e.prototype.stopSFX=function(t){return cc.audioEngine.stop(t)},e.prototype.stopSFXByName=function(t){var e=this.sfxMap[t];e&&cc.audioEngine.stop(e)},e.prototype.playSFX=function(t,e){return void 0===e&&(e=20),i(this,void 0,void 0,function(){var o=this;return c(this,function(){return this.lastplaysfxtime[t]&&s.default.getServerTime()-this.lastplaysfxtime[t]<e?[2]:(this.lastplaysfxtime[t]=s.default.getServerTime(),this.sfxMap[t]&&this.stopSFXByName(this.sfxMap[t]),s.default.loadRes("sounds/"+t,"resources",cc.AudioClip,function(e,n){if(o.sfxVolume>0)return o.audioId=cc.audioEngine.play(n,!1,1*o.sfxVolume),o.sfxMap[t]=o.audioId,o.audioId}),[2])})})},e.prototype.pauseBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.pause(this.bgmAudioID)},e.prototype.resumBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.resume(this.bgmAudioID)},e.prototype.setBGMVolume=function(t,e){void 0===e&&(e=!1),(this.bgmVolume!=t||e)&&(cc.sys.localStorage.setItem("bgmVolume",t),this.bgmVolume=t,cc.audioEngine.setVolume(this.bgmAudioID,t)),this.bgmAudioID>=0?t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID):this.bgmVolume>0&&this.playBGM(this.bgm_url)},e.prototype.setSFXVolume=function(t,e){void 0===e&&(e=!1),(this.sfxVolume!=t||e)&&(cc.sys.localStorage.setItem("sfxVolume",t),this.sfxVolume=t)},e.prototype.setVibrate=function(t){this.vibrate!=t&&(cc.sys.localStorage.setItem("vibrate",t),this.vibrate=t)},e.DEFAULT_VOLUME=1,e}(a.default);o.default=l,cc._RF.pop()},{"../manager/Singleton":"Singleton","./Utils":"Utils"}],BasePanel:[function(t,e,o){"use strict";cc._RF.push(e,"0ed2epyN9JJHqmDqK3fNubI","BasePanel");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../manager/WindowManager"),a=t("./BaseUI"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onCreate=function(t){this.data=t},e.prototype.onShow=function(){},e.prototype.onHide=function(){},e.prototype.close=function(t){void 0===t&&(t=!0),c.default.Instance().removeWindow(this.winInfo,t)},e.prototype.onRecycle=function(){},i([l],e)}(a.default));o.default=u,cc._RF.pop()},{"../manager/WindowManager":"WindowManager","./BaseUI":"BaseUI"}],BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"2351aXMUpVOdID4JuhjJdWs","BaseUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./CountDownLabel"),a=t("./LinkPrefab"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){var e=t.call(this)||this;return e.m_objects=new Map,e.inject(),e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.inject=function(){var t=this,e=this.onLoad;this.onLoad=function(){t.autoMapping(t.node),e&&e.call(t)}},e.prototype.autoMapping=function(t){var e=t.name.split("_");if(e.length>1){var o=t.name;switch(e[0]){case"node":this[o]=t;break;case"btn":this[o]=t.getComponent(cc.Button),this[o]&&((n=new cc.Component.EventHandler).target=this.node,n.component=cc.js.getClassName(this),n.handler="onBtnClicked",n.customEventData=o,t.getComponent(cc.Button).clickEvents.push(n));break;case"progress":this[o]=t.getComponent(cc.ProgressBar);break;case"txt":case"lbl":this[o]=t.getComponent(cc.Label);break;case"sp":this[o]=t.getComponent(cc.Sprite);break;case"spine":this[o]=t.getComponent(sp.Skeleton);break;case"link":this[o]=t.getComponent(a.default);break;case"toggle":case"tog":var n;this[o]=t.getComponent(cc.Toggle),this[o]&&((n=new cc.Component.EventHandler).target=this.node,n.component=cc.js.getClassName(this),n.handler="onBtnClicked",n.customEventData=o,t.getComponent(cc.Toggle).clickEvents.push(n));break;case"toc":this[o]=t.getComponent(cc.ToggleContainer);break;case"page":this[o]=t.getComponent(cc.PageView);break;case"list":break;case"pool":this[o]=t.getComponent("UIPool");break;case"timer":this[o]=t.getComponent(c.default);break;case"particle":this[o]=t.getComponent(cc.ParticleSystem)}}for(var r=0,i=t.children;r<i.length;r++){var s=i[r];this.autoMapping(s)}},e.prototype.onBtnClicked=function(){},e.prototype._findInChildren=function(t,e){var o=t.getChildByName(e);if(o)return o;if(0==t.childrenCount)return null;for(var n=0;n<t.childrenCount;++n){var r=this._findInChildren(t.children[n],e);if(r)return r}return null},e.prototype.SetSpriteUrl=function(t,e){if(window.wx||window.tt||window.qq)if(e&&""!=e){var o=this.GetGameObject(t);o&&cc.loader.load({url:e,type:"jpg"},function(t,e){if(!t){if(!cc.isValid(o))return;o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)}})}else this.GetSprite(t)&&(this.GetSprite(t).spriteFrame=null)},e.prototype.GetGameObject=function(t,e,o){if(void 0===e&&(e=null),void 0===o&&(o=!1),e||(e=this.node),!cc.isValid(e))return null;if(!o){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t];if(t==e.name)return e}var n;return-1!=t.indexOf("/")?((n=cc.find(t,e))&&(this.m_objects[t]=n),n):((n=this._findInChildren(e,t))&&(this.m_objects[t]=n),n)},e.prototype.GetSkeleton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(sp.Skeleton);var e=this.GetGameObject(t);return e?e.getComponent(sp.Skeleton):null},e.prototype.GetSprite=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Sprite);var e=this.GetGameObject(t);return e?e.getComponent(cc.Sprite):null},e.prototype.GetText=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Label);var e=this.GetGameObject(t);return e?e.getComponent(cc.Label):null},e.prototype.GetProgressBar=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.ProgressBar);var e=this.GetGameObject(t);return e?e.getComponent(cc.ProgressBar):null},e.prototype.GetButton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Button);var e=this.GetGameObject(t);return e?e.getComponent(cc.Button):null},e.prototype.GetInputField=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.EditBox);var e=this.GetGameObject(t);return e?e.getComponent(cc.EditBox):null},e.prototype.GetSlider=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Slider);var e=this.GetGameObject(t);return e?e.getComponent(cc.Slider):null},e.prototype.SetText=function(t,e){this.GetText(t)&&(this.GetText(t).string=e)},e.prototype.SetInputText=function(t,e){this.GetInputField(t)&&(this.GetInputField(t).string=e)},e.prototype.SetProgressBar=function(t,e){this.GetProgressBar(t)&&(this.GetProgressBar(t).progress=e)},e.prototype.getChildByName=function(t,e){return cc.find(t,e||this.node)},i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"./CountDownLabel":"CountDownLabel","./LinkPrefab":"LinkPrefab"}],BgMove:[function(t,e,o){"use strict";cc._RF.push(e,"c8233PjzAhMlYLg25izO4DB","BgMove");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.initCameraPos=cc.Camera.main.node.position,cc.Camera.main.node.on(cc.Node.EventType.POSITION_CHANGED,this.onCameraPosChange,this)},e.prototype.start=function(){},e.prototype.onCameraPosChange=function(){var t=cc.Camera.main.node.position.sub(this.initCameraPos);this.node.getChildByName("MountinsBack").x-=.03*t.x,this.node.getChildByName("Mountains").x-=.06*t.x,this.initCameraPos=cc.Camera.main.node.position},i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],BigNumber:[function(t,e,o){"use strict";cc._RF.push(e,"54e77vDtqxBzobog1OBgJmv","BigNumber");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,c=(r.property,function(){function t(){}var e;return e=t,t.genLetters=function(){if(!this.aLetters){for(var t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e=["K",3,"M",6,"B",9,"T",12],o=0,n=15;n<400;n+=3){for(var r=Math.floor(o/26)+2,i="",c=0;c<r;++c)i+=t[o%26];e.push(i,n),o++}this.aLetters=e}},t.getN=function(t){this.genLetters();for(var o=0;o<e.aLetters.length;){if(e.aLetters[o]==t)return Math.pow(10,e.aLetters[o+1]);o+=2}return 0},t.getLargeString=function(t,o,n){if(void 0===o&&(o="K"),void 0===n&&(n=!0),this.genLetters(),0==t)return t+"";for(var r=NaN,i=Math.round(t/Math.abs(t)),c=t=Math.abs(t),a=0,s=0,l=0,u=0;u<e.aLetters.length;){if(e.aLetters[u]==o){s=u;break}u+=2}if(t<Math.pow(10,e.aLetters[s+1]))a=-1;else{for(r=Math.pow(10,e.aLetters[s+1]),a=s/2;c/1e3>=r;)c/=1e3,a++;for(;c/1e3>=1e3;)c/=1e3}return-1==a?e.addSeparators(Math.round((t-.5)*i).toString()):(c/1e3<10?l=2:c/1e3<100&&(l=1),c/=Math.pow(10,3-l),c=parseInt(c),c/=Math.pow(10,l),n?(c*i).toFixed(1)+""+e.aLetters[2*a]:(c*i).toString()+""+e.aLetters[2*a])},t.addSeparators=function(t,e){void 0===e&&(e=",");var o="-"==t.charAt(0);o&&(t=t.substr(1));for(var n="",r=0,i=t.length-1;i>0;)n=t.charAt(i)+n,++r%3==0&&(n=e+n),i-=1;return n=t.charAt(0)+n,o&&(n="-"+n),n},t.convertToLargeString=function(t){return e.getStringOfNumber(t)},t.getStringOfNumber=function(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===n&&(n=!1);var r=1;n&&(r=10);var i=Math.round(t);if(Math.round(t)>=1e6&&i<1e9&&e)return(Math.round(i/1e3/r)/(1e3/r)).toString()+" M";if(i>=1e9&&i<1e12)return(Math.round(i/1e6/r)/(1e3/r)).toString()+" B";if(i>=1e12&&i<1e15)return(Math.round(i/1e9/r)/(1e3/r)).toString()+" T";if(i>=1e15&&i<1e18)return(Math.round(i/1e12/r)/(1e3/r)).toString()+" q";if(i>=1e18&&i<1e21)return(Math.round(i/1e15/r)/(1e3/r)).toString()+" Qq";if(i>=1e21&&i<1e24)return(Math.round(i/1e18/r)/(1e3/r)).toString()+" s";if(i>=1e24&&i<1e27)return(Math.round(i/1e21/r)/(1e3/r)).toString()+" Ss";if(i>=1e27&&i<1e30)return(Math.round(i/1e24/r)/(1e3/r)).toString()+" O";if(i>=1e30&&i<1e33)return(Math.round(i/1e27/r)/(1e3/r)).toString()+" N";if(i>=1e33&&i<1e26)return(Math.round(i/1e30/r)/(1e3/r)).toString()+" d";if(i>=1e26&&i<1e29)return(Math.round(i/1e33/r)/(1e3/r)).toString()+" U";if(i>=1e29&&i<1e32)return(Math.round(i/1e26/r)/(1e3/r)).toString()+" Dd";var c=" ";o&&(c=",");for(var a="",s=String(Math.round(t)),l=String(Math.round(t)).length-1;l>=0;)3==(a=s.charAt(l)+a).length&&0!=l&&(a=c+a),7==a.length&&0!=l&&(a=c+a),l-=1;return a},t.aLetters=null,e=n([i],t)}());o.default=c,cc._RF.pop()},{}],Booster:[function(t,e,o){"use strict";cc._RF.push(e,"bd4edi0qjFFLqwCUXcLPV/+","Booster");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/utils/AudioMgr"),a=t("./ControlPanel"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onBeginContact=function(t,e,o){"Booster"==e.node.name&&"Truck"==o.node.name&&(c.default.Instance().playSFX("NiroCollect"),a.default.instance.flyBooster(this.node),this.node.destroy())},i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../../ccstudio/utils/AudioMgr":"AudioMgr","./ControlPanel":"ControlPanel"}],BusyLoadingManager:[function(t,e,o){"use strict";cc._RF.push(e,"12c2cVzRyxCUJXLkf/ktf0p","BusyLoadingManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.BUSY_TYPE=void 0;var n,r=t("../utils/Utils"),i=t("./WindowManager");(function(t){t[t.NET=0]="NET",t[t.RES=1]="RES"})(n=o.BUSY_TYPE||(o.BUSY_TYPE={}));var c=function(){function t(){this.busyMap=new Map,this.timerID=null,this.delay=300}return Object.defineProperty(t,"ins",{get:function(){return null==t.instance&&(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this;r.default.loadRes("common/BusyLoading","prefabs",cc.Prefab,function(e,o){t.loadingUI=cc.instantiate(o),t.loadingUI.zIndex=999})},t.prototype.addBusy=function(t,e){if(void 0===e&&(e=""),null!=this.loadingUI){""==e&&(e=t==n.NET?"Please wait...":"Loading..."),this.loadingUI.getChildByName("lbl_text").getComponent(cc.Label).string=e;var o=this.busyMap.get(t);o?this.busyMap.set(t,o+1):this.busyMap.set(t,1),this.checkBusy()}else this.init()},t.prototype.removeBusy=function(t){var e=this.busyMap.get(t);e?this.busyMap.set(t,e-1):cc.warn("remove busy error",t),this.checkBusy()},t.prototype.checkBusy=function(){var t=this;if(null!=this.loadingUI&&cc.isValid(this.loadingUI))if(this.getBusyCount()>0){var e=this,o=function(){t.getBusyCount()>0?(e.loadingUI.opacity=255,e.updateTips()):cc.warn("timeout end waitcnt is 0"),t.timerID=null};this.timerID?(clearTimeout(this.timerID),this.timerID=setTimeout(o,this.delay)):this.loadingUI.parent?this.updateTips():(this.loadingUI.opacity=0,this.loadingUI.parent=i.default.Instance().getLayer(i.UILayer.\u6700\u9876\u5c42),this.timerID=setTimeout(o,this.delay))}else this.timerID&&(clearTimeout(this.timerID),this.timerID=0),this.loadingUI.parent&&this.loadingUI.removeFromParent();else this.init()},t.prototype.updateTips=function(){},t.prototype.getBusyCount=function(){var t=0;return this.busyMap.forEach(function(e){t+=e}),t},t.instance=null,t}();o.default=c,cc._RF.pop()},{"../utils/Utils":"Utils","./WindowManager":"WindowManager"}],BusyLoading:[function(t,e,o){"use strict";cc._RF.push(e,"c1854C3vLJI+qixohh/HfGf","BusyLoading");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/component/Component"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_circle=null,e}return r(e,t),e.prototype.onEnable=function(){cc.Tween.stopAllByTarget(this.node_circle),cc.tween(this.node_circle).by(1,{angle:-360}).repeatForever().start()},i([l(cc.Node)],e.prototype,"node_circle",void 0),i([s],e)}(c.default);o.default=u,cc._RF.pop()},{"../../ccstudio/component/Component":"Component"}],CarGame:[function(t,e,o){"use strict";cc._RF.push(e,"1c1abkH+2ZJaIhwsU3JFecF","CarGame");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/component/BaseUI"),s=t("../../ccstudio/data/Model"),l=t("../../ccstudio/manager/WindowManager"),u=t("../../ccstudio/utils/AudioMgr"),p=t("./ControlPanel"),f=t("./FollowCamera"),d=cc._decorator,h=d.ccclass,y=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isResulting=!1,e}var o;return r(e,t),o=e,Object.defineProperty(e,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._instance=this,l.default.Instance().register(this.node_ui),cc.director.getScene().name="game",this.initPhysics(),this.initVars()},e.prototype.initPhysics=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=new cc.Vec2(0,-500)},e.prototype.initVars=function(){s.default.game.earnCoin=0},e.prototype.start=function(){var t=this;this.loadSubpackage("prefabs",function(){t.loadComplete()})},e.prototype.loadSubpackage=function(t,e){cc.assetManager.loadBundle(t,function(){console.log(t,"\u52a0\u8f7d\u5b8c\u6bd51"),e&&e()})},e.prototype.loadComplete=function(){var t=this;s.default.game.level>c.default.totalLevel&&(s.default.game.level=c.default.totalLevel);var e=s.default.game.level;cc.assetManager.getBundle("prefabs").load("levels/level"+e,cc.Prefab,function(e,o){var n=cc.instantiate(o);n.parent=t.node_container,t.levelNode=n,t.createTruck()})},e.prototype.createTruck=function(){var t=this;cc.assetManager.getBundle("prefabs").load("game/Truck",cc.Prefab,function(e,o){var n=cc.instantiate(o);n.name="Truck",n.parent=t.levelNode,n.position=cc.v2(80,-40),cc.Camera.main.node.getComponent(f.default).target=n})},e.prototype.victory=function(){this.isResulting||(this.isResulting=!0,p.default.instance.checkGetBouns()&&(s.default.game.earnCoin+=c.default.TASK_REWARD),this.scheduleOnce(function(){l.default.Instance().open(c.default.winPath.ResultWin)},1),u.default.Instance().playSFX("Brake"))},e._instance=null,o=i([h],e)}(a.default));o.default=y,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/component/BaseUI":"BaseUI","../../ccstudio/data/Model":"Model","../../ccstudio/manager/WindowManager":"WindowManager","../../ccstudio/utils/AudioMgr":"AudioMgr","./ControlPanel":"ControlPanel","./FollowCamera":"FollowCamera"}],Coin:[function(t,e,o){"use strict";cc._RF.push(e,"e010e9Nz8xN7LIN9losZAPw","Coin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/utils/AudioMgr"),a=t("./ControlPanel"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){},e.prototype.onBeginContact=function(t,e,o){"Coin"==e.node.name&&"Truck"==o.node.name&&(c.default.Instance().playSFX("coinCollect"),a.default.instance.flyCoin(this.node),this.node.destroy())},e.prototype.start=function(){},i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../../ccstudio/utils/AudioMgr":"AudioMgr","./ControlPanel":"ControlPanel"}],Component:[function(t,e,o){"use strict";cc._RF.push(e,"576fbgRADFO9ri2c4PYbaMW","Component");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../manager/EventManager"),a=t("../utils/Utils"),s=t("./LinkPrefab"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){var e=t.call(this)||this;return e.m_objects=new Map,e.inject(),e}return r(e,t),e.prototype.inject=function(){var t=this,e=this.onLoad;this.onLoad=function(){e&&e.call(t),t.autoMapping(t.node),t.afteronLoad()};var o=this.onDisable;this.onDisable=function(){t.RemoveAllEventTrigger(),o&&o.call(t)}},e.prototype.afteronLoad=function(){},e.prototype.AddEventTrigger=function(t,e){c.EventManager.Inst.on(t,this,e)},e.prototype.RemoveEventTrigger=function(t,e){c.EventManager.Inst.off(t,this,e)},e.prototype.RemoveAllEventTrigger=function(){c.EventManager.Inst.offAllCaller(this)},e.prototype.addClick=function(t,e){void 0===e&&(e=null);var o=new cc.Component.EventHandler;o.target=this.node,o.component=cc.js.getClassName(this),o.handler=e||"onBtnClicked",o.customEventData=t.name,t.getComponent(cc.Button).clickEvents.push(o)},e.prototype.autoMapping=function(t){var e=t.name.split("_");if(e.length>1){var o=t.name,n=e[0];if(null!=this[o])return;switch(n){case"btn":this[o]=t.getComponent(cc.Button),this[o]&&this.addClick(t);break;case"progress":this[o]=t.getComponent(cc.ProgressBar);break;case"txt":case"lbl":this[o]=t.getComponent(cc.Label);break;case"sp":this[o]=t.getComponent(cc.Sprite);break;case"spine":this[o]=t.getComponent(sp.Skeleton);break;case"link":this[o]=t.getComponent(s.default);break;case"toggle":case"tog":if(this[o]=t.getComponent(cc.Toggle),this[o]){var r=new cc.Component.EventHandler;r.target=this.node,r.component=cc.js.getClassName(this),r.handler="onBtnClicked",r.customEventData=o,t.getComponent(cc.Toggle).clickEvents.push(r)}break;case"toc":this[o]=t.getComponent(cc.ToggleContainer);break;case"page":this[o]=t.getComponent(cc.PageView);break;case"list":this[o]=t.getComponent(cc.ScrollView);break;case"node":default:this[o]=t}}for(var i=0,c=t.children;i<c.length;i++){var a=c[i];this.autoMapping(a)}},e.prototype.setSpriteUrl=function(t,e){cc.assetManager.loadRemote(e,function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),t.spriteFrame=n}})},e.prototype._findInChildren=function(t,e){var o=t.getChildByName(e);if(o)return o;if(0==t.childrenCount)return null;for(var n=0;n<t.childrenCount;++n){var r=this._findInChildren(t.children[n],e);if(r)return r}return null},e.prototype.setSpriteFrame=function(t,e,o,n){return void 0===n&&(n=null),a.default.loadResSync(e,o,cc.SpriteFrame).then(function(e){t.isValid&&(t.spriteFrame=e),n&&n()})},e.prototype.GetGameObject=function(t,e,o){if(void 0===e&&(e=null),void 0===o&&(o=!1),e||(e=this.node),!cc.isValid(e))return null;if(!o){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t];if(t==e.name)return e}var n;return-1!=t.indexOf("/")?((n=cc.find(t,e))&&(this.m_objects[t]=n),n):((n=this._findInChildren(e,t))&&(this.m_objects[t]=n),n)},e.prototype.GetSkeleton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(sp.Skeleton);var e=this.GetGameObject(t);return e?e.getComponent(sp.Skeleton):null},e.prototype.GetSprite=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Sprite);var e=this.GetGameObject(t);return e?e.getComponent(cc.Sprite):null},e.prototype.GetText=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Label);var e=this.GetGameObject(t);return e?e.getComponent(cc.Label):null},e.prototype.GetProgressBar=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.ProgressBar);var e=this.GetGameObject(t);return e?e.getComponent(cc.ProgressBar):null},e.prototype.GetButton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Button);var e=this.GetGameObject(t);return e?e.getComponent(cc.Button):null},e.prototype.GetInputField=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.EditBox);var e=this.GetGameObject(t);return e?e.getComponent(cc.EditBox):null},e.prototype.GetSlider=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Slider);var e=this.GetGameObject(t);return e?e.getComponent(cc.Slider):null},e.prototype.SetText=function(t,e){this.GetText(t)&&(this.GetText(t).string=e)},e.prototype.SetInputText=function(t,e){this.GetInputField(t)&&(this.GetInputField(t).string=e)},e.prototype.SetProgressBar=function(t,e){this.GetProgressBar(t)&&(this.GetProgressBar(t).progress=e)},e.prototype.getChildByName=function(t,e){return cc.find(t,e||this.node)},i([u],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../manager/EventManager":"EventManager","../utils/Utils":"Utils","./LinkPrefab":"LinkPrefab"}],ControlPanel:[function(t,e,o){"use strict";cc._RF.push(e,"97b07JheplC4ovuk51ABqzG","ControlPanel");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/component/BaseUI"),s=t("../../ccstudio/data/Model"),l=t("../../ccstudio/manager/WindowManager"),u=t("../../ccstudio/utils/AudioMgr"),p=t("../../ccstudio/utils/Utils"),f=cc._decorator,d=f.ccclass,h=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isForward=!1,e.isBackward=!1,e.isDown=!1,e.isUp=!1,e._isBooster=!1,e.isBoosting=!1,e.sp_bar=null,e.node_coins=null,e.pool_coin=null,e.pool_booster=null,e.txt_coin=null,e.txt_level=null,e.timer_time=null,e.txt_task_reward=null,e._start=!1,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.txt_task_reward.string=c.default.TASK_REWARD+"",o._instance=this},Object.defineProperty(e,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.registerButtonEvent(this.node_foward,"onButtonPressForward","onButtonReleaseForward"),this.registerButtonEvent(this.node_back,"onButtonPressBackward","onButtonReleaseBackward"),this.registerButtonEvent(this.node_up,"onButtonPressUp","onButtonReleaseUp"),this.registerButtonEvent(this.node_down,"onButtonPressDown","onButtonReleaseDown"),this.registerButtonEvent(this.node_booster,"onButtonPressBooster","onButtonReleaseBooster"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.updateCoin(),this.updateLevel()},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.k:this.onButtonPressUp();break;case cc.macro.KEY.a:this.onButtonPressBackward();break;case cc.macro.KEY.j:this.onButtonPressDown();break;case cc.macro.KEY.d:this.onButtonPressForward();break;case cc.macro.KEY.space:this.onButtonPressBooster()}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.k:this.onButtonReleaseUp();break;case cc.macro.KEY.a:this.onButtonReleaseBackward();break;case cc.macro.KEY.j:this.onButtonReleaseDown();break;case cc.macro.KEY.d:this.onButtonReleaseForward();break;case cc.macro.KEY.space:this.onButtonReleaseBooster()}},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.registerButtonEvent=function(t,e,o){t.on(cc.Node.EventType.TOUCH_START,this[e],this),t.on(cc.Node.EventType.TOUCH_END,this[o],this),t.on(cc.Node.EventType.TOUCH_CANCEL,this[o],this)},e.prototype.onButtonPressForward=function(){this.updateTime(),this.isForward=!0,u.default.Instance().playSFX("EngineSound")},e.prototype.onButtonReleaseForward=function(){this.isForward=!1,u.default.Instance().stopSFXByName("EngineSound")},e.prototype.onButtonPressBackward=function(){this.isBackward=!0,this.updateTime(),u.default.Instance().playSFX("EngineSound")},e.prototype.onButtonReleaseBackward=function(){this.isBackward=!1,u.default.Instance().stopSFXByName("EngineSound")},e.prototype.onButtonPressUp=function(){this.isUp=!0},e.prototype.onButtonReleaseUp=function(){this.isUp=!1},e.prototype.onButtonPressDown=function(){this.isDown=!0},e.prototype.onButtonReleaseDown=function(){this.isDown=!1},e.prototype.onButtonPressBooster=function(){this._isBooster=!0,this.sp_bar.fillRange>0?u.default.Instance().playSFX("nitro"):cc.tween(this.node_bosster_icon).to(.25,{scale:1.3}).to(.25,{scale:1}).start()},e.prototype.onButtonReleaseBooster=function(){this._isBooster=!1,this.isBoosting=!1,u.default.Instance().stopSFXByName("nitro")},e.prototype.update=function(t){this._isBooster&&this.sp_bar.fillRange>0&&(this.sp_bar.fillRange-=.3*t,this.isBoosting=!0,this.sp_bar.fillRange<0&&(this.sp_bar.fillRange=0,this.onButtonReleaseBooster()))},e.prototype.addBooster=function(){this.sp_bar.fillRange=1},e.prototype.flyCoin=function(t){var e=this,o=p.default.convetOtherNodeSpaceAR(t,cc.find("Canvas"));o=o.sub(cc.Camera.main.node.position);var n=p.default.convetOtherNodeSpaceAR(this.node_coins,cc.find("Canvas")),r=this.pool_coin.get();r.group="ui",r.parent=cc.find("Canvas"),r.position=o;var i=o.add(n).mul(.5).add(cc.v2(0,200)),c=cc.bezierTo(.6,[o,i,n]);cc.tween(r).then(c).call(function(){s.default.game.earnCoin++,e.updateCoin(),e.pool_coin.put(r),cc.tween(e.node_coins).to(.1,{scale:1.3}).to(.1,{scale:1}).start()}).start()},e.prototype.flyBooster=function(t){var e=this;this.addBooster();var o=p.default.convetOtherNodeSpaceAR(t,cc.find("Canvas"));o=o.sub(cc.Camera.main.node.position);var n=p.default.convetOtherNodeSpaceAR(this.node_bosster_icon,cc.find("Canvas")),r=this.pool_booster.get();r.group="ui",r.parent=cc.find("Canvas"),r.position=o;var i=o.add(n).mul(.5).add(cc.v2(0,200)),c=cc.bezierTo(.6,[o,i,n]);cc.tween(r).then(c).call(function(){e.pool_booster.put(r),cc.tween(e.node_bosster_icon).to(.1,{scale:1.5}).to(.1,{scale:1}).start()}).start()},e.prototype.updateCoin=function(){this.txt_coin.string=s.default.game.earnCoin+""},e.prototype.updateLevel=function(){this.txt_level.string="Level "+s.default.game.level},e.prototype.updateTime=function(){var t=this;this._start||(this._start=!0,this.timer_time.startCountdown(60,function(){t.timer_time.node.parent.active=!1},function(e){10==e&&(t.node_time_warnning.active=!0,t.txt_task_reward.node.color=cc.color(255,0,0),t.txt_task_reward.getComponent(cc.LabelOutline).color=cc.color(255,250,250))}))},e.prototype.onBtnClicked=function(t,e){var o=this;"btn_home"==e?cc.director.loadScene("main"):"btn_pause"==e&&(this.timer_time.pause=!0,l.default.Instance().open(c.default.winPath.PauseWin,null,function(){o.timer_time.pause=!1}))},e.prototype.checkGetBouns=function(){return this.timer_time.node.parent.active},e._instance=null,o=i([d],e)}(a.default));o.default=h,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/component/BaseUI":"BaseUI","../../ccstudio/data/Model":"Model","../../ccstudio/manager/WindowManager":"WindowManager","../../ccstudio/utils/AudioMgr":"AudioMgr","../../ccstudio/utils/Utils":"Utils"}],CountDownLabel:[function(t,e,o){"use strict";cc._RF.push(e,"15dd0ngZq9NlotR01NDZC9t","CountDownLabel");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.totalTime=0,e.currentTime=0,e.endCallback=null,e.updateCallback=null,e._pause=!1,e}return r(e,t),e.prototype.onLoad=function(){this.label=this.getComponent(cc.Label),this.totalTime=60,this.label.string=this.formatTime(this.totalTime)},e.prototype.startCountdown=function(t,e,o){void 0===o&&(o=null),this.totalTime=t,this.currentTime=t,this.updateCallback=o,this.endCallback=e,this.schedule(this.updateCountdown,1)},Object.defineProperty(e.prototype,"pause",{get:function(){return this._pause},set:function(t){this._pause=t},enumerable:!1,configurable:!0}),e.prototype.updateCountdown=function(){if(!this.pause){if(this.currentTime-=1,this.updateCallback&&this.updateCallback(this.currentTime),this.currentTime<=0)return this.stopCountdown(),void(this.endCallback&&this.endCallback());this.label.string=this.formatTime(this.currentTime)}},e.prototype.formatTime=function(t){var e=Math.floor(t/60),o=t%60;return(e<10?"0"+e:""+e)+":"+(o<10?"0"+o:""+o)},e.prototype.stopCountdown=function(){this.unschedule(this.updateCountdown)},i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Dispatcher:[function(t,e,o){"use strict";cc._RF.push(e,"c80e6J4WuZJYpzEfrHoixJT","Dispatcher");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,c=(r.property,function(){function t(){this.dict=new Object}return t.prototype.on=function(t,e,o){var n=this.dict[t];if(n){if(-1!=this.getIndex(n,e,o))return}else n=new Array,this.dict[t]=n;n.push({callback:e,thisObj:o})},t.prototype.getIndex=function(t,e,o){for(var n=0;n<t.length;n++){var r=t[n];if(r.callback==e&&r.thisObj==o)return n}return-1},t.prototype.off=function(t,e,o){if(this.dict[t]){var n=this.dict[t];if(n){var r=this.getIndex(n,e,o);-1!=r&&n.splice(r,1),n.length<=0&&delete this.dict[t]}}},t.prototype.offByTarget=function(t){for(var e in this.dict)for(var o=this.dict[e],n=0;n<o.length;n++)o[n].thisObj==t&&(o.splice(n,1),n--)},t.prototype.execute=function(t,e){void 0===e&&(e=null);var o=this.dict[t];if(null!=o)for(var n=0;n<o.length;n++){var r=o[n],i=r.callback,c=r.thisObj;i.apply(c,e)}},n([i],t)}());o.default=c,cc._RF.pop()},{}],EventDispatcher:[function(t,e,o){"use strict";cc._RF.push(e,"9b64apON0tFB7JAeUAcT9O9","EventDispatcher");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.EventDispatcher=void 0;var i=t("./Handler"),c=function(){function t(){}return t.prototype.hasListener=function(t){return!(!this._events||!this._events[t])},t.prototype.event=function(t,e){if(void 0===e&&(e=null),!this._events||!this._events[t])return!1;var o=this._events[t];if(o.run)o.once&&delete this._events[t],null!=e?o.runWith(e):o.run();else{for(var n=0,r=o.length;n<r;n++){var i=o[n];i&&(null!=e?i.runWith(e):i.run()),i&&!i.once||(o.splice(n,1),n--,r--)}0===o.length&&this._events&&delete this._events[t]}return!0},t.prototype.on=function(t,e,o,n){return void 0===n&&(n=null),this._createListener(t,e,o,n,!1)},t.prototype.once=function(t,e,o,n){return void 0===n&&(n=null),this._createListener(t,e,o,n,!0)},t.prototype._createListener=function(t,e,o,n,r,i){void 0===i&&(i=!0),i&&this.off(t,e,o,r);var c=a.create(e||this,o,n,r);this._events||(this._events={});var s=this._events;return s[t]?s[t].run?s[t]=[s[t],c]:s[t].push(c):s[t]=c,this},t.prototype.off=function(t,e,o,n){if(void 0===n&&(n=!1),!this._events||!this._events[t])return this;var r=this._events[t];if(null!=r)if(r.run)e&&r.caller!==e||null!=o&&r.method!==o||n&&!r.once||(delete this._events[t],r.recover());else{for(var i=0,c=0,a=r.length;c<a;c++){var s=r[c];s?!s||e&&s.caller!==e||null!=o&&s.method!==o||n&&!s.once||(i++,r[c]=null,s.recover()):i++}i===a&&delete this._events[t]}return this},t.prototype.offAll=function(t){void 0===t&&(t=null);var e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var o in e)this._recoverHandlers(e[o]);this._events=null}return this},t.prototype.offAllCaller=function(t){if(t&&this._events)for(var e in this._events)this.off(e,t,null);return this},t.prototype._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--)t[e]&&(t[e].recover(),t[e]=null)},t.prototype.isMouseEvent=function(e){return t.MOUSE_EVENTS[e]||!1},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t}();o.EventDispatcher=c;var a=function(t){function e(e,o,n,r){return t.call(this,e,o,n,r)||this}return r(e,t),e.prototype.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,o,n,r){return void 0===n&&(n=null),void 0===r&&(r=!0),e._pool.length?e._pool.pop().setTo(t,o,n,r):new e(t,o,n,r)},e._pool=[],e}(i.Handler);cc._RF.pop()},{"./Handler":"Handler"}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"c2bf4mSvmlIX4ROVmpCeHtA","EventManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventType=o.EventManager=void 0;var n=t("./EventDispatcher"),r=function(){function t(){this.ed=new n.EventDispatcher}return Object.defineProperty(t,"Inst",{get:function(){return null===this.inst&&(this.inst=new t),this.inst},enumerable:!1,configurable:!0}),t.prototype.event=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.ed.event(t,e)},t.prototype.on=function(t,e,o){this.ed.on(t,e,o)},t.prototype.off=function(t,e,o){this.ed.off(t,e,o)},t.prototype.offAll=function(t){this.ed.offAll(t)},t.prototype.offAllCaller=function(t){this.ed.offAllCaller(t)},t.prototype.HasListener=function(t){return this.ed.hasListener(t)},t.inst=null,t}();o.EventManager=r,function(t){t.GameShow="GameShow",t.GameHide="GameHide",t.DRAW_GIFT="DRAW_GIFT"}(o.EventType||(o.EventType={})),cc._RF.pop()},{"./EventDispatcher":"EventDispatcher"}],FitUI:[function(t,e,o){"use strict";cc._RF.push(e,"b8ab4ecXMtJmaHqS2zhnRk1","FitUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.FitUIOrientation=o.FitUIPlatform=void 0;var c,a,s=cc._decorator,l=s.ccclass,u=s.property,p=s.executeInEditMode,f=s.menu,d=s.requireComponent;(function(t){t[t.ANDROID=0]="ANDROID",t[t.IOS=1]="IOS",t[t.OTHER=2]="OTHER"})(c=o.FitUIPlatform||(o.FitUIPlatform={})),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(a=o.FitUIOrientation||(o.FitUIOrientation={}));var h=function(){return this.orientation==a.HORIZONTAL},y=function(){return this.orientation==a.VERTICAL},_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orientation=a.VERTICAL,e.left=!1,e.right=!1,e.top=!1,e.bottom=!1,e.iLeft=!1,e.iRight=!1,e.iTop=!1,e.iBottom=!1,e.oLeft=!1,e.oRight=!1,e.oTop=!1,e.oBottom=!1,e}return r(e,t),Object.defineProperty(e.prototype,"a",{get:function(){return c.ANDROID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"i",{get:function(){return c.IOS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"o",{get:function(){return c.OTHER},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.applySettings()},e.prototype.applySettings=function(){var t=cc.view.getVisibleSize(),e=cc.sys.platform,o=t.width/t.height;if((o=this.orientation==a.VERTICAL?o:1/o)>=.5)this.updateFitStrategy(!0,!0);else{this.orientation==a.VERTICAL&&this.updateFitStrategy(!0,!1),this.orientation==a.HORIZONTAL&&this.updateFitStrategy(!1,!0);var n={top:this.top,left:this.left,right:this.right,bottom:this.bottom},r={top:this.iTop,left:this.iLeft,right:this.iRight,bottom:this.iBottom},i={top:this.oTop,left:this.oLeft,right:this.oRight,bottom:this.oBottom};switch(e){case cc.sys.ANDROID:this.fitPhone(n);break;case cc.sys.IPHONE:this.fitPhone(r);break;default:switch(cc.sys.os){case cc.sys.OS_IOS:this.fitPhone(r);break;case cc.sys.OS_ANDROID:this.fitPhone(n);break;default:this.fitPhone(i)}}}},e.prototype.fitPhone=function(t){var e=cc.view.getVisibleSize(),o=this.orientation==a.VERTICAL?e.height:e.width,n=44*o/812,r=34*o/812;switch(this.orientation){case a.VERTICAL:t.top&&this.updateWidget("top",n),t.bottom&&this.updateWidget("bottom",r);break;case a.HORIZONTAL:t.left&&this.updateWidget("left",r),t.right&&this.updateWidget("right",n)}},e.prototype.updateWidget=function(t,e){var o=this.getComponent(cc.Widget);o&&(o["default_"+t]||(o["default_"+t]=o[""+t]),o[""+t]=o["default_"+t]+e)},e.prototype.updateFitStrategy=function(t,e){var o=this.node.getComponent(cc.Canvas);o&&(o.fitWidth=t,o.fitHeight=e,o.applySettings())},i([u({displayName:"\u9002\u914d\u65b9\u5411",type:cc.Enum(a)})],e.prototype,"orientation",void 0),i([u({displayName:"\u5b89\u5353\u8bbe\u5907",type:cc.Enum(c)})],e.prototype,"a",null),i([u({displayName:"left",visible:h})],e.prototype,"left",void 0),i([u({displayName:"right",visible:h})],e.prototype,"right",void 0),i([u({displayName:"top",visible:y})],e.prototype,"top",void 0),i([u({displayName:"bottom",visible:y})],e.prototype,"bottom",void 0),i([u({displayName:"\u82f9\u679c\u8bbe\u5907",type:cc.Enum(c)})],e.prototype,"i",null),i([u({displayName:"left",visible:h})],e.prototype,"iLeft",void 0),i([u({displayName:"right",visible:h})],e.prototype,"iRight",void 0),i([u({displayName:"top",visible:y})],e.prototype,"iTop",void 0),i([u({displayName:"bottom",visible:y})],e.prototype,"iBottom",void 0),i([u({displayName:"\u5176\u5b83\u8bbe\u5907",type:cc.Enum(c)})],e.prototype,"o",null),i([u({displayName:"left",visible:h})],e.prototype,"oLeft",void 0),i([u({displayName:"right",visible:h})],e.prototype,"oRight",void 0),i([u({displayName:"top",visible:y})],e.prototype,"oTop",void 0),i([u({displayName:"bottom",visible:y})],e.prototype,"oBottom",void 0),i([l,f("\u516c\u7528\u7ec4\u4ef6/FitUI"),p,d(cc.Widget)],e)}(cc.Component);o.default=_,cc._RF.pop()},{}],FloorShapeController:[function(t,e,o){"use strict";cc._RF.push(e,"af95c66/s1O86mXThigGK3+","FloorShapeController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./GraphicsSpriteMesh"),a=cc._decorator,s=a.ccclass,l=(a.property,a.executeInEditMode),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphicsSpriteMesh=null,e}return r(e,t),e.prototype.Draw=function(t){this.reset();for(var e=0;e<t.length;++e){var o=t[e];0==e?this.graphicsSpriteMesh.graphics.moveTo(o.x,o.y):this.graphicsSpriteMesh.graphics.lineTo(o.x,o.y)}this.graphicsSpriteMesh.stroke()},e.prototype.reset=function(){this.graphicsSpriteMesh=this.getComponent(c.default)||this.addComponent(c.default),this.graphicsSpriteMesh.clear(),this.graphicsSpriteMesh.graphics.lineWidth=16,this.graphicsSpriteMesh.graphics.moveTo(0,0)},i([s,l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./GraphicsSpriteMesh":"GraphicsSpriteMesh"}],FloorShapeEdit:[function(t,e,o){"use strict";cc._RF.push(e,"6eb7eI7L3NGhKwmkAA9sr8r","FloorShapeEdit");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)n[r]=i[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./PolygonMask"),s=t("./ccstudio/common/GameConst"),l=cc._decorator,u=l.ccclass,p=l.property,f=l.executeInEditMode,d=window.poly2tri,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._segment_count=3,e._curve_width=512,e._line_vertex_segment=[],e._line_vertex=[cc.v2(0,200),cc.v2(200,200),cc.v2(400,200),cc.v2(600,200)],e.lineWidth=16,e.lineColor=cc.Color.WHITE,e._backSpriteFrame=null,e._vertexes=[cc.v2(0,0),cc.v2(0,100),cc.v2(100,100),cc.v2(100,0)],e}return r(e,t),Object.defineProperty(e.prototype,"line_vertex",{get:function(){return this._line_vertex},set:function(t){var e=this;this._line_vertex=t,this._line_vertex_segment=this._generateSmoothCurve(this._line_vertex,this._segment_count),this._vertexes.length=0,this._line_vertex_segment.forEach(function(t){e._vertexes.push(t),e._vertexes.push(t.sub(cc.v2(0,e._curve_width)))}),this.vertexes=this._vertexes,this.draw()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.lineWidth=4;var t=this.node.getChildByName("line");t||((t=new cc.Node).parent=this.node,t.name="line",t.addComponent(cc.Graphics));var e=this.node.getChildByName("back");e||((e=new cc.Node).parent=this.node,e.name="back",e.addComponent(cc.MeshRenderer),e.addComponent(a.default).vertexes=[],this.backSpriteFrame=this.backSpriteFrame),this.genPhysicsCollider(),this.draw(),this.drawBack()},e.prototype.genPhysicsCollider=function(){var t=this.node.getChildByName("collider");t||((t=new cc.Node).parent=this.node,t.name="collider"),t.destroyAllChildren(),t.removeComponent(cc.PhysicsPolygonCollider),t.removeComponent(cc.RigidBody),new d.SweepContext(this.segments).triangulate().getTriangles().forEach(function(e){var o=new cc.Node;o.parent=t;var n=o.addComponent(cc.PhysicsPolygonCollider);n.points=e.getPoints().map(function(t){return cc.v2(t.x,t.y)}),o.group=s.default.GROUP_FLOOR,n.apply(),o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static})},e.prototype.draw=function(){var t=this.node.getComponentInChildren(cc.Graphics);if(t){t.lineWidth=this.lineWidth,t.strokeColor=this.lineColor,t.clear();for(var e=0;e<this._line_vertex_segment.length;e++)0==e?t.moveTo(this._line_vertex_segment[e].x,this._line_vertex_segment[e].y):t.lineTo(this._line_vertex_segment[e].x,this._line_vertex_segment[e].y);t.stroke()}},e.prototype.drawSegment=function(t){var e=y.simplifyCurve(t,20);this.line_vertex=e,this.drawBack()},Object.defineProperty(e.prototype,"backSpriteFrame",{get:function(){return this._backSpriteFrame},set:function(t){var e=this.node.getComponentInChildren(a.default);e&&(e.spriteFrame=t),this._backSpriteFrame=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"segments",{get:function(){0==this._line_vertex_segment.length&&(this._line_vertex_segment=this._generateSmoothCurve(this._line_vertex,this._segment_count));for(var t=[],e=0;e<this._line_vertex_segment.length;e++)t.push(this._line_vertex_segment[e]);return this.unique_point(t)},enumerable:!1,configurable:!0}),e.prototype.unique_point=function(t){return function(t){for(var e,o,n=[],r=0;r<t.length;r++){for(var i=!1,c=0;c<n.length;c++)if(e=t[r],o=n[c],e.equals(o)){i=!0;break}i||n.push(t[r])}return n}(t)},e.prototype.drawBack=function(){var t=this.node.getComponentInChildren(a.default);if(t&&this.segments.length>=3){var e=this.segments;t.editing=!0,t.vertexes=e.reverse()}},Object.defineProperty(e.prototype,"vertexes",{get:function(){return this._vertexes},set:function(t){this._vertexes=t},enumerable:!1,configurable:!0}),e.prototype._generateSmoothCurve=function(t,e){for(var o=[],n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],c=r.add(i).mul(.5),a=r.add(i).mul(.5),s=0;s<=e;s++){var l=s/e,u=this._calculatePointOnBezierCurve(r,c,a,i,l);o.push(u)}return o},e.prototype._calculatePointOnBezierCurve=function(t,e,o,n,r){var i=1-r,c=r*r,a=i*i,s=a*i,l=c*r;return t.mul(s).add(e.mul(3*a*r)).add(o.mul(3*i*c)).add(n.mul(l))},e.prototype.editend=function(){this.drawBack(),this.genPhysicsCollider()},i([p({visible:!1})],e.prototype,"_line_vertex",void 0),i([p({type:cc.Vec2,visible:!1})],e.prototype,"line_vertex",null),i([p],e.prototype,"lineWidth",void 0),i([p],e.prototype,"lineColor",void 0),i([p({type:cc.SpriteFrame})],e.prototype,"_backSpriteFrame",void 0),i([p({displayName:"\u5730\u9762\u8d34\u56fe",type:cc.SpriteFrame})],e.prototype,"backSpriteFrame",null),i([u,f],e)}(cc.Component);o.default=h;var y=function(){function t(){}return t.simplifyCurve=function(t,e){var o=t[0],n=t[t.length-1];return c([o],this.simplify(t.slice(1,-1),e),[n])},t.simplify=function(t,e){var o=t.length;if(o<3)return t;for(var n=0,r=0,i=2;i<o-1;i++){var c=this.getPerpendicularDistance(t[0],t[o-1],t[i]);c>n&&(n=c,r=i)}var a=[];if(n>e){var s=this.simplify(t.slice(0,r+1),e),l=this.simplify(t.slice(r),e);a.push.apply(a,s.slice(0,-1)),a.push.apply(a,l)}else a.push(t[0]),a.push(t[o-1]);return a},t.getPerpendicularDistance=function(t,e,o){var n=t.x,r=t.y,i=e.x,c=e.y,a=o.x,s=o.y;return Math.abs((c-r)*a-(i-n)*s+i*r-c*n)/Math.sqrt(Math.pow(c-r,2)+Math.pow(i-n,2))},t}();cc._RF.pop()},{"./PolygonMask":"PolygonMask","./ccstudio/common/GameConst":"GameConst"}],FollowCamera:[function(t,e,o){"use strict";cc._RF.push(e,"89583v/BedB6oTqP2F7OPGq","FollowCamera");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._target=null,e.offset=cc.v2(0,0),e}return r(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!1,configurable:!0}),e.prototype.lateUpdate=function(){if(this._target){var t=this._target.position,e=this.node.position.lerp(t,.1).add(this.offset),o=e.sub(this.node.position);this.node.setPosition(e);var n=1-Math.floor(o.x)/20;n<.8&&(n=.8),cc.Camera.main.zoomRatio=cc.misc.lerp(cc.Camera.main.zoomRatio,n,.01)}},i([s(cc.Vec2)],e.prototype,"offset",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],GameConst:[function(t,e,o){"use strict";cc._RF.push(e,"9829fJYoDRHV7s5Fl8wsYNp","GameConst"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../manager/WindowManager"),r=function(){function t(){}return t.localDataKey="cargame",t.winPath={LoadingWin:{name:"LoadingWin",path:"loading/",bundle:"prefabs",layer:n.UILayer.\u80cc\u666f},LevelWin:{name:"LevelWin",path:"game/",bundle:"prefabs",layer:n.UILayer.\u80cc\u666f},LoseWin:{name:"LoseWin",path:"game/",bundle:"prefabs",layer:n.UILayer.\u5f39\u7a97},RestarConfirm:{name:"RestarConfirm",path:"game/",bundle:"prefabs"},ResultWin:{name:"ResultWin",path:"game/",bundle:"prefabs",layer:n.UILayer.\u5f39\u7a97},PauseWin:{name:"PauseWin",path:"game/",bundle:"prefabs",layer:n.UILayer.\u5f39\u7a97},ShopWin:{name:"ShopWin",path:"shop/",bundle:"prefabs",layer:n.UILayer.\u5f39\u7a97}},t.ItemCfg=[{icon:"sticker1",price:100,idx:1},{icon:"sticker2",price:250,idx:2},{icon:"sticker3",price:500,idx:3},{icon:"sticker4",price:1e3,idx:4},{icon:"sticker5",price:2500,idx:5},{icon:"sticker6",price:3500,idx:6},{icon:"texture1",price:75,idx:1},{icon:"texture2",price:150,idx:2},{icon:"texture3",price:350,idx:3},{icon:"texture4",price:1e3,idx:4},{icon:"texture5",price:2500,idx:5},{icon:"texture6",price:4500,idx:6},{icon:"color1",price:250,idx:1},{icon:"color2",price:500,idx:2},{icon:"color3",price:1500,idx:3},{icon:"color4",price:2500,idx:4},{icon:"color5",price:4e3,idx:5},{icon:"color6",price:5e3,idx:6},{icon:"rim1",price:300,idx:1},{icon:"rim2",price:750,idx:2},{icon:"rim3",price:1200,idx:3},{icon:"rim4",price:3e3,idx:4},{icon:"rim5",price:4e3,idx:5},{icon:"rim6",price:7500,idx:6}],t.GameEvent={UpdateItem:"UpdateItem",UpdateCoin:"UpdateCoin"},t.totalLevel=15,t.TASK_REWARD=50,t.GROUP_FLOOR="Floor",t}();o.default=r,cc._RF.pop()},{"../manager/WindowManager":"WindowManager"}],GameEntry:[function(t,e,o){"use strict";cc._RF.push(e,"85b45/oJnpCr5ygrf6ykZvO","GameEntry");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../ccstudio/common/GameConst"),a=t("../ccstudio/component/Component"),s=t("../ccstudio/data/Model"),l=t("../ccstudio/manager/WindowManager"),u=t("../ccstudio/manager/WXTTUtils"),p=t("../ccstudio/utils/AudioMgr"),f=cc._decorator,d=f.ccclass,h=f.property;cc.dynamicAtlasManager.enabled=!0,cc.macro.CLEANUP_IMAGE_CACHE=!1;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_container=null,e}return r(e,t),e.prototype.start=function(){cc.director.getPhysicsManager().enabled=!1,cc.director.getScene().name="main",s.default.loadData(),cc.debug.setDisplayStats(!1),l.default.Instance().register(this.ui_container),l.default.Instance().open(c.default.winPath.LoadingWin,null),this.playBgm(),u.default.showShareMenu()},e.prototype.playBgm=function(){window.wx&&window.wx.onShow(function(){p.default.Instance().playBGM("bg")})},i([h(cc.Node)],e.prototype,"ui_container",void 0),i([d],e)}(a.default);o.default=y,cc._RF.pop()},{"../ccstudio/common/GameConst":"GameConst","../ccstudio/component/Component":"Component","../ccstudio/data/Model":"Model","../ccstudio/manager/WXTTUtils":"WXTTUtils","../ccstudio/manager/WindowManager":"WindowManager","../ccstudio/utils/AudioMgr":"AudioMgr"}],GameModel:[function(t,e,o){"use strict";cc._RF.push(e,"612a1i6Jw9L/rhFZuXluOH3","GameModel");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../common/GameConst"),a=t("./ModelBase"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._coin=0,e.unlockedItems=[],e.selectedSticker=0,e.selectedTexture=0,e.selectedColor=0,e.selectedRim=0,e.earnCoin=0,e.level=1,e}return r(e,t),Object.defineProperty(e.prototype,"coin",{get:function(){return this._coin},set:function(t){this._coin=t,cc.director.emit(c.default.GameEvent.UpdateCoin)},enumerable:!1,configurable:!0}),e.prototype.setDefault=function(){},e.prototype.setData=function(e){t.prototype.setData.call(this,e)},i([a.save],e.prototype,"_coin",void 0),i([a.save],e.prototype,"unlockedItems",void 0),i([a.save],e.prototype,"selectedSticker",void 0),i([a.save],e.prototype,"selectedTexture",void 0),i([a.save],e.prototype,"selectedColor",void 0),i([a.save],e.prototype,"selectedRim",void 0),i([a.save],e.prototype,"level",void 0),e}(a.default);o.default=s,cc._RF.pop()},{"../common/GameConst":"GameConst","./ModelBase":"ModelBase"}],GameWin:[function(t,e,o){"use strict";cc._RF.push(e,"4a837l9myxGlqWqBKH+5fSM","GameWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/component/BasePanel"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onBtnClicked=function(){},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"../../ccstudio/component/BasePanel":"BasePanel"}],GraphicsSpriteMesh:[function(t,e,o){"use strict";cc._RF.push(e,"e9ce6tbg9dEmbNsfkgdxFxv","GraphicsSpriteMesh");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=c.requireComponent,u=c.executeInEditMode,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.graphics=null,e._vertices={x:[],y:[],nu:[],nv:[],triangles:[]},e}return r(e,t),e.prototype.onLoad=function(){this.graphics=this.node.getComponent(cc.Graphics),this.sprite.type=cc.Sprite.Type.MESH,this.sprite.node.anchorY=1,this.sprite.node.anchorX=0,this.sprite.node.scaleY=-1,this.sprite.node.x=this.node.y=0,this.sprite.spriteFrame.vertices=this._vertices},e.prototype.stroke=function(){if(cc.game.renderType===cc.game.RENDER_TYPE_WEBGL){var t=this._vertices;t.x.length=t.y.length=t.nu.length=t.nv.length=t.triangles.length=0;for(var e=this.graphics._impl,o=this.graphics.lineWidth,n=[],r=cc.v2(),i=0;i<e._paths.length;i++){var c=e._paths[i].points;if(!(c.length<2))for(var a=c.length-1;a>0;a--){var s=[],l=cc.v2(c[a].x,c[a].y),u=cc.v2(c[a-1].x,c[a-1].y),p=l.sub(u),f=(0==p.y?cc.v2(0,1):cc.v2(1,-p.x/p.y).normalize()).mulSelf(o/2),d=l.add(f),h=l.sub(f),y=u.add(f),_=u.sub(f),g=p.len(),v=t.x.length;t.x.push(d.x,h.x,y.x,_.x),t.y.push(d.y,h.y,y.y,_.y),t.nu.push(.001*r.x,.001*r.x,.001*(r.x+g),.001*(r.x+g)),p.y>=0?t.nv.push(1,0,1,0):t.nv.push(0,1,0,1),s.push(v+0),s.push(v+1),s.push(v+2),s.push(v+1),s.push(v+2),s.push(v+3);var m=p.signAngle(cc.v2(-1,0));v=t.x.length,t.x.push(l.x),t.y.push(l.y),t.nu.push(.001*r.x),t.nv.push(.5);for(var b=0;b<12;b++){var C=2*Math.PI*b/12,O=cc.v2(o/2*Math.cos(C),o/2*Math.sin(C));t.x.push(O.add(l).x),t.y.push(O.add(l).y),t.nu.push(.001*(O.rotate(m).x+r.x)),t.nv.push(O.rotate(m).y/o+.5),0===b?s.push(v,v+1+b,v+12):s.push(v,v+1+b,v+b)}n.push(s),r.addSelf(cc.v2(g,0))}}n.reverse(),n.forEach(function(e){var o;(o=t.triangles).push.apply(o,e)}),this.sprite.setVertsDirty()}else this.graphics.stroke()},e.prototype.clear=function(){if(this.graphics=this.node.getComponent(cc.Graphics),this.graphics.clear(!0),cc.game.renderType===cc.game.RENDER_TYPE_WEBGL){var t=this._vertices;t.x.length=t.y.length=t.nu.length=t.nv.length=t.triangles.length=0,this.sprite.setVertsDirty()}},i([s(cc.Sprite)],e.prototype,"sprite",void 0),i([a,l(cc.Graphics),u],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Handler:[function(t,e,o){"use strict";cc._RF.push(e,"1d260sqKwdN97Xop+Sm2MBp","Handler"),Object.defineProperty(o,"__esModule",{value:!0}),o.Handler=void 0;var n=function(){function t(t,e,o,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=!1),this.once=!1,this._id=0,this.setTo(t,e,o,n)}return t.prototype.setTo=function(e,o,n,r){return void 0===r&&(r=!1),this._id=t._gid++,this.caller=e,this.method=o,this.args=n,this.once=r,this},t.prototype.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},t.prototype.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var o=this.method.apply(this.caller,this.args);else o=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),o},t.prototype.clear=function(){return this.caller=null,this.method=null,this.args=null,this},t.prototype.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,o,n,r){return void 0===n&&(n=null),void 0===r&&(r=!0),t._pool.length?t._pool.pop().setTo(e,o,n,r):new t(e,o,n,r)},t._pool=[],t._gid=1,t}();o.Handler=n,cc._RF.pop()},{}],ImageQueueLoader:[function(t,e,o){"use strict";cc._RF.push(e,"507ffLR20VDNaCF3T3vZ5ns","ImageQueueLoader"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Utils"),r=function(){function t(){this.arr=[],this.resList=[]}return t.prototype.load=function(t,e){this.arr=t,this.callback=e,this.doNextLoad()},t.prototype.doNextLoad=function(){var t=this;if(this.arr.length>0){var e=this.arr.shift();n.default.loadRes(e.path,e.bundle,cc.Texture2D,function(e,o){t.resList.push(new cc.SpriteFrame(o)),t.doNextLoad()})}else this.callback(this.resList)},t}();o.default=r,cc._RF.pop()},{"./Utils":"Utils"}],LayerManager:[function(t,e,o){"use strict";cc._RF.push(e,"747a5oMzyhNuLj8Vql+cF2P","LayerManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.init=function(t){this.container=t,this.sceneLayer=t.getChildByName("layer_scene"),this.uiLayer=t.getChildByName("layer_ui"),this.windowLayer=t.getChildByName("layer_win"),this.alertLayer=t.getChildByName("layer_alert")},t.prototype.getNode=function(){var t=new cc.Node,e=t.addComponent(cc.Widget);return e.top=e.left=e.bottom=e.right=0,e.updateAlignment(),t},t}();o.default=n,cc._RF.pop()},{}],LevelControl:[function(t,e,o){"use strict";cc._RF.push(e,"6545dQa8ktNyLO18MdbcEMf","LevelControl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/component/BaseUI"),a=t("./Booster"),s=t("./Coin"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){for(var t=0,e=this.node.getChildByName("Coins").children;t<e.length;t++)(r=e[t]).getComponent(cc.PhysicsCircleCollider).sensor=!0,r.addComponent(s.default),r.name="Coin";for(var o=0,n=this.node.getChildByName("Boosters").children;o<n.length;o++){var r;(r=n[o]).getComponent(cc.PhysicsCircleCollider).sensor=!0,r.addComponent(a.default),r.name="Booster",cc.tween(r).to(.5,{scale:3}).to(.5,{scale:2.8}).union().repeatForever().start()}},e.prototype.start=function(){},i([u],e)}(c.default));o.default=p,cc._RF.pop()},{"../../ccstudio/component/BaseUI":"BaseUI","./Booster":"Booster","./Coin":"Coin"}],LinkPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"bfc54kpI8JOI6yHYbZgXsaU","LinkPrefab");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.executeInEditMode,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._prefabNode=null,e._prefab=null,e}return r(e,t),Object.defineProperty(e.prototype,"prefab",{get:function(){return this._prefab},set:function(t){this._onPrefabChanged(this._prefab,t)},enumerable:!1,configurable:!0}),e.prototype._onPrefabChanged=function(t,e){if(this._prefabNode&&(this._prefabNode.destroy(),this._prefabNode=null),this._prefab=e,e){var o=cc.instantiate(e);o&&(this._prefabNode=o,o._objFlags|=cc.Object.Flags.DontSave|cc.Object.Flags.LockedInEditor|cc.Object.Flags.HideInHierarchy,o.x=0,o.y=0,this.node.addChild(o,-1),o.name="prefabNode",this.node.setContentSize(o.getContentSize()))}},e.prototype.getPefabNode=function(){return this._initPrefab(),this._prefabNode},e.prototype.getPrefabComponect=function(t){var e=this._prefabNode;return e?e.getComponent(t):null},e.prototype.onLoad=function(){this._initPrefab()},e.prototype._initPrefab=function(){if(this._prefab&&!this._prefabNode){var t=this.node.getChildByName("prefabNode");if(t)this._prefabNode=t;else{var e=cc.instantiate(this._prefab);e&&(this._prefabNode=e,this.node.addChild(e,-1),e.name="prefabNode",e.x=0,e.y=0,this.node.setContentSize(e.getContentSize()))}}},i([l],e.prototype,"_prefab",void 0),i([l({type:cc.Prefab,visible:!0,displayName:"\u9884\u5236\u4f53"})],e.prototype,"prefab",null),i([a,s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],LoadingWin:[function(t,e,o){"use strict";cc._RF.push(e,"daa8bDgoEJAJr1iBPo++VNp","LoadingWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/component/BasePanel"),s=t("../../ccstudio/data/Model"),l=t("../../ccstudio/manager/WindowManager"),u=t("../../ccstudio/utils/AudioMgr"),p=t("../game/Truck"),f=cc._decorator,d=f.ccclass,h=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_circleGround=null,e}return r(e,t),e.prototype.start=function(){cc.director.on(c.default.GameEvent.UpdateCoin,this.updateCoin,this),this.updateCoin(),this.link_truck.getPrefabComponect(p.default).rotate(),cc.tween(this.btn_play.node).to(.5,{scale:1.2}).to(.5,{scale:.9}).union().repeatForever().start(),u.default.Instance().playBGM("bg"),this.link_truck.node.runAction(cc.sequence(cc.jumpBy(.3,0,3,0,1),cc.jumpBy(.3,0,-3,0,1)).repeatForever())},e.prototype.onBtnClicked=function(t,e){"btn_shop"==e?l.default.Instance().open(c.default.winPath.ShopWin):"btn_play"==e&&cc.director.loadScene("game")},e.prototype.update=function(){this.node_circleGround.angle+=.5},e.prototype.onDestroy=function(){cc.director.targetOff(this)},e.prototype.updateCoin=function(){this.txt_coin.string=s.default.game.coin+""},i([d],e)}(a.default));o.default=h,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/component/BasePanel":"BasePanel","../../ccstudio/data/Model":"Model","../../ccstudio/manager/WindowManager":"WindowManager","../../ccstudio/utils/AudioMgr":"AudioMgr","../game/Truck":"Truck"}],LoseWin:[function(t,e,o){"use strict";cc._RF.push(e,"271c56CKTZEwaTu6rUHZ0dq","LoseWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/component/BasePanel"),s=t("../../ccstudio/manager/WXTTUtils"),l=t("../../ccstudio/manager/WindowManager"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){s.default.showInterstitialAd(),s.default.showBanner()},e.prototype.close=function(e){t.prototype.close.call(this,e),s.default.destroyBanner()},e.prototype.onBtnClicked=function(t,e){switch(e){case"btn_refresh":this.close(!0),cc.director.loadScene("game");break;case"btn_shop":l.default.Instance().open(c.default.winPath.ShopWin)}},i([p],e)}(a.default));o.default=f,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/component/BasePanel":"BasePanel","../../ccstudio/manager/WXTTUtils":"WXTTUtils","../../ccstudio/manager/WindowManager":"WindowManager"}],ModelBase:[function(t,e,o){"use strict";cc._RF.push(e,"03c53y3PGJEYLnUg9XjV4aZ","ModelBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.save=void 0,o.save=function(t,e){var o=n.classMap.get(t.constructor);void 0===o&&(o=[],n.classMap.set(t.constructor,o)),o.push(e)};var n=function(){function t(){}return t.prototype.getData=function(){for(var e={},o=t.classMap.get(this.constructor),n=0;n<o.length;++n)e[o[n]]=this[o[n]];return e},t.prototype.setData=function(e){if(e)for(var o=t.classMap.get(this.constructor),n=0;n<o.length;++n){var r=e[o[n]];if(null!=r||null!=r)if("[object Object]"==Object.prototype.toString.call(r))for(var i in r)this[o[n]][i]=r[i];else this[o[n]]=r}},t.classMap=new Map,t}();o.default=n,cc._RF.pop()},{}],Model:[function(t,e,o){"use strict";cc._RF.push(e,"f5deeTYQSFOLJ9zqKiEa8Fi","Model"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../common/GameConst"),r=t("../utils/AudioMgr"),i=t("./GameModel"),c=function(){function t(){}return t.save=function(e){void 0===e&&(e=!1);var o={};o.game=t.game.getData(),t.savedata(o,e)},t.getGameData=function(){return cc.sys.localStorage.getItem(n.default.localDataKey)},t.loadData=function(){var e=cc.sys.localStorage.getItem(n.default.localDataKey);e?(e=JSON.parse(e),console.log("\u672c\u5730\u6570\u636e",e),t.game.setData(e.game)):(cc.sys.localStorage.setItem("bgmVolume",r.default.DEFAULT_VOLUME),cc.sys.localStorage.setItem("sfxVolume",r.default.DEFAULT_VOLUME),cc.sys.localStorage.setItem("vibrate",1),r.default.Instance().sfxVolume=r.default.DEFAULT_VOLUME,r.default.Instance().bgmVolume=r.default.DEFAULT_VOLUME,r.default.Instance().vibrate=1)},t.savedata=function(t,e){void 0===e&&(e=!1);var o=JSON.stringify(t);cc.sys.localStorage.setItem(n.default.localDataKey,o),t.game={}},t.game=new i.default,t}();o.default=c,cc._RF.pop()},{"../common/GameConst":"GameConst","../utils/AudioMgr":"AudioMgr","./GameModel":"GameModel"}],MsgHints:[function(t,e,o){"use strict";cc._RF.push(e,"147d9kVQGxGY66KgQWlHrUv","MsgHints");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../manager/WindowManager"),a=t("../utils/Utils"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,e.prototype.setMsg=function(t){this.node.getComponentInChildren(cc.Label).string=t,this.node.setScale(cc.v3(0,0,0)),this.node.y=.3*cc.winSize.height,cc.tween(this.node).to(.1,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).delay(.5).by(.5,{y:100}).removeSelf().start()},e.show=function(t){a.default.loadRes("common/MsgHints","prefabs",cc.Prefab,function(e,n){var r=cc.instantiate(n);r.parent=c.default.Instance().getLayer(c.UILayer.\u6700\u9876\u5c42),r.getComponent(o).setMsg(t)})},o=i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../manager/WindowManager":"WindowManager","../utils/Utils":"Utils"}],NavigateWeChat:[function(t,e,o){"use strict";cc._RF.push(e,"33f3edKzC9FxofiY0o/76YD","NavigateWeChat");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../manager/WXTTUtils"),a=t("../utils/Utils"),s=t("./Component"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbl_name=null,e.sp_icon=null,e.btn_jump=null,e.navigateData=null,e}return r(e,t),e.prototype.start=function(){var t=cc.tween(this.node.getChildByName("New Node"));cc.tween(this.node.getChildByName("New Node")).sequence(t.to(1,{scale:1.05}),t.to(1,{scale:.95})).repeatForever().start()},e.prototype.onBtnClicked=function(t){switch(t.target.name){case"btn_jump":c.default.navigateToMiniGame(this.navigateData)}},e.prototype.onEnable=function(){if(this.lbl_name.node.active=!1,this.sp_icon.node.active=!1,this.btn_jump.node.active=!1,c.default.navigatedata){var t=c.default.navigatedata,e=t.list;if(-1!=t.hideApps.indexOf(c.default.APPID))return;e=e.filter(function(t){return t.appId!=c.default.APPID});var o=[];if(e.forEach(function(t){o.push(t.weight)}),0==e.length)return;var n=e[a.default.weight(o)];this.navigateData=n,n.iconPath=a.default.shuffle(n.iconPath),this.setSpriteUrl(this.sp_icon,n.iconPath[0]),this.lbl_name.string=n.name,this.lbl_name.node.active=!0,this.sp_icon.node.active=!0,this.btn_jump.node.active=!0}},i([u],e)}(s.default));o.default=p,cc._RF.pop()},{"../manager/WXTTUtils":"WXTTUtils","../utils/Utils":"Utils","./Component":"Component"}],PauseWin:[function(t,e,o){"use strict";cc._RF.push(e,"79c3a5es6hGoau/iK9DmLqI","PauseWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/component/BasePanel"),s=t("../../ccstudio/manager/WindowManager"),l=t("../../ccstudio/manager/WXTTUtils"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){l.default.showInterstitialAd(),l.default.showBanner()},e.prototype.onBtnClicked=function(t,e){switch(e){case"btn_continue":this.close(!0);break;case"btn_refresh":this.close(!0),cc.director.loadScene("game");break;case"btn_shop":s.default.Instance().open(c.default.winPath.ShopWin)}},e.prototype.close=function(e){t.prototype.close.call(this,e),l.default.destroyBanner()},i([p],e)}(a.default));o.default=f,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/component/BasePanel":"BasePanel","../../ccstudio/manager/WXTTUtils":"WXTTUtils","../../ccstudio/manager/WindowManager":"WindowManager"}],PolygonMask:[function(t,e,o){"use strict";cc._RF.push(e,"83a4eR5//pE6pIqfaAd8Bje","PolygonMask");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc.gfx,a=cc._decorator,s=a.ccclass,l=a.property,u=a.executeInEditMode,p=a.requireComponent,f=[cc.v2(-50,-50),cc.v2(50,-50),cc.v2(50,50),cc.v2(-50,50)],d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._editing=!1,e._offset=cc.v2(0,0),e._spriteFrame=null,e._vertexes=f,e._meshCache=null,e.renderer=null,e.mesh=null,e.texture=null,e}return r(e,t),Object.defineProperty(e.prototype,"editing",{get:function(){return this._editing},set:function(t){this._editing=t,this._applyVertexes()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t,this.editing&&this._applyVertexes()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spriteFrame",{get:function(){return this._spriteFrame},set:function(t){this._spriteFrame=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexes",{get:function(){return this._vertexes},set:function(t){this._vertexes=t,this._updateMesh(),this.editing&&this._applyVertexes()},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._meshCache={},this._updateMesh();var t=this.node.getComponent(cc.MeshRenderer);t.mesh=null,this.renderer=t;var e=cc.MaterialVariant.createWithBuiltin("unlit",this).material;t.setMaterial(0,e),this._applySpriteFrame(),this._applyVertexes()},e.prototype._updateMesh=function(){if(this._meshCache){var t=this._meshCache[this.vertexes.length];t||((t=new cc.Mesh).init(new c.VertexFormat([{name:c.ATTR_POSITION,type:c.ATTR_TYPE_FLOAT32,num:2},{name:c.ATTR_UV0,type:c.ATTR_TYPE_FLOAT32,num:2}]),this.vertexes.length,!0),this._meshCache[this.vertexes.length]=t),this.mesh=t}},e.prototype._applyVertexes=function(){var t=this,e=this.mesh;if(e){var o=this.vertexes.map(function(e){return e.add(t.offset)});if(e.setVertices(c.ATTR_POSITION,o),this.texture){for(var n=[],r=0,i=o;r<i.length;r++){var a=i[r],s=(a.x+this.texture.width/2)/this.texture.width,l=1-(a.y+this.texture.height/2)/this.texture.height;n.push(cc.v2(s,l))}e.setVertices(c.ATTR_UV0,n)}if(this.vertexes.length>=3){for(var u=[],p=[].concat(o),f=0,d=-1;p.length>3;){var h=p[f%p.length],y=p[(f+1)%p.length],_=p[(f+2)%p.length],g=y.sub(h),v=_.sub(y);if(g.cross(v)>=0){for(var m=!1,b=0,C=p;b<C.length;b++){var O=C[b];if(O!==h&&O!==y&&O!==_&&this._testInTriangle(O,h,y,_)){m=!0;break}}if(m){if((f=(f+1)%p.length)===d)break}else u=u.concat([o.indexOf(h),o.indexOf(y),o.indexOf(_)]),p.splice(p.indexOf(y),1),d=f}else if((f=(f+1)%p.length)===d)break}u=u.concat(p.map(function(t){return o.indexOf(t)})),e.setIndices(u),this.renderer.mesh!=e&&(this.renderer.mesh=e)}}},e.prototype._testInTriangle=function(t,e,o,n){var r=o.sub(e),i=n.sub(e),c=n.sub(o),a=t.sub(e),s=t.sub(o);return r.cross(i)>=0!=r.cross(a)<0&&r.cross(i)>=0!=i.cross(a)>=0&&c.cross(r)>0!=c.cross(s)>=0},e.prototype._applySpriteFrame=function(){if(this.spriteFrame){var t=this.renderer.getMaterial(0),e=this.spriteFrame.getTexture();t.define("USE_DIFFUSE_TEXTURE",!0),t.setProperty("diffuseTexture",e),this.texture=e}},i([l({serializable:!1,readonly:!0})],e.prototype,"_editing",void 0),i([l],e.prototype,"editing",null),i([l],e.prototype,"_offset",void 0),i([l],e.prototype,"offset",null),i([l({type:cc.SpriteFrame})],e.prototype,"_spriteFrame",void 0),i([l({type:cc.SpriteFrame})],e.prototype,"spriteFrame",null),i([l({type:cc.Vec2,visible:!1})],e.prototype,"_vertexes",void 0),i([l({type:cc.Vec2,visible:!1})],e.prototype,"vertexes",null),i([s,u,p(cc.MeshRenderer)],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],PoolManager:[function(t,e,o){"use strict";cc._RF.push(e,"1b8d9V5lIJG0YlCK4FGlhfv","PoolManager");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,c=(r.property,function(){function t(){this.pools={},this.resKey={}}return t.prototype.init=function(t){t&&t()},t.prototype.get=function(t){if(null==this.pools[t]&&(this.pools[t]=new cc.NodePool),this.pools[t].size()>0){var e=this.pools[t].get();return e.getComponent(e.name)}var o=cc.instantiate(this.resKey[t]);return o.getComponent(o.name)},t.prototype.recover=function(t,e){null==this.pools[t]&&(this.pools[t]=new cc.NodePool),this.pools[t].put(e)},n([i],t)}());o.default=c,cc._RF.pop()},{}],RegionalEditor:[function(t,e,o){"use strict";cc._RF.push(e,"aa2a26YjsFD6YCOt8Y5jzbv","RegionalEditor");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=c.executeInEditMode,u=(c.requireComponent,c.menu,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._segment_count=16,e._curve_width=512,e._line_vertex_segment=[],e._line_vertex=[cc.v2(0,200),cc.v2(200,200),cc.v2(400,200),cc.v2(600,200)],e.lineWidth=50,e.lineColor=cc.Color.WHITE,e._vertexes=[cc.v2(0,0),cc.v2(0,100),cc.v2(100,100),cc.v2(100,0)],e}return r(e,t),Object.defineProperty(e.prototype,"line_vertex",{get:function(){return this._line_vertex},set:function(t){var e=this;this._line_vertex=t,this._line_vertex_segment=this._generateSmoothCurve(this._line_vertex,this._segment_count),this._vertexes.length=0,this._line_vertex_segment.forEach(function(t){e._vertexes.push(t),e._vertexes.push(t.sub(cc.v2(0,e._curve_width)))}),this.vertexes=this._vertexes,this.draw()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this.node.getChildByName("line");t||((t=new cc.Node).parent=this.node,t.name="line",t.addComponent(cc.Graphics),t._objFlags|=cc.Object.Flags.LockedInEditor|cc.Object.Flags.HideInHierarchy)},e.prototype.draw=function(){var t=this.node.getComponentInChildren(cc.Graphics);if(t){t.lineWidth=this.lineWidth,t.strokeColor=this.lineColor,t.clear();for(var e=0;e<this._line_vertex_segment.length;e++)0==e?t.moveTo(this._line_vertex_segment[e].x,this._line_vertex_segment[e].y):t.lineTo(this._line_vertex_segment[e].x,this._line_vertex_segment[e].y);t.stroke()}},Object.defineProperty(e.prototype,"segments",{get:function(){0==this._line_vertex_segment.length&&(this._line_vertex_segment=this._generateSmoothCurve(this._line_vertex,this._segment_count));for(var t=[],e=0;e<this._line_vertex_segment.length;e++)t.push(this._line_vertex_segment[e]);return t.push(this._line_vertex_segment[0]),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexes",{get:function(){return this._vertexes},set:function(t){this._vertexes=t},enumerable:!1,configurable:!0}),e.prototype._generateSmoothCurve=function(t,e){for(var o=[],n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],c=r.add(i).mul(.5),a=r.add(i).mul(.5),s=0;s<=e;s++){var l=s/e,u=this._calculatePointOnBezierCurve(r,c,a,i,l);o.push(u)}return o},e.prototype._calculatePointOnBezierCurve=function(t,e,o,n,r){var i=1-r,c=r*r,a=i*i,s=a*i,l=c*r;return t.mul(s).add(e.mul(3*a*r)).add(o.mul(3*i*c)).add(n.mul(l))},e.prototype.editend=function(){this.draw()},i([s({visible:!1})],e.prototype,"_line_vertex",void 0),i([s({type:cc.Vec2,visible:!1})],e.prototype,"line_vertex",null),i([s],e.prototype,"lineWidth",void 0),i([s],e.prototype,"lineColor",void 0),i([a,l],e)}(cc.Component));o.default=u,cc._RF.pop()},{}],RestarConfirm:[function(t,e,o){"use strict";cc._RF.push(e,"64d2dSmLJtO0Z3R0/++UQwa","RestarConfirm");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/component/BasePanel"),a=t("../../ccstudio/manager/WXTTUtils"),s=t("../../ccstudio/utils/AudioMgr"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txt_value=null,e}return r(e,t),e.prototype.onShow=function(t){var e=t.value;this.txt_value.string="-"+e,a.default.showInterstitialAd(),this.node_ui.x=600,cc.tween(this.node_ui).to(.25,{x:0},{easing:"backOut"}).start()},e.prototype.click_buy=function(){},e.prototype.click_ad=function(){var t=this;a.default.showVideo(function(e){0==e&&(t.data.callback(1),t.close())})},e.prototype.click_restart=function(){this.data.callback(0),this.close()},e.prototype.onBtnClicked=function(t,e){switch(s.default.Instance().playSFX("Click"),e){case"btn_ad":this.click_ad();break;case"btn_retry":this.click_restart()}},i([u],e)}(c.default));o.default=p,cc._RF.pop()},{"../../ccstudio/component/BasePanel":"BasePanel","../../ccstudio/manager/WXTTUtils":"WXTTUtils","../../ccstudio/utils/AudioMgr":"AudioMgr"}],ResultWin:[function(t,e,o){"use strict";cc._RF.push(e,"e5743weUBdKs5dllEP0jDbz","ResultWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/component/BasePanel"),s=t("../../ccstudio/data/Model"),l=t("../../ccstudio/manager/WXTTUtils"),u=t("../../ccstudio/manager/WindowManager"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onBtnClicked=function(t,e){var o=this;"btn_get"==e?(s.default.game.coin+=s.default.game.earnCoin,s.default.save(),this.nextLevel()):"btn_double"==e&&l.default.showVideo(function(t){0==t&&(s.default.game.coin+=2*s.default.game.earnCoin,s.default.save(),o.nextLevel())})},e.prototype.start=function(){this.txt_coin.string=s.default.game.earnCoin+"",s.default.game.level++},e.prototype.nextLevel=function(){s.default.game.level>c.default.totalLevel?cc.director.loadScene("main",function(){u.default.Instance().open(c.default.winPath.ShopWin)}):cc.director.loadScene("game",function(){u.default.Instance().open(c.default.winPath.ShopWin)})},i([f],e)}(a.default));o.default=d,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/component/BasePanel":"BasePanel","../../ccstudio/data/Model":"Model","../../ccstudio/manager/WXTTUtils":"WXTTUtils","../../ccstudio/manager/WindowManager":"WindowManager"}],RolloverCheck:[function(t,e,o){"use strict";cc._RF.push(e,"34508nNzaVLaYX6tYXCPuTO","RolloverCheck");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/manager/WindowManager"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rollover=!1,e.lose=!1,e}return r(e,t),e.prototype.onBeginContact=function(t,e,o){o.node.group==c.default.GROUP_FLOOR&&1==e.tag&&(this.rollover=!0)},e.prototype.onEndContact=function(t,e,o){o.node.group==c.default.GROUP_FLOOR&&1==e.tag&&(this.rollover=!1)},e.prototype.update=function(){this.lose||cc.Camera.main.zoomRatio>.98&&this.rollover&&(a.default.Instance().open(c.default.winPath.LoseWin),this.lose=!0)},i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/manager/WindowManager":"WindowManager"}],SceneParser:[function(t,e,o){"use strict";cc._RF.push(e,"97ed0Esvl5Da4JVBNM8qpEV","SceneParser");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./FloorShapeEdit"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.executeInEditMode,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneConfig=null,e._reloadLevel=!1,e}return r(e,t),e.prototype.onLoad=function(){0==this.node.childrenCount&&this.parseSceneConfig(),cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE)},Object.defineProperty(e.prototype,"reloadLevel",{get:function(){return this._reloadLevel},set:function(){this._reloadLevel=!1,this.node.destroyAllChildren(),this.parseSceneConfig()},enumerable:!1,configurable:!0}),e.prototype.parseSceneConfig=function(){var t,e,o,n;if(this.sceneConfig){for(var r,i,a=this.sceneConfig.text.split("\r\n"),s=function(s){var u=a[s].trim();if(""===u)return"continue";var p=JSON.parse(u);if(-1!=p.nodePath.indexOf("/Truck"))return"continue";r=p.PixelsPerUnit||100;var f=cc.v3(p.position.x*r*.3,p.position.y*r*.3,p.position.z*r*.3),d=cc.v3(p.scale.x,p.scale.y,p.scale.z),h=cc.quat(p.rotation.x,p.rotation.y,p.rotation.z,p.rotation.w),y=p.isActive,_=l.findOrCreateNodeByPath(p.nodePath);if(!_)return console.error("\u65e0\u6cd5\u627e\u5230\u6216\u521b\u5efa\u8282\u70b9\uff1a"+p.nodePath),"continue";if(""!=p.sprite){var g=p.sprite;l.loadImage(_,g,function(){_.setPosition(f),_.setScale(.3*d.x,.3*d.y,.3*d.z),_.setRotation(h)})}else _.setPosition(f),_.setRotation(h);var v=cc.RigidBodyType.Dynamic;if(2==p.body.bodyType?v=cc.RigidBodyType.Static:1==p.body.bodyType&&(v=cc.RigidBodyType.Kinematic),p.hasBoxCollider)(m=null==_.getComponent(cc.PhysicsBoxCollider)?_.addComponent(cc.PhysicsBoxCollider):_.getComponent(cc.PhysicsBoxCollider)).size=cc.size(p.boxCollider.boxSize.x*r,p.boxCollider.boxSize.y*r),m.offset=cc.v2(p.boxCollider.offset.x*r*.3,p.boxCollider.offset.y*r*.3),(i=_.getComponent(cc.RigidBody)).enabledContactListener=p.boxCollider.isTrigger,i.gravityScale=(null===(t=p.body)||void 0===t?void 0:t.gravityScale)||0,i.angularDamping=(null===(e=p.body)||void 0===e?void 0:e.angularDrag)||0,i.type=v;else if(p.hasCircleCollider){var m;(m=null==_.getComponent(cc.PhysicsCircleCollider)?_.addComponent(cc.PhysicsCircleCollider):_.getComponent(cc.PhysicsCircleCollider)).radius=p.circleCollider.radius*r*.3,(i=_.getComponent(cc.RigidBody)).enabledContactListener=p.circleCollider.isTrigger,i.gravityScale=(null===(o=p.body)||void 0===o?void 0:o.gravityScale)||0,i.angularDamping=(null===(n=p.body)||void 0===n?void 0:n.angularDrag)||0,i.type=v}else p.hasEdgeCollider&&cc.resources.load("prefabs/FloorShapeEdit",cc.Prefab,function(t,e){if(!t){var o=[];p.edgeCollider.points.forEach(function(t){o.push(cc.v2(t.x*r*.3,t.y*r*.3))});var n=_.parent;_.parent.destroyAllChildren();var i=cc.instantiate(e);n.addChild(i),i.getComponent(c.default).drawSegment(o)}});_.active=y},l=this,u=0;u<a.length;u++)s(u);console.log("\u573a\u666f\u914d\u7f6e\u89e3\u6790\u5b8c\u6210")}else console.error("\u573a\u666f\u914d\u7f6e\u6587\u4ef6\u4e3a\u7a7a")},e.prototype.findOrCreateNodeByPath=function(t){for(var e=t.split("/"),o=this.node,n=0;n<e.length;n++){var r=e[n],i=o.getChildByName(r);i||(i=new cc.Node(r),o.addChild(i)),o=i}return o},e.prototype.loadImage=function(t,e,o){t.getComponent(cc.Sprite)||t.addComponent(cc.Sprite),console.log("\u8bbe\u7f6e\u56fe\u7247",e),cc.resources.load("textures/"+e,cc.SpriteFrame,function(n,r){n?console.error("\u52a0\u8f7d\u56fe\u7247\u5931\u8d25\uff1a"+e):(t.getComponent(cc.Sprite).spriteFrame=r,o())})},i([l({type:cc.TextAsset})],e.prototype,"sceneConfig",void 0),i([l],e.prototype,"_reloadLevel",void 0),i([l({displayName:"\u91cd\u65b0\u751f\u6210\u5173\u5361"})],e.prototype,"reloadLevel",null),i([s,u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./FloorShapeEdit":"FloorShapeEdit"}],Shake:[function(t,e,o){"use strict";cc._RF.push(e,"495e6IO9O5JwJjnOXCd6/hL","Shake");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Shake=void 0;var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}var o;return r(e,t),o=e,e.create=function(t,e,n){var r=new o;return r.initWithDuration(t,e,n),r},e.prototype.initWithDuration=function(t,e,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=o,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},o=i([a],e)}(cc.ActionInterval));o.Shake=s,cc._RF.pop()},{}],ShopWin:[function(t,e,o){"use strict";cc._RF.push(e,"a7869LqYv9AaaLyaN9HLokL","ShopWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/component/BasePanel"),s=t("../../ccstudio/component/MsgHints"),l=t("../../ccstudio/data/Model"),u=t("../../ccstudio/utils/Utils"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_item=null,e.node_box=null,e}return r(e,t),e.prototype.onBtnClicked=function(t,e){"btn_close"==e&&this.close()},e.prototype.start=function(){this.updateCoin(),this.createItems(),cc.director.getPhysicsManager().enabled=!1},e.prototype.onDestroy=function(){"game"==cc.director.getScene().name&&(cc.director.getPhysicsManager().enabled=!0)},e.prototype.updateCoin=function(){this.txt_coin.string=l.default.game.coin+""},e.prototype.createItems=function(){for(var t=this,e=function(e){var n=cc.instantiate(o.node_item);n.parent=o.node_box;var r=n.getChildByName("icon"),i=c.default.ItemCfg[e-1];u.default.setSpriteFrame(r.getComponent(cc.Sprite),"textures/icon/"+i.icon);var a=n.getChildByName("coin");a.getChildByName("txt").getComponent(cc.Label).string=i.price+"";var p=l.default.game.unlockedItems.indexOf(e);a.active=-1==p,n.on(cc.Node.EventType.TOUCH_START,function(){-1==l.default.game.unlockedItems.indexOf(e)?l.default.game.coin>=i.price?(l.default.game.coin-=i.price,l.default.game.unlockedItems.push(e),t.updateCoin(),a.active=!1,t.setSelected(e)):s.default.show("No enough coins\uff01"):t.setSelected(e)},o)},o=this,n=1;n<=24;n++)e(n)},e.prototype.setSelected=function(t){var e=c.default.ItemCfg[t-1],o=Math.floor((t-1)/6)+1;1==o?l.default.game.selectedSticker=e.idx:2==o?l.default.game.selectedTexture=e.idx:3==o?l.default.game.selectedColor=e.idx:4==o&&(l.default.game.selectedRim=e.idx),cc.director.emit(c.default.GameEvent.UpdateItem),l.default.save()},i([f],e)}(a.default));o.default=d,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/component/BasePanel":"BasePanel","../../ccstudio/component/MsgHints":"MsgHints","../../ccstudio/data/Model":"Model","../../ccstudio/utils/Utils":"Utils"}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"442d19g/N9CUrVmBGOjEo45","Singleton"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.Instance=function(){return this.instance||(this.instance=new this),this.instance},t}();o.default=n,cc._RF.pop()},{}],StringUtil:[function(t,e,o){"use strict";cc._RF.push(e,"59779K17vJKd7R/mEYBRdp7","StringUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.trim=function(t){t=(t=t.replace(/^\s*/g,"")).replace(/\s*$/g,"")},t.format=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];for(var n=0;n<e.length;n++)t=t.replace(new RegExp("\\{"+n+"\\}","gm"),e[n]);return t},t}();o.default=n,cc._RF.pop()},{}],Timer:[function(t,e,o){"use strict";cc._RF.push(e,"7bddddFsYtAeI0QEs8TlpI2","Timer"),Object.defineProperty(o,"__esModule",{value:!0}),o.TimerUnit=void 0;var n=function(){this.repeatCount=-1,this.currentCount=0,this.time=0};o.TimerUnit=n;var r=function(){function t(){this.timerList=[],this._pause=!1}return t.prototype.initSchedule=function(t){t.schedule(this.update.bind(this))},t.prototype.register=function(t,e,o,r){void 0===r&&(r=-1);for(var i=[],c=4;c<arguments.length;c++)i[c-4]=arguments[c];var a=new n;a.interval=t,a.caller=e,a.method=o,a.repeatCount=r,a.params=i,a.currentCount=0,this.timerList.push(a)},t.prototype.clear=function(t,e){for(var o=0;o<this.timerList.length;o++){var n=this.timerList[o];if(n.caller==t&&n.method==e){this.timerList.splice(o,1);break}}},t.prototype.clearAll=function(t){for(var e=0;e<this.timerList.length;e++)this.timerList[e].caller==t&&(this.timerList.splice(e,1),e--)},t.prototype.update=function(t){if(!this._pause)for(var e=0;e<this.timerList.length;e++){var o=this.timerList[e];o.time+=t,o.time>=o.interval&&(o.time-=o.interval,o.currentCount++,o.method&&o.method.apply(o.caller,o.params),o.currentCount>=o.repeatCount&&o.repeatCount>0&&(this.timerList.splice(e,1),e--))}},t.prototype.pause=function(){this._pause=!0},t.prototype.resume=function(){this._pause=!1},t}();o.default=r,cc._RF.pop()},{}],Truck:[function(t,e,o){"use strict";cc._RF.push(e,"f3dcd4VtJhDAZbzURfC2Trl","Truck");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../ccstudio/common/GameConst"),a=t("../../ccstudio/component/BaseUI"),s=t("../../ccstudio/data/Model"),l=t("../../ccstudio/utils/Utils"),u=t("./CarGame"),p=t("./ControlPanel"),f=cc._decorator,d=f.ccclass,h=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rear=null,e.front=null,e.carBody=null,e.moveTorque=2e4,e.boostTorque=35e3,e.sp_texture=null,e.sp_sticker=null,e.sp_rimB=null,e.sp_rimF=null,e.sp_front=null,e._delta=0,e._rate=.016,e.node_ItemsInTruck=null,e}return r(e,t),e.prototype.onLoad=function(){this.node_ItemsInTruck.active=!1},e.prototype.start=function(){var t=this;setTimeout(function(){t.node_ItemsInTruck.active=!0,t.node_ItemsInTruck.children[s.default.game.level-1].active=!0},500),cc.director.on(c.default.GameEvent.UpdateItem,this.updateItem,this),this.updateItem()},e.prototype.update=function(t){if(t>1&&(t=1),this._delta+=t,!(this._delta<this._rate))for(this._delta>5*this._rate&&(this._delta=5*this._rate);this._delta>this._rate;)this._delta-=this._rate,this.fixedUpdate(this._rate)},e.prototype.fixedUpdate=function(t){p.default.instance&&(p.default.instance.isBoosting?(this.rear.angularVelocity=0,this.front.angularVelocity=0,this.rear.applyTorque(-this.boostTorque,!0),this.front.applyTorque(-this.boostTorque,!0)):p.default.instance.isForward?(this.rear.angularVelocity=0,this.front.angularVelocity=0,this.rear.applyTorque(-this.moveTorque,!0),this.front.applyTorque(-this.moveTorque,!0)):p.default.instance.isBackward?(this.rear.angularVelocity=0,this.front.angularVelocity=0,this.rear.applyTorque(this.moveTorque,!0),this.front.applyTorque(this.moveTorque,!0)):(this.rear.angularVelocity=cc.misc.lerp(this.rear.angularVelocity,0,.1),this.front.angularVelocity=cc.misc.lerp(this.front.angularVelocity,0,.1)),p.default.instance.isDown&&(this.carBody.angularVelocity=0,this.carBody.applyTorque(-3e4,!0)),p.default.instance.isUp&&(this.carBody.angularVelocity=0,this.carBody.applyTorque(3e4,!0)),this.checkEffect(t))},e.prototype.updateItem=function(){s.default.game.selectedSticker>0&&l.default.setSpriteFrame(this.sp_sticker,"textures/sticker/"+s.default.game.selectedSticker),s.default.game.selectedTexture>0&&l.default.setSpriteFrame(this.sp_texture,"textures/texture/"+s.default.game.selectedTexture),s.default.game.selectedColor>0&&l.default.setSpriteFrame(this.sp_front,"textures/color/"+s.default.game.selectedColor),s.default.game.selectedRim>0&&(l.default.setSpriteFrame(this.sp_rimB,"textures/rim/"+s.default.game.selectedRim),l.default.setSpriteFrame(this.sp_rimF,"textures/rim/"+s.default.game.selectedRim))},e.prototype.onDestroy=function(){cc.director.targetOff(this)},e.prototype.rotate=function(){cc.tween(this.sp_backTyre.node).by(1,{angle:-180}).repeatForever().start(),cc.tween(this.sp_frontTyre.node).by(1,{angle:-180}).repeatForever().start()},e.prototype.onBeginContact=function(t,e,o){"Truck"==e.node.name&&"FinishLine"==o.node.name&&u.default.instance.victory()},e.prototype.checkEffect=function(){p.default.instance.isBoosting?this.particle_glow.node.active=!0:this.particle_glow.node.active=!1,p.default.instance.isBackward||p.default.instance.isForward?this.particle_smoke.node.active=!0:this.particle_smoke.node.active=!1},i([h(cc.RigidBody)],e.prototype,"rear",void 0),i([h(cc.RigidBody)],e.prototype,"front",void 0),i([h(cc.RigidBody)],e.prototype,"carBody",void 0),i([d],e)}(a.default);o.default=y,cc._RF.pop()},{"../../ccstudio/common/GameConst":"GameConst","../../ccstudio/component/BaseUI":"BaseUI","../../ccstudio/data/Model":"Model","../../ccstudio/utils/Utils":"Utils","./CarGame":"CarGame","./ControlPanel":"ControlPanel"}],UIPool:[function(t,e,o){"use strict";cc._RF.push(e,"243a8XWZGVBpZTeNX6aYev1","UIPool");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../component/BaseUI"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e._pool=new cc.NodePool,e._nodes=[],e}return r(e,t),e.prototype.clear=function(){var t=this;this._nodes.forEach(function(e){t._pool.put(e)}),this._nodes.length=0},e.prototype.get=function(){var t;return t=this._pool.size()>0?this._pool.get():cc.instantiate(this.prefab),this._nodes.push(t),t},e.prototype.put=function(t){t instanceof cc.Component&&(t=t.node);var e=this._nodes.indexOf(t);e>=0&&cc.js.array.fastRemoveAt(this._nodes,e),this._pool.put(t)},e.prototype.onDestroy=function(){this._pool.clear(),this._pool=null,this._nodes.length=0},i([l(cc.Prefab)],e.prototype,"prefab",void 0),i([s,u("\u516c\u7528\u7ec4\u4ef6/UIPool")],e)}(c.default);o.default=p,cc._RF.pop()},{"../component/BaseUI":"BaseUI"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"faf67C/UKVCf4AP9VPq9Wpk","Utils");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i,c=t("./BigNumber"),a=t("./Shake"),s=window.wx||window.tt,l=(i=cc.Asset,r(function(){return null!==i&&i.apply(this,arguments)||this},i),function(){function t(){}return t.randomItem=function(t){return t&&t.length>0?t[this.getRandomInt(0,t.length-1)]:null},t.checkIsToDay=function(e){var o=new Date(e),n=new Date(t.getServerTime()),r=!1;return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()&&(r=!0),r},t.Object2Array=function(t){var e=[];for(var o in t)e.push(t[o]);return e},t.getRandom=function(t,e){return Math.random()*(e-t)+t},t.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.seedRandom=function(){return t.getRandom(0,1)},t.seedRandomInt=function(e,o){return t.getRandomInt(e,o)},t.rnd=function(t){return(t=(9301*t+49297)%233280)/233280},t.formatNumber=function(t,e){return void 0===e&&(e=1),t=Math.floor(t),c.default.getLargeString(t)},t.getPowNum=function(t){return Math.pow(10,t)},t.setServerTime=function(e){t.timeOffset=e-(new Date).getTime(),cc.log("timeOffset:",t.timeOffset)},t.getServerTime=function(){return(new Date).getTime()+t.timeOffset},t.Shake=function(t,e,o){var n=cc.find("Canvas/Main Camera");n.x=0,n.y=0,n.stopAllActions(),n.runAction(a.Shake.create(t,e,o))},t.showTip=function(t){cc.sys.platform==cc.sys.WECHAT_GAME&&s.showToast({title:t,icon:"none",duration:1500})},t.formatDate=function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},t.cloneObj=function(t){return t=JSON.stringify(t),JSON.parse(t)},t.getTimeStrByS=function(t){(t=Math.floor(t))<0&&(t=0);var e=Math.floor(t/3600/24);t-=86400*e;var o=Math.floor(t/3600);t-=3600*o;var n,r=Math.floor(t/60);n=r>9?""+r:"0"+r;var i;return i=(t-=60*r)>9?""+t:"0"+t,e>0?e+"\u5929"+o+"\u65f6"+r+"\u5206":o>0?(o>9?""+o:"0"+o)+":"+n:n+":"+i},t.getClockStrByS=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!0),(t=Math.floor(t))<0&&(t=0);var n=Math.floor(t/3600);t-=3600*n;var r=Math.floor(t/60);t-=60*r;var i="";return o&&(i+=n>9?""+n:"0"+n,i+=":"),i+=r>9?""+r:"0"+r,e&&(i+=":"+(t<10?"0":"")+t),i},t.checkObjEmpty=function(t){if(t){for(var e in t)return!1;return!0}return!0},t.checkOrderOver=function(e){var o=new Date(e),n=new Date(t.getServerTime());return o.getFullYear()!=n.getFullYear()||o.getMonth()!=n.getMonth()||o.getDate()!=n.getDate()},t.loadBundle=function(t){return new Promise(function(e,o){cc.assetManager.loadBundle(t,function(t,n){t?o(t):e(n)})})},t.loadRes=function(t,e,o,n,r){cc.assetManager.loadBundle(e,function(e,i){e?cc.log(e):i.load(t,o,null==r?function(){}:r,n)})},t.loadResSync=function(t,e,o){var n=this;return new Promise(function(r){n.loadBundle(e).then(function(e){e.load(t,o,null,function(e,o){e&&(console.log("not find",t),r(null)),r(o)})})})},t.loadReses=function(t,e,o,n,r){cc.assetManager.loadBundle(e,function(e,i){e?cc.log(e):i.load(t,o,null==r?function(){}:r,n)})},t.getRes=function(t,e,o){return cc.assetManager.getBundle(e).get(t,o)},t.weight=function(t){for(var e=0,o=0;o<t.length;++o)e+=t[o];if(e<=0)return-1;var n=Math.round(Math.random()*Number.MAX_VALUE)%e;for(o=0;o<t.length;++o){if(n<t[o])return o;n-=t[o]}return-1},t.shuffle=function(t){for(var e=t.length-1;e>=0;e--){var o=Math.floor(Math.random()*(e+1)),n=t[o];t[o]=t[e],t[e]=n}return t},t.getDate=function(t){var e=new Date(t),o=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return o+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)+" "+e.toTimeString().substr(0,8)},t.goldCrarryBit=function(t){for(var e=[[1e8,"N"],[1e7,"T"],[1e6,"G"],[1e5,"M"],[1e4,"K"],[1e3,"B"]],o=0;o<e.length;o++){var n=t/e[o][0];if(n>1)return""+n.toFixed(1)+e[o][1]}return t.toString()},t.fixFloat=function(t,e){void 0===e&&(e=2);var o=Math.pow(10,e);return Math.floor(t*o)/o},t.formatString=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];for(var n=0;n<e.length;n++){var r=new RegExp("\\{"+n+"\\}","gm");t=t.replace(r,e[n])}return t},t.count=function(t){if(!t)return 0;var e=0;for(var o in t)e++;return e},t.copy=function(t){var e=Object.create(t);return Object.assign(e,t),e},t.setGray=function(t,e){e?t.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")):t.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))},t.setSpriteFrame=function(t,e,o,n){void 0===o&&(o="resources"),void 0===n&&(n=null),cc.assetManager.getBundle(o).load(e,cc.Texture2D,function(o,r){o?cc.log("error",e):(t.spriteFrame=new cc.SpriteFrame(r),n&&n())})},t.initArray2=function(t,e,o){void 0===o&&(o=null);for(var n=[],r=0;r<t;r++){n[r]=[];for(var i=0;i<e;i++)n[r][i]=o}return n},t.localConvertWorldPointAR=function(t){return t?t.convertToWorldSpaceAR(cc.v2(0,0)):null},t.convetOtherNodeSpaceAR=function(e,o){if(!e||!o)return null;var n=t.localConvertWorldPointAR(e);return t.worldConvertLocalPointAR(o,n)},t.worldConvertLocalPointAR=function(t,e){return t?t.convertToNodeSpaceAR(e):null},t.getCross=function(t,e,o){return(e.x-t.x)*(o.y-t.y)-(o.x-t.x)*(e.y-t.y)},t.isPointInMatrix=function(e,o,n,r,i){return t.getCross(e,o,i)*t.getCross(n,r,i)>=0&&t.getCross(o,n,i)*t.getCross(r,e,i)>=0},t.randomArray=function(t){for(var e=[],o=t.length,n=0;n<o;n++){var r=Math.floor(Math.random()*t.length);e.push(t[r]),t.splice(r,1)}return e},t.removeElementFromArray=function(t,e){for(var o=e.length-1;o>=0;o--)if(e[o]==t){e.splice(o,1);break}},t.getDayCount=function(t,e){var o=!1;return(t%100!=0&&t%4==0||t%400==0)&&(o=!0),1==e||3==e||5==e||7==e||8==e||10==e||12==e?31:4==e||6==e||9==e||11==e?30:o?29:28},t.AngleToRadian=Math.PI/180,t.RadianToAngle=180/Math.PI,t.seed=5,t.timeOffset=0,t}());o.default=l,cc._RF.pop()},{"./BigNumber":"BigNumber","./Shake":"Shake"}],WXTTUtils:[function(t,e,o){"use strict";cc._RF.push(e,"e0c5br/4VNIaqXVxlpLMr9M","WXTTUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.NavigateItem=void 0;var n=t("../utils/AudioMgr");o.NavigateItem=function(){};var r=window.wx,i=function(){function t(){}return t.navigateToMiniGame=function(t){return console.warn("navigate",t),new Promise(function(e,o){r&&r.navigateToMiniProgram({appId:t.appId,path:"",success:function(){console.log("-----------\u8df3\u8f6c\u5c0f\u6e38\u620f:"+t.name+"\u6210\u529f-----------"),e()},fail:function(e){console.log("-----------\u8df3\u8f6c\u5c0f\u6e38\u620f:"+t.name+"\u5931\u8d25-----------"),console.log(JSON.stringify(e)),o()}})})},t.share=function(t){void 0===t&&(t=null),window.wx&&r.shareAppMessage({title:"\u771f\u5b9e\u7269\u7406\u5361\u8f66\u9a7e\u9a76\uff0c\u6311\u6218\u591a\u6837\u96be\u5ea6\uff01",imageUrl:"icon.png",success:function(){t&&t()},fail:function(){}})},t.onShow=function(t){window.wx&&r.onShow(function(){t&&t()})},t.showShareMenu=function(){window.wx&&(r.showShareMenu({menus:["shareAppMessage","shareTimeline"],withShareTicket:!0}),r.onShareAppMessage(function(){return{title:"\u771f\u5b9e\u7269\u7406\u5361\u8f66\u9a7e\u9a76\uff0c\u6311\u6218\u591a\u6837\u96be\u5ea6\uff01"}}))},t.jump=function(t){window.wx&&r.navigateToMiniProgram({appId:t,path:"",extraData:null,envVersion:"release",success:function(){console.log("\u8df3\u8f6c\u6210\u529f")}})},t.showTip=function(t){window.wx&&r.showToast({title:t,icon:"none",duration:1500})},t.destroyBanner=function(){null!=t.bannerAd&&(t.bannerAd.destroy(),t.bannerAd=null)},t.showBanner=function(){if(window.wx){var e=!1;r.getSystemInfo({success:function(t){-1!=t.model.search("iPhone X")&&(e=!0)}});var o=0;e&&(o=-30);var n=r.getSystemInfoSync(),i=r.createBannerAd({adUnitId:t.BANNER_ID,adIntervals:30,style:{left:n.windowWidth-300>>1,top:n.windowHeight-80+o,width:300}});t.bannerAd=i,t.bannerAd.show(),i.onResize(function(){i.style.top=n.windowHeight-i.style.realHeight+o}),i.onError(function(t){console.log("banner\u663e\u793a",t)})}},t.initInterstitialAd=function(){window.wx&&r.createInterstitialAd&&(t.interstitialAd=r.createInterstitialAd({adUnitId:t.CHAPIN_ID}),t.interstitialAd.onLoad(function(){console.log("\u63d2\u5c4f\u521d\u59cb\u5316\u6210\u529f"),t.showInterstitialAd()}),t.interstitialAd.onError(function(t){console.log("interstitialAd onError event emit",t)}),t.interstitialAd.onClose(function(t){console.log("interstitialAd onClose event emit",t)}))},t.showInterstitialAd=function(){t.interstitialAd&&(console.log("\u663e\u793a\u63d2\u5c4f\u5e7f\u544a"),t.interstitialAd.show().catch(function(t){console.error("\u63d2\u5c4f\u663e\u793a\u9519\u8bef",t)}))},t.initGridAd=function(){if(r&&r.createGridAd){var e=r.createCustomAd({adUnitId:t.GRID_ID,adIntervals:30,style:{top:300,left:0,width:750,fixed:!0}});e.onError(function(e){console.log("\u683c\u5b50\u5e7f\u544a\u521d\u59cb\u5316\u9519\u8bef",e),e.errCode>=1e3&&e.errCode<=1008&&(t.gridAdLoaded=!1)}),t.gridAd=e,this.showGridAd()}},t.showGridAd=function(){console.log("\u663e\u793a\u683c\u5b50",t.gridAd),t.gridAd&&t.gridAd.show().catch(function(t){console.error("\u683c\u5b50\u5e7f\u544a\u663e\u793a\u9519\u8bef",t)})},t.hideGrid=function(){null!=t.gridAd&&t.gridAd.hide()},t.showVideo=function(e){cc.sys.isBrowser?e(0):(t.videoCall=e,t.videoAd.show().catch(function(){t.videoAd.load().then(function(){return t.videoAd.show()}).catch(function(e){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t.showTip("\u6682\u65e0\u89c6\u9891\u53ef\u7528\uff01")})}))},t.initVideo=function(){var e=this;if(window.tt&&(t.BANNER_ID="b9ejk28htm12537eej",t.VIDEO_ID="3d54jb9l8he9d790eb",t.CHAPIN_ID="dxvtvq305l28kf0ci8"),console.log("\u521b\u5efa\u5e7f\u544a1"),window.wx){if(null!=t.videoAd)return;console.log("\u521b\u5efa\u5e7f\u544a2");var o=r.createRewardedVideoAd({adUnitId:t.VIDEO_ID});t.videoAd=o,o.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),o.onError(function(e){console.log(e),t.videoCall&&t.videoCall(-1)}),o.onClose(function(o){o&&o.isEnded||void 0===o?(e.lastautovideo=Date.now(),t.videoCall&&t.videoCall(0)):t.videoCall&&t.videoCall(-1)})}},t.autoVide=function(){if(!NetControl.isContrilVersion()){if(Date.now()-this.lastautovideo<4e4)return;this.lastautovideo=Date.now(),this.showVideo(function(){})}},t.vibrateShort=function(){console.warn("\u9707\u52a8"),r&&n.default.Instance().vibrate&&r.vibrateShort()},t.vibrateLong=function(){console.warn("\u9707\u52a8"),r&&n.default.Instance().vibrate&&r.vibrateLong()},t.bannerAd=null,t.videoAd=null,t.interstitialAd=null,t.gridAd=null,t.gridAdLoaded=!0,t.BANNER_ID="adunit-a232af06f96fb58f",t.VIDEO_ID="adunit-255a5a170472e3bb",t.CHAPIN_ID="adunit-00bce761c50c94a0",t.GRID_ID="adunit-32efe2baabc05555",t.APPID="wxddc8d8c081f5dd4f",t.navigatedata=null,t.videoCall=null,t.lastautovideo=0,t}();o.default=i,cc._RF.pop()},{"../utils/AudioMgr":"AudioMgr"}],WindowManager:[function(t,e,o){"use strict";cc._RF.push(e,"fea3aTpgkVOqYA14eo0CjpL","WindowManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UILayer=void 0;var a,s=t("../utils/Utils"),l=t("./BusyLoadingManager"),u=t("./Singleton");(function(t){t["\u80cc\u666f"]="\u80cc\u666f",t["\u6807\u9898"]="\u6807\u9898",t["\u5f39\u7a97"]="\u5f39\u7a97",t["\u6700\u9876\u5c42"]="\u6700\u9876\u5c42"})(a=o.UILayer||(o.UILayer={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._windows={},e.uiLayerMap=new Map,e}return r(e,t),e.prototype.register=function(t){for(var e in this._windowContainer=t,this._windows={},this.uiLayerMap=new Map,a){var o=new cc.Node(e);t.addChild(o);var n=o.addComponent(cc.Widget);n.left=n.right=n.top=n.bottom=0,n.isAlignBottom=n.isAlignLeft=n.isAlignTop=n.isAlignRight=!0,n.updateAlignment(),this.uiLayerMap.set(e,[])}},e.prototype.getLayer=function(t){return this._windowContainer.getChildByName(t)},e.prototype.open=function(t,e,o,n){return void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=!0),i(this,void 0,void 0,function(){var r=this;return c(this,function(){return[2,new Promise(function(i){var c=t.layer?t.layer:a.\u5f39\u7a97,u=r.uiLayerMap.get(c),p="";if(u.length>0){var f=u[u.length-1];f.winInfo.name!=t.name&&(p=f.winInfo.name)}if(e||(e={}),o&&(e.onClose=o),null==r._windows[t.name])n&&l.default.ins.addBusy(l.BUSY_TYPE.RES),s.default.loadRes(t.path+t.name,t.bundle,cc.Prefab,function(o,c){""!=p&&r.hide(p);var s=cc.instantiate(c);s.parent=r.getLayer(t.layer||a.\u5f39\u7a97);var f=s.getComponent(s.name);f.winInfo=t,r._windows[t.name]=f,f.onCreate(e),f.onShow(e),r.checkStack(u,f),u.push(f),n&&l.default.ins.removeBusy(l.BUSY_TYPE.RES),i(f)});else{""!=p&&r.hide(p),r.checkStack(u,r._windows[t.name]);var d=r._windows[t.name];u.push(d),d.node.active=!0,d.onShow(e),i(d)}})]})})},e.prototype.checkStack=function(t,e){var o=t.indexOf(e);o>=0&&(t=t.splice(o,1))},e.prototype.removeWindow=function(t,e){void 0===e&&(e=!0);var o,n=t.layer?t.layer:a.\u5f39\u7a97,r=this.uiLayerMap.get(n);if(r.length>0){var i=r[r.length-1];i.winInfo===t&&(i.data.onClose&&i.data.onClose(),i.onHide(),r.pop()),(i=r[r.length-1])&&(i.node.active=!0,i.onShow(i.data))}e?((o=this._windows[t.name]).onRecycle(),o.node.destroy(),this._windows[t.name]=null,delete this._windows[t.name]):(o=this._windows[t.name]).node.active=!1},e.prototype.panelDataUpdate=function(t,e){void 0===e&&(e=null),this._windows[t]&&this._windows[t].onShow(e)},e.prototype.getWin=function(t){return this._windows[t]?this._windows[t]:null},e.prototype.hide=function(t){var e=this._windows[t];e&&(e.onHide(),e.node.active=!1)},e}(u.default);o.default=p,cc._RF.pop()},{"../utils/Utils":"Utils","./BusyLoadingManager":"BusyLoadingManager","./Singleton":"Singleton"}]},{},["FloorShapeController","FloorShapeEdit","GraphicsSpriteMesh","PolygonMask","RegionalEditor","SceneParser","GameConst","UIPool","BasePanel","BaseUI","Component","CountDownLabel","FitUI","LinkPrefab","MsgHints","NavigateWeChat","GameModel","Model","ModelBase","BusyLoadingManager","Dispatcher","EventDispatcher","EventManager","Handler","LayerManager","PoolManager","Singleton","WXTTUtils","WindowManager","AudioMgr","BigNumber","ImageQueueLoader","Shake","StringUtil","Timer","Utils","GameEntry","BusyLoading","BgMove","Booster","CarGame","Coin","ControlPanel","FollowCamera","GameWin","LevelControl","LoseWin","PauseWin","RestarConfirm","ResultWin","RolloverCheck","Truck","LoadingWin","ShopWin"]);